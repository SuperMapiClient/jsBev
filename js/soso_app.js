/*SOSO Map API beta 1.0.120709.1 @Tencent Research*/
__MapNSImpl__={};__MapNS__={};__MapNSImpl__.Config={DEFAULT_LNG:116.39712896958922,DEFAULT_LAT:39.9165275426627,DEFAULT_ZOOMLEVEL:9,DEFAULT_TILE_SIZE:256,EARTH_RADIUS:6378137,BLANK_IMG:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",zoomMin:1,zoomMax:100,QueryType:{POI:"poi",SYN:"syn",RN:"rn",BUSLS:"busls",BUS:"bus",DT:"dt",DTS:"dts",GEOC:"geoc",RGEOC:"rgeoc",GC:"gc",NAV:"nav",WALK:"walk",POS:"pos",SG:"sg"},SERVICE_URL:"http://api.map.qq.com/"};
(function(){var c=null;try{throw Error("Get Script Url");}catch(t){c=t.fileName||t.sourceURL;if(!c&&t.stack)c=!window.opera?(t.stack.match(/at\s+(.*):\d+/)||[null,null])[1]:(t.stack.match(/@(.*):\d+/)||[null,null])[1];if(!c){var p=document.getElementsByTagName("script"),j=[],u,i;u=0;for(i=p.length;u<i;u++){var k=p[u].src;if(k.indexOf("Config.js")!=-1||k.indexOf("app.js")!=-1)j.push(k)}if(j.length===1)c=j[0];else{u=0;for(i=j.length;u<i;u++)if(j[u].indexOf("map.soso.com")!=-1){c=j[u];break}}}}p="";
if(c){p=c.substring(0,c.lastIndexOf("/"));if(p.indexOf("common")!==-1)p=c.substring(0,p.lastIndexOf("/"));if(/MSIE (\d+(\.\d+)?)/.test(navigator.userAgent))if(parseFloat(RegExp.$1)===6&&p.indexOf("localhost")>0)p="http://"+document.domain+"/"+p}(function(o){var g=document,b=g.createElement("style");b.setAttribute("type","text/css");if(b.styleSheet)b.styleSheet.cssText=o;else{o=g.createTextNode(o);b.appendChild(o)}o=g.getElementsByTagName("head");o.length?o[0].appendChild(b):g.documentElement.appendChild(b)})("@media print{.smnoprint{display:none}}");
__MapNSImpl__.Config.domain=p+"/"})();(function(){__MapNSImpl__.Interfaces={registInterface:function(c,t){for(var p={},j=0,u=t.length;j<u;j++)p[t[j]]=null;__MapNSImpl__.Interfaces[c]=p}};__MapNSImpl__.Class=function(){for(var c=function(){this.initialize&&this.initialize.apply(this,arguments)},t={},p,j=0,u=arguments.length;j<u;++j){p=arguments[j];if(typeof p=="function"){if(j==0&&u>1){t=function(){};t.prototype=p.prototype;t=new t}p=p.prototype}else{p=p;p.initialize&&(c=p.initialize,delete p.initialize)}__MapNSImpl__.Synchronize.copy(t,
p)}t.constructor=c;c.prototype=t;return c};__MapNSImpl__.Synchronize={fill:function(c,t){if(c){for(var p in t)if(p!=="prototype"&&t.hasOwnProperty(p)&&c[p]===undefined)c[p]=t[p];return c}else return t},copy:function(c,t){if(!t||!c)throw Error("You must provide an object to copy from and to");for(var p in t)c[p]=t[p]}}})();(function(c){function t(a,h,m,q){if(h<m){var w;w=q(a[m]);for(var x=h-1,B=h;B<m;B++)if(q(a[B])<=w){x++;var E=a[B];a[B]=a[x];a[x]=E}E=a[x+1];a[x+1]=a[m];a[m]=E;w=x+1;t(a,h,w-1,q);t(a,w+1,m,q)}}function p(a){a=a||window.event;c.Event.stopEvent(a);return false}!window.console&&(window.console={},console.log=function(){});var j={};__MapNSImpl__.Util=j;j.Browser=function(){var a=navigator.userAgent,h=0,m=0,q=0,w=0,x=0,B=0,E=0,A=0,r=0;if(/opera\/(\d+\.\d)/i.test(a))m=+RegExp.$1;else if(/msie (\d+\.\d)/i.test(a))h=
document.documentMode||+RegExp.$1;else if(/firefox\/(\d+\.\d)/i.test(a))w=+RegExp.$1;else if(/netscape(\s|\/)(\d+(\.\d+)?)/i.test(a))B=+RegExp.$1;else if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&!/android/i.test(a))q=+(RegExp.$1||RegExp.$2);else if(/chrome\/(\d+\.\d)/i.test(a))x=+RegExp.$1;else if(/android\s(\d+\.\d)/i.test(a))E=+RegExp.$1;else if(/iPad.*OS\s(\d[_\d]*)/i.test(a))A=+parseFloat(RegExp.$1.replace(/_/g,"."));else if(/iphone\sOS\s(\d[_\d]*)/i.test(a))r=
+parseFloat(RegExp.$1.replace(/_/g,"."));else/(BlackBerry).*Version\/([\d.]+)/.test(a)&&parseFloat(RegExp.$1);var v=function(){return{ie:h,firefox:w,netscape:B,opera:m,safari:q,chrome:x,android:E,iphone:r,ipad:A,gecko:/gecko/i.test(a)&&!/like gecko/i.test(a),webkit:/webkit/i.test(a),isSupportTouch:"ontouchstart"in window||A||r||E}};try{return v}finally{v=null}}();j.OS=function(){var a=navigator.userAgent;a={windows:/\(Windows;/i.test(a),mac:/\(Mac;/i.test(a),linux:/; Linux/i.test(a),iPhone:/\(iPhone;/i.test(a),
iPod:/\(iPod;/i.test(a),iPad:/\(iPad;/i.test(a),android:/android/i.test(a)};a.iOS=a.iPhone||a.iPod||a.iPad;a.isMobile=a.iOS||a.android;return a};j.sortByGetter=function(a,h){return t(a,0,a.length-1,h)};var u=null;j.removeNode=function(a){if(j.Browser().ie){c.Event.clearListeners(a);u||(u=document.createElement("div"));u.appendChild(a);u.innerHTML=""}else a&&a.parentNode&&a.parentNode.removeChild(a)};var i=[],k=[];j.fetchImage=function(a,h){var m,q,w=false;m=0;for(q=i.length;m<q;++m)if(i[m].url===
a){h(i[m].width,i[m].height,a,i[m].image);return i[m].image}m=0;for(q=k.length;m<q;m++)if(k[m].url===a){k[m].callbacks.push(h);w=true}if(!w){k.push({url:a,callbacks:[h]});var x=new Image,B=function(E,A){for(var r=0;r<k.length;r++)if(k[r].url===A){for(var v=k[r].callbacks,z=0;z<v.length;z++)v[z](E.width,E.height,A,E);k.splice(r,1);break}};m=c.Event;m.addDomListenerOnce(x,"load",function(){i.push({url:a,width:x.width,height:x.height,image:x});B(x,a);x=null});m.addDomListenerOnce(x,"error",function(){i.push({url:a,
width:0,height:0,image:x});h(0,0,a);B(x,a);x=null});a.indexOf("?");x.src=a;return x}};j.setSize=function(a,h){if(h.getWidth){a.style.width=j.formatInput(h.getWidth());a.style.height=j.formatInput(h.getHeight())}else{a.style.width=j.formatInput(h[0]);a.style.height=j.formatInput(h[1])}};j.setPosition=function(a,h){if(h.getX){a.style.left=j.formatInput(h.getX());a.style.top=j.formatInput(h.getY())}else{a.style.left=j.formatInput(h[0]);a.style.top=j.formatInput(h[1])}};j.setDomCoord=function(a,h){var m=
a.style;(h[0]||h[0]===0)&&(m.left=h[0]+"px");(h[1]||h[1]===0)&&(m.top=h[1]+"px");(h[2]||h[2]===0)&&(m.width=h[2]+"px");(h[3]||h[3]===0)&&(m.height=h[3]+"px")};j.getChildNodesByTag=function(a,h){var m=[];for(a=a.firstChild;a;){a.tagName.toLowerCase()===h&&m.push(a);a=a.nextSibling}return m};j.getCssSpriteImage=function(a,h,m,q,w){var x=function(B,E,A,r){B.width=A;B.height=r;if(j.Browser().ie&&j.Browser().ie<=6){if(E.toUpperCase().indexOf(".PNG")>0)B.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=scale, src="'+
E+'"'}else B.src=E;B.style.display=""};if(!m){m=document.createElement("img");if(!q){m.style.cssText="-moz-user-select:none;-khtml-user-select:none;";m.unselectable="on";q=c.Event;q.addDomListener(m,"selectstart",p);q.addDomListener(m,"dragstart",p)}m.style.position="absolute";m.src=__MapNSImpl__.Config.domain+"imgs/transparent.gif"}(function(B,E,A){B.className="csssprite";B.style.display="none";if(A){var r=A.getWidth();A=A.getHeight();x(B,E,r,A)}else j.fetchImage(E,function(v,z){x(B,E,v,z)})})(m,
a,w);m.style.left=-h[0]+"px";m.style.top=-h[1]+"px";return m};j.setCssSprite=function(a,h,m,q,w,x,B){if(j.Browser().ie&&j.Browser().ie<=6||B==true){if(a.style.position!="relative"&&a.style.position!="absolute")a.style.position="relative";a.style.background="";a.style.overflow="hidden";x=a.childNodes;B=null;for(var E=0,A=x.length;E<A;++E)if(x[E].className=="csssprite"){B=x[E];break}B=j.getCssSpriteImage(h,m,B,q,w);B.parentNode||a.appendChild(B)}else{if(w){q=w.getWidth();w=w.getHeight();a.style.width=
q+"px";a.style.height=w+"px"}if(x){a.style.position="absolute";a.style.left=x.getWidth()+"px";a.style.top=x.getHeight()+"px"}h&&(a.style.backgroundImage="url("+h+")");a.style.backgroundPosition=-m[0]+"px "+-m[1]+"px"}};j.getMouseXY=function(a){var h=[];if(j.Browser().ie)h=[a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)];else if(a.touches){h=null;if(a.targetTouches.length>0)h=a.targetTouches[0];else if(a.changedTouches.length>
0)h=a.changedTouches[0];h=[h.pageX,h.pageY]}else h=[a.pageX,a.pageY];return h};j.getDomCoordinate=function(a){var h=j.Browser();if(a.parentNode===null||a.style.display=="none")return[0,0,0,0];var m=null,q=0,w=0,x=a.offsetWidth,B=a.offsetHeight;if(a.getBoundingClientRect&&!h.isSupportTouch){h=a.getBoundingClientRect();a=Math.max(document.documentElement.scrollTop,document.body.scrollTop);q=h.left+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);w=h.top+a}else{if(document.getBoxObjectFor){h=
document.getBoxObjectFor(a);q=a.style.borderLeftWidth?parseInt(a.style.borderLeftWidth):0;m=a.style.borderTopWidth?parseInt(a.style.borderTopWidth):0;q=h.x-q;w=h.y-m}else{q=a.offsetLeft;w=a.offsetTop;m=a.offsetParent;if(m!=a)for(;m;){q+=m.offsetLeft;w+=m.offsetTop;m=m.offsetParent}if(h.opera||h.safari&&a.style.position=="absolute"){q-=document.body.offsetLeft;w-=document.body.offsetTop}}for(m=a.parentNode?a.parentNode:null;m&&m.tagName!="BODY"&&m.tagName!="HTML";){q-=m.scrollLeft;w-=m.scrollTop;m=
m.parentNode?m.parentNode:null}}return[q,w,x,B]};j.getStyle=function(a,h,m){if(!a)return null;if(document.defaultView&&m){h=h.replace(/[A-Z]/g,function(w){return"-"+w.toLowerCase()});try{return document.defaultView.getComputedStyle(a,null).getPropertyValue(h)}catch(q){return null}}h=h.replace(/-(\D)/g,function(w,x){return x.toUpperCase()});if(h=="float")h=j.Browser().ie?"styleFloat":"cssFloat";if(a.currentStyle&&m)return a.currentStyle[h];return a.style?a.style[h]:undefined};j.getSize=function(a){var h,
m;h=j.getStyle(a,"width");m=j.getStyle(a,"height");if(h.indexOf("px")===-1)h=0;if(m.indexOf("px")===-1)m=0;return{width:parseInt(h)||a.offsetWidth||a.clientWidth,height:parseInt(m)||a.offsetHeight||a.clientHeight}};j.toCamelCase=function(){var a={};return function(h){if(a[h])return a[h];else{h=h.replace(/([A-Z]+)/g,function(m,q){return q.substr(0,1).toUpperCase()+q.toLowerCase().substr(1,q.length)}).replace(/[\-_\s](.)/g,function(m,q){return q.toUpperCase()});return a[h]=h}}}();j.setStyle=function(a,
h,m){var q;a=typeof a==="string"?document.getElementById(a):a;if(typeof h==="string")if(m)a.style.cssText=h;else{m=h.split(";");for(q=0;q<m.length;q++){var w=j.toCamelCase(m[q]);a.style[w]=h[x]}}else{if(m)a.style.cssText="";for(var x in h)if(h.hasOwnProperty(x))if(m)q+=x+":"+h[x]+";";else{w=j.toCamelCase(x);a.style[w]=h[x]}if(m)a.style.cssText=q}return a};j.getMouseCoordinate=function(a){var h=[];if(j.Browser().ie)h=[a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),a.clientY+
(document.documentElement.scrollTop||document.body.scrollTop)];else if(a.touches){h=null;if(a.targetTouches.length>0)h=a.targetTouches[0];else if(a.changedTouches.length>0)h=a.changedTouches[0];h=[h.pageX,h.pageY]}else h=[a.pageX,a.pageY];return h};j.topLeft=function(a){a=a instanceof String?document.getElementById(a):a;if(!a)throw"You have not provided a valid element to topLeft()";return{x:a.style.left?parseInt(a.style.left,10):0,y:a.style.top?parseInt(a.style.top,10):0}};j.centerChangedFixDisplayBBox=
function(a,h){if(h!==undefined&&h!==null){if(a.lng<h[0])a.lng=h[0];else if(a.lng>h[2])a.lng=h[2];if(a.lat<h[1])a.lat=h[1];else if(a.lat>h[3])a.lat=h[3]}};j.isCenterInDisplayBBox=function(a,h,m){var q=false;if(m!==undefined&&m!==null){if(a>m[0]&&h>m[1]&&a<m[2]&&h<m[3])q=true}else q=true;return q};j.setPositionByAlign=function(a,h,m,q){if(a){var w=a.style,x=m.getWidth();m=m.getHeight();var B=h%3;h=Math.floor(h/3);var E=Math.floor(a.offsetWidth/2);a=Math.floor(a.offsetHeight/2);if(B===1){w.left=q?Math.floor(q.offsetWidth/
2)+"px":"50%";w.marginLeft=x-E+"px"}if(h===1){w.top=q?Math.floor(q.offsetHeight/2)+"px":"50%";w.marginTop=m-a+"px"}if(B===2){w.right=x+"px";w.left=""}if(B===0){w.left=x+"px";w.right=""}if(h===0){w.top=m+"px";w.bottom=""}if(h===2){w.bottom=m+"px";w.top=""}}};var o={TOP_LEFT:0,TOP:1,TOP_RIGHT:2,LEFT:3,CENTER:4,RIGHT:5,BOTTOM_LEFT:6,BOTTOM:7,BOTTOM_RIGHT:8};o.isTop=function(a){return a<3};o.isMiddle=function(a){return a>2&&a<6};o.isBottom=function(a){return a>5};o.isLeft=function(a){return a%3==0};o.isCenter=
function(a){return a%3==1};o.isRight=function(a){return a%3==2};j.forEach=function(a,h,m){if(a)if(a.length){m=0;for(var q=a.length;m<q;++m)h(m,a[m])}else for(q in a)if(m||!a.hasOwnProperty||a.hasOwnProperty(q))h(q,a[q])};j.callback=function(a,h,m){m=m||[];return function(){for(var q=m.concat(),w=0;w<arguments.length;w++)q.push(arguments[w]);h&&h.apply(a,q)}};j.copyObject=function(a,h,m){j.forEach(a,function(q){h[q]=a[q]},m)};var g={};j.capitalInitial=function(a){return g[a]||(g[a]=a.substr(0,1).toUpperCase()+
a.substr(1))};var b,d=(new Date).getTime();__MapNSImpl__.debug={write:function(){for(var a=[],h=0,m=arguments.length;h<m;h++)if(arguments[h]&&arguments[h].length)a=a.concat(arguments[h]);else a.push(arguments[h]);a.join(", ");h=document.createElement("div");h.style.cssText="border-bottom:1px dashed #e0ecff;line-height:12px;padding:2px 0;height:12px;";h.innerHTML='<xmp style="margin:0 80px 0 0;float:left;">'+a+"</xmp>";a=document.createElement("div");a.style.cssText="float:right;";b=(new Date).getTime();
a.innerHTML=b-d+" ms";d=b;h.appendChild(a);var q=document.getElementById("__debug"),w=document.getElementById("__debug_content");if(!q){q=document.createElement("div");q.id="__debug";q.style.cssText="position:fixed;*position:absolute;bottom:0;left:2%;width:96%;height:100px;overflow:hidden;z-index:100000;background:#99c661;font-size:11px;";document.body.appendChild(q);a=document.createElement("div");a.style.cssText="height:16px;line-height:16px;background:#88b752;position:relative;";a.innerHTML='<span style="margin-left:5px;color:white;font-weight:bold;">Logs</span>';
m=document.createElement("span");m.style.cssText="color:white;cursor:pointer;position:absolute;right:45px;text-decoration:underline;";m.innerHTML="Clear";var x=c.Event;x.addDomListener(m,"click",function(){w.innerHTML=""});var B=document.createElement("span");B.style.cssText="color:white;cursor:pointer;position:absolute;right:45px;text-decoration:underline;";B.style.right="10px";B.innerHTML="Hide";x.addDomListener(B,"click",function(){if(B.innerHTML=="Hide"){B.innerHTML="Show";q.style.height="16px"}else{B.innerHTML=
"Hide";q.style.height="100px"}});a.appendChild(m);a.appendChild(B);w=document.createElement("div");w.id="__debug_content";w.style.cssText="height:80px;overflow:auto;background:#99c661;margin:2px 5px;color:#333333;";q.appendChild(a);q.appendChild(w)}q.style.display="";w.appendChild(h);w.scrollTop=w.scrollHeight},clear:function(){document.getElementById("__debug_content").innerHTML=""}};j.lngFrom4326ToProjection=function(a){return a*111319.49077777778};j.latFrom4326ToProjection=function(a){a=Math.log(Math.tan((90+
a)*0.008726646259971648))/0.017453292519943295;a*=111319.49077777778;return a};j.lngFromProjectionTo4326=function(a){return a/111319.49077777778};j.latFromProjectionTo4326=function(a){a=a/111319.49077777778;return a=Math.atan(Math.exp(a*0.017453292519943295))*114.59155902616465-90};j.wrapXY=function(a,h){var m;if(h<0){m=h%a;h=m!==0?a+m:0}else h=h>=a?h%a:h;return h};j.getOptimalZoomLevel=function(a,h,m,q,w,x){var B=a.getSouthWest();a=a.getNorthEast();var E;for(E=__MapNSImpl__.Config.zoomMax;E>=0;E--){var A=
q.fromLatLngToPoint(a,E),r=q.fromLatLngToPoint(B,E),v=Math.abs(r.y-A.y);if(Math.abs(A.x-r.x)<=h+1&&v<=m+1)break}E=Math.max(E,w);return E=Math.min(E,x)};j.getSeedTileIndex=function(a,h){var m;m=a.getLng();var q=a.getLat(),w=Math.pow(2,h+7),x=w*2;q=Math.min(Math.max(Math.sin(q*(Math.PI/180)),-0.9999),0.9999);m=[w+m*(x/360),w-0.5*Math.log((1+q)/(1-q))*(x/(2*Math.PI))];return[m[0],m[1]]};var f=[],l=[];j.startDrag=function(a,h,m,q){for(var w=j.getMouseCoordinate(q),x=f.length;x--;)if(f[x][0]==h&&f[x][1]==
m)return;f.push([h,m,w,a]);q.mousePageX=w[0];q.mousePageY=w[1];m.dragstart&&m.dragstart(q,a)};j.stopDrag=function(a,h,m){for(var q=0,w;w=f[q];q++)if(w[0]===a&&w[3]===h){m&&w[1].dragend(m);f.splice(q,1);q--}};j.enableDrag=function(a,h,m,q){var w,x=false,B=c.Event,E=!a.__noCapture,A=function(e){x=true;if(E&&h.setCapture){h.setCapture();w=B.addDomListener(h,"losecapture",F)}if(e.button!==2)if(e.touches&&e.touches.length>1){e=0;for(var n;n=f[e];e++)if(n[0]==h){f.splice(e,1);e--}}else{n=j.getMouseCoordinate(e);
B.preventDefault(e);f.push([h,m,n,a]);e.mousePageX=n[0];e.mousePageY=n[1];m.dragstart&&m.dragstart(e)}};a.length||(a=[a]);for(var r=0;r<a.length;r++)if(j.Browser().isSupportTouch)B.addDomListener(a[r],"touchstart",A);else{B.addDomListener(a[r],"mousedown",A);B.addDomListener(a[r],"selectstart",function(e){B.stopEvent(e)})}A=false;r=0;for(var v=l.length;r<v;r++)if(l[r]==h)A=true;if(!A){l.push(h);var z=null,C=function(e,n){e=e||window.event;var s=j.getMouseCoordinate(e);e.mousePageX=s[0];e.mousePageY=
s[1];for(var y=0,D;D=f[y];y++)if(D[0]==h){var G=[s[0]-D[2][0],s[1]-D[2][1]];if(n){D[1].dragging&&D[1].dragging(e,G,true);D[1].dragend&&D[1].dragend(e,G);f.splice(y,1);y--}else D[1].dragging&&D[1].dragging(e,G)}z=null};q=q||0;A=function(e){if(!(j.Browser().isSupportTouch&&!x))if(!(z&&q!=0)){C(e);q!=0&&(z=window.setTimeout(function(){z=null},q))}};var F=function(e){x=false;if(E&&h.releaseCapture){h.releaseCapture();B.removeListener(w)}C(e,true)};if(j.Browser().isSupportTouch){B.addDomListener(h,"touchmove",
A);B.addDomListener(h,"touchend",F)}else{B.addDomListener(h,"mousemove",A);B.addDomListener(h,"mouseup",F)}}};j.RPCRequest=function(a,h){var m=document.createElement("script");m.type="text/javascript";m.charset="utf-8";if(j.Browser().ie&&j.Browser().ie<9)m.onreadystatechange=function(){if(m.readyState==="loaded"||m.readyState==="complete"){h&&h();m.onreadystatechange=null;m.removeAttribute("src");m.parentNode.removeChild(m)}};else m.onload=function(){h&&h();m.onload=null;m.removeAttribute("src");
m.parentNode.removeChild(m)};var q=document.getElementsByTagName("head")[0];if(!q)q=document.body;m.src=a;q.appendChild(m)};j.adapter=function(a,h){return function(){var m=Array.prototype.slice.call(arguments,0);m.push(this);h.apply(a,m)}};j.setCursorStyle=function(a,h,m){try{var q=j.Browser();if(h=="grab"){var w=__MapNSImpl__.Config.domain+"imgs/grab.cur";h=q.firefox?"-moz-grab":"url("+w+")"+(q.chrome||q.safari?" 10 10":"")+", "+m}if(h=="grabbing"){var x=__MapNSImpl__.Config.domain+"imgs/grabbing.cur";
h=q.firefox?"-moz-grabbing":"url("+x+")"+(q.chrome||q.safari?" 10 10":"")+", "+m}m=m||"auto";var B=h.toLowerCase();if(B.indexOf(".cur")>0)if(B.indexOf("url")<0)h="url("+h+"),"+m;if(B=="hand"&&!q.ie)h="pointer";a.style.cursor=h;return true}catch(E){return false}};j.setUnSelectable=function(a){if(j.Browser().ie||window.opera){var h=c.Event;a.unselectable="on";h.addDomListener(a,"selectstart",j.falseFunction);h.addDomListener(a,"dragstart",j.falseFunction)}else{a.style.MozUserSelect="none";a.style.WebkitUserSelect=
"none"}};j.falseFunction=function(a){c.Event.stopEvent(a);return false};j.setOpacity=function(a,h){if(a){a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+parseInt(h*100)+")";a.style.MozOpacity=h;a.style.opacity=h}};j.isHtmlControl=function(a){var h=document.createElement("div");if(typeof a==="string"||typeof a==="number")return false;try{h.appendChild(a.cloneNode(true));return a.nodeType==1?true:false}catch(m){return a==window||a==document}};j.parseCoords=function(a){a=a.split(",");
for(var h=a.length,m=2;m<h;m++)a[m]=(parseFloat(a[m-2])+parseFloat(a[m])/1E6).toFixed(6);a[0]=parseFloat(a[0],10).toFixed(6);a[1]=parseFloat(a[1],10).toFixed(6);h=[];for(m=0;m<a.length;m+=2)h.push(new c.LatLng(a[m+1],a[m]));return h};j.getNumberInRange=function(a,h,m){if(h!=null)a=Math.max(a,h);if(m!=null)a=Math.min(a,m);return a};j.getLoopNumber=function(a,h,m){if(a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)return h;if(a>=h&&a<=m)return a;m-=h;return(a%m+m-h)%m+h};j.radianToDegree=function(a){return a/
(Math.PI/180)};j.degreeToRadian=function(a){return a*(Math.PI/180)};j.isEquals=function(a,h){return Math.abs(a-h)<=1.0E-9};j.domReady=function(a,h){function m(){if(!x){x=true;a()}}var q={enableMozDOMReady:true};if(h)for(var w in h)q[w]=h[w];var x=false;if(j.Browser().ie){(function(){if(!x){try{document.documentElement.doScroll("left")}catch(B){setTimeout(arguments.callee,20);return}m()}})();window.attachEvent("onload",m)}else{if(j.Browser().webkit&&j.Browser().webkit<525)(function(){x||(/loaded|complete/.test(document.readyState)?
m():setTimeout(arguments.callee,0))})();else if(!j.Browser().firefox||j.Browser().firefox!=2||q.enableMozDOMReady)document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);m()},false);window.addEventListener("load",m,false)}};j.containsNode=function(a,h){return a.contains?a!=h&&a.contains(h):!!(a.compareDocumentPosition(h)&16)};j.isInDocument=function(a){return a&&a.parentNode&&a.parentNode.nodeType!=11};j.pixelDistance=function(a,
h){if(a&&h)return Math.round(Math.sqrt(Math.pow(a.getX()-h.getX(),2)+Math.pow(a.getY()-h.getY(),2)))};j.getSupportedProp=function(a){for(var h=document.documentElement,m=0;m<a.length;m++)if(typeof h.style[a[m]]=="string")return a[m]};j.setZIndex=function(a,h){a.style.zIndex=h};j.getCurrentStyle=function(a){if(a.currentStyle)return a.currentStyle;else if(a.ownerDocument&&a.ownerDocument.defaultView)return a.ownerDocument.defaultView.getComputedStyle(a,null)};j.createDiv=function(a){var h=document.createElement("div");
h.style.cssText=a;return h};j.formatInput=function(a){if(typeof a=="number")return a+"px";else if(typeof a=="string"){a=a.replace(RegExp("\\s","g"),"");if(/^\d+(px|%)+$/i.exec(a))return a;if(/^\d+$/.exec(a))return a+"px";return"0px"}};j.thinFunction=function(a,h){if(typeof h!=="function"||typeof a!=="number"||a<0)return h;var m=0,q=null;return function(){clearTimeout(q);var w=this,x=+new Date;if(x-m>=a){m=x;return h.apply(w,arguments)}else{var B=arguments[0];if(!(B&&(window.Event==B.constructor||
window.MouseEvent==B.constructor))){var E=[].slice.call(arguments,0);x=a-x+m;q=setTimeout(function(){h.apply(w,E);m=+new Date},x>15?x:15)}}}};c.ALIGN=o;window.log_=__MapNSImpl__.debug.write})(__MapNS__);__MapNSImpl__.RC={};__MapNSImpl__.RC.NavControl={zoomIn:"\u653e\u5927",zoomOut:"\u7f29\u5c0f",left:"\u5411\u5de6\u5e73\u79fb",right:"\u5411\u53f3\u5e73\u79fb",up:"\u5411\u4e0a\u5e73\u79fb",down:"\u5411\u4e0b\u5e73\u79fb",ruler:"\u5355\u51fb\u7f29\u653e",slide:"\u62d6\u52a8\u7f29\u653e",zoomLevelTips:{17:"\u8857",11:"\u5e02",8:"\u7701",4:"\u56fd"}};__MapNSImpl__.RC.Control={};__MapNSImpl__.RC.Control.TencentText="&copy 2012 Tencent ";__MapNSImpl__.RC.Control.GotoHome="\u5230SOSO\u5730\u56fe\u9996\u9875";
__MapNSImpl__.RC.Control.ScaleText=["1000\u516c\u91cc","1000\u516c\u91cc","1000\u516c\u91cc","1000\u516c\u91cc","500\u516c\u91cc","200\u516c\u91cc","200\u516c\u91cc","100\u516c\u91cc","50\u516c\u91cc","20\u516c\u91cc","10\u516c\u91cc","5\u516c\u91cc","2\u516c\u91cc","1\u516c\u91cc","500\u7c73","200\u7c73","200\u7c73","100\u7c73","50\u7c73"];
__MapNSImpl__.RC.PolyEditLabel={start:"\u8d77\u70b9",end:"\u5171",add:"\u5355\u51fb\u9f20\u6807\u6dfb\u52a0\u65b0\u70b9",remove:"\u79fb\u9664\u8be5\u70b9",destroyPolyline:"\u79fb\u9664\u8be5\u6298\u7ebf",destroyPolygon:"\u79fb\u9664\u8be5\u591a\u8fb9\u5f62",drag:"\u62d6\u62fd\u79fb\u52a8\u8be5\u70b9",dragNew:"\u62d6\u62fd\u6dfb\u52a0\u4e00\u4e2a\u65b0\u70b9",drawStart:"\u5355\u51fb\u9009\u62e9\u8d77\u70b9",drawCurrent:"\u5f53\u524d",drawing:"\u5355\u51fb\u5de6\u952e\u7ee7\u7eed\uff0c\u53cc\u51fb\u6216\u53f3\u952e\u7ed3\u675f"};
__MapNSImpl__.RC.Units={m:"\u7c73",km:"\u516c\u91cc",msec:"\u6beb\u79d2",sec:"\u79d2",min:"\u5206\u949f",hour:"\u5c0f\u65f6"};__MapNSImpl__.RC.Direction=["\u4e1c","\u4e1c\u5317","\u5317","\u897f\u5317","\u897f","\u897f\u5357","\u5357","\u4e1c\u5357"];__MapNSImpl__.RC.Transfer=["\u4e58\u5750","\u7ecf\u8fc7","\u7ad9","\u5230\u8fbe","\u7ec8\u70b9"];
__MapNSImpl__.RC.MapType={ROADMAP:{name:"\u5730\u56fe",alt:"\u663e\u793a\u8857\u9053\u5730\u56fe"},SATELLITE:{name:"\u536b\u661f",alt:"\u663e\u793a\u536b\u661f\u5730\u56fe"},HYBRID:{name:"\u6df7\u5408",alt:"\u663e\u793a\u5e26\u6709\u8857\u9053\u540d\u79f0\u7684\u56fe\u50cf"}};
__MapNSImpl__.RC.TileLayer={ROADMAP:{name:"\u5730\u56fe",alt:"\u663e\u793a\u8857\u9053\u5730\u56fe"},SATELLITE:{name:"\u536b\u661f",alt:"\u663e\u793a\u536b\u661f\u5730\u56fe"},HYBRID:{name:"\u8def\u7f51",alt:"\u663e\u793a\u5e26\u6709\u8857\u9053\u540d\u79f0\u7684\u56fe\u50cf"},TRAFFIC:{name:"\u8def\u51b5",alt:"\u663e\u793a\u5b9e\u65f6\u8def\u51b5\u7684\u56fe\u50cf"}};__MapNSImpl__.RC.LatLngOutOfRange="\u8bf7\u6c42\u7684\u7ecf\u7eac\u5ea6\u4e0d\u5728\u670d\u52a1\u5668\u652f\u6301\u7684\u8303\u56f4\u5185\uff0c\u8bf7\u91cd\u8bd5\uff01";(function(c){function t(h,m){var q;if(b.Browser().ie)q=p(h).__events_;else{h.__events_||(h.__events_={});q=h.__events_}q[m]||(q[m]={});return q[m]}function p(h){var m;if(h&&h.__oid_)m=l.eventObjects[h.__oid_];if(!m&&h){h.__oid_=++f;m={__events_:{}};l.eventObjects[h.__oid_]=m}return m}function j(h,m){var q,w={};if(b.Browser().ie){if(q=p(h))w=q.__events_}else w=h.__events_||{};if(m)q=w[m]||{};else{q={};for(var x in w)b.copyObject(w[x],q)}return q}function u(h,m){m=m||[];if(Object.prototype.toString.apply(m)!==
"[object Array]")m=[m];if(h.target)return h.handler.apply(h.target,m);return null}function i(h){h.bindHandler=function(m){if((m=m||window.event)&&!m.target)try{m.target=m.srcElement}catch(q){}var w=u(h,[m]);if(m&&m.type==="click")if((m=m.srcElement)&&m.tagName&&m.tagName==="A"&&m.href==="javascript:void(0)")return false;return w};return h.bindHandler}function k(h){if(h&&h.type){this.originalEvent=h;this.type=h.type}else this.type=h;this.timeStamp=(new Date).valueOf();this.expando=true}function o(){return false}
function g(){return true}var b=__MapNSImpl__.Util,d=0,f=0,l={};l.listeners={};l.eventObjects={};var a=__MapNSImpl__.Class({className:"EventListener",initialize:function(h,m,q,w){this.target=h;this.eventName=m;this.handler=q;this.type=w;this.bindHandler=null;this.id=d++;t(h,m)[this.id]=this;if(b.Browser().ie)l.listeners[this.id]=this},remove:function(){if(this.target){switch(this.type){case 1:this.target.removeEventListener(this.eventName,this.handler,false);break;case 4:this.target.removeEventListener(this.eventName,
this.handler,true);break;case 2:this.target.detachEvent("on"+this.eventName,this.bindHandler);break;case 3:this.target["on"+this.eventName]=null}delete t(this.target,this.eventName)[this.id];delete l.listeners[this.id];this.target=this.handler=null}}});l.addListener=function(h,m,q,w){q=b.callback(h,q,w);return new a(h,m,q,0)};l.addListenerOnce=function(h,m,q,w){var x=null;return x=l.addListener(h,m,function(){q.apply(h,arguments);x&&x.remove();x=null},w)};l.removeListener=function(h){h&&h.remove()};
l.clearListeners=function(h,m){b.forEach(j(h,m),function(q,w){w&&w.remove()})};l.trigger=function(h,m,q){b.forEach(j(h,m),function(w,x){x&&u(x,q)})};l.addDomListener=function(h,m,q,w){q=b.callback(h,q,w);if(h.addEventListener){w=false;if(m==="focusin"){m="focus";w=true}else if(m==="focusout"){m="blur";w=true}var x=w?4:1;h.addEventListener(m,q,w);q=new a(h,m,q,x)}else if(h.attachEvent){if(m==="mouseover"&&(!h.tagName||h.tagName.toLowerCase()!=="area"))m="mouseenter";else if(m==="mouseout"&&(!h.tagName||
h.tagName.toLowerCase()!=="area"))m="mouseleave";q=new a(h,m,q,2);h.attachEvent("on"+m,i(q))}else{h["on"+m]=q;q=new a(h,m,q,3)}return q};l.addDomListenerOnce=function(h,m,q,w){var x=null;return x=l.addDomListener(h,m,function(){q.apply(h,arguments);x&&x.remove();x=null},w)};l.stopEvent=function(h){l.preventDefault(h);l.stopPropagation(h)};l.preventDefault=function(h){h=h||window.event;h.returnValue=false;h.preventDefault&&h.preventDefault()};l.stopPropagation=function(h){h=h||window.event;h.cancelBubble=
true;h.stopPropagation&&h.stopPropagation()};l.bindDom=function(h,m,q,w){w=b.adapter(q,w);return l.addDomListener(h,m,w)};l.bind=function(h,m,q,w){return l.addListener(h,m,b.adapter(q,w))};l.unload=function(){var h=l.listeners,m;for(m in h)h[m].remove();l.listeners=null;l.eventObjects=null;(h=window.CollectGarbage)&&h()};l.deposeNode=function(h,m){if(h){h.parentNode&&!m&&h.parentNode.removeChild(h);l.clearListeners(h);for(var q;q=h.firstChild;)l.deposeNode(q)}};l.fixEvent=function(h){if(h.expando)return h;
var m=h,q=window.document;h=new k(m);for(var w in m)if(typeof m[w]!=="function")h[w]=m[w];if(!h.target)h.target=h.srcElement||q;if(h.target.nodeType===3)h.target=h.target.parentNode;if(!h.relatedTarget&&h.fromElement)h.relatedTarget=h.type=="mouseover"||h.type=="mouseenter"?h.fromElement:h.toElement;if(h.pageX==null&&h.clientX!=null){m=q.documentElement;q=q.body;h.pageX=h.clientX+(m&&m.scrollLeft||q&&q.scrollLeft||0)-(m&&m.clientLeft||q&&q.clientLeft||0);h.pageY=h.clientY+(m&&m.scrollTop||q&&q.scrollTop||
0)-(m&&m.clientTop||q&&q.clientTop||0)}if(!h.which&&(h.charCode||h.charCode===0?h.charCode:h.keyCode))h.which=h.charCode||h.keyCode;if(!h.metaKey&&h.ctrlKey)h.metaKey=h.ctrlKey;if(!h.which&&h.button!==undefined)h.which={1:1,4:2,2:3}[h.button];return h};k.prototype={preventDefault:function(){this.isDefaultPrevented=g;var h=this.originalEvent;if(h){h.preventDefault&&h.preventDefault();h.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=g;var h=this.originalEvent;if(h){h.stopPropagation&&
h.stopPropagation();h.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o};c.Event=l})(__MapNS__);(function(c){function t(b,d,f,l,a){p(b)[d]={target:f,key:l};a||a||u(b,d)}function p(b){!b.hasOwnProperty("accessors_")&&(b.accessors_={});return b.accessors_}function j(b){!b.hasOwnProperty("bindings_")&&(b.bindings_={});return b.bindings_}function u(b,d){var f=d+o;b[f]?b[f]():b.changed(d);k.trigger(b,d.toLowerCase()+o)}var i=__MapNSImpl__.Util,k=c.Event,o="_changed",g=__MapNSImpl__.Class({initialize:function(){var b={};this.set=function(d,f){var l=p(this)[d];if(l){var a=l.target;l=l.key;var h="set"+
i.capitalInitial(l);a[h]?a[h](f):a.set(l,f)}else{a=b[d];b[d]=f;u(this,d,a)}};this.get=function(d){var f=p(this)[d];if(f){d=f.target;f=f.key;var l="get"+i.capitalInitial(f);return d[l]?d[l]():d.get(f)}else return b[d]}},setValues:function(b){for(var d in b){var f=b[d],l="set"+p(d);this[l]?this[l](f):this.set(d,f)}},notify:function(b){var d=p(this);if(d.hasOwnProperty(b)){b=d[b];b.target.notify(b.key)}else u(this,b)},bindTo:function(b,d,f,l){f=f||b;this.__checker__=this.__checker__||{};if(this.__checker__[b]!==
this.__checker__[f])throw Error("Can not bind properties of different type.");this.unbind(b);var a=f.toLowerCase()+o,h=this;j(this)[b]=k.addListener(d,a,function(){u(h,b)});t(this,b,d,f,l)},bindsTo:function(b,d,f,l){f=f||[];for(var a=0,h=b.length;a<h;a++)this.bindTo(b[a],d,f[a]||null,l)},unbind:function(b){var d=j(this)[b];if(d){delete j(this)[b];k.removeListener(d);d=this.get(b);delete p(this)[b];this[b]=d}},unbindAll:function(b){for(var d=0,f=b.length;d<f;d++)this.unbind(b[d])},changed:function(){}});
g.publicProperties=function(b,d){i.forEach(d,function(f){var l="get"+i.capitalInitial(f);b.prototype[l]=function(){return this.get(f)};l="set"+i.capitalInitial(f);b.prototype[l]=function(a){var h=d[f];if(h&&!h(a))throw Error("Invalid value or type for property <"+(f+(">: "+a)));this.set(f,a)}})};g.prototype.setOptions=g.prototype.setValues;g.prototype.unbinds=g.prototype.unbindAll;g.union=function(){var b=arguments,d=b.length;return function(){for(var f=0;f<d;++f)if(b[f].apply(this,arguments))return true;
return false}};g.checkers={isNull:function(b){return b===null||b===undefined},isBoolean:function(b){return b===!!b},isArray:function(b){return Object.prototype.toString.apply(b)==="[object Array]"},isObject:function(b){return Object.prototype.toString.apply(b)==="[object Object]"},isString:function(b){return typeof b==="string"},isHtmlControl:function(b){return i.isHtmlControl(b)},isNumber:function(b){return typeof b==="number"},checkInterface:function(b){return function(d){var f=true,l;for(l in b)if(b.hasOwnProperty(l)&&
d&&typeof d[l]!=="function")f=false;return f}},isInstanceOf:function(b){return function(d){return d instanceof b}}};g.checkers.isBoolOrNull=g.union(g.checkers.isBoolean,g.checkers.isNull);g.checkers.isStringOrNull=g.union(g.checkers.isString,g.checkers.isNull);g.checkers.isNumberOrNull=g.union(g.checkers.isNumber,g.checkers.isNull);g.checkers.checkInterfaceOrNull=g.union(g.checkers.checkInterfaces,g.checkers.isNull);g.checkers.isInstanceOfOrNull=g.union(g.checkers.isInstanceOf,g.checkers.isNull);
c.MVCObject=g})(__MapNS__);(function(c){__MapNSImpl__.Interfaces.registInterface("Point",["getX","getY","equals"]);var t=__MapNSImpl__.Class({initialize:function(p,j){this.x=p-0;this.y=j-0},getX:function(){return this.x},getY:function(){return this.y},equals:function(p){return this.getX()===p.getX()&&this.getY()===p.getY()},add:function(p){var j=this.clone();j.x+=p.x;j.y+=p.y;return j},multiplyBy:function(p){return new t(this.x*p,this.y*p)},subtract:function(p){var j=this.clone();j.x-=p.x;j.y-=p.y;return j},lerp:function(p,
j){j=Math.min(1,j);j=Math.max(0,j);var u=1-j;return new t(this.x*u+p.x*j,this.y*u+p.y*j)},clone:function(){return new t(this.x,this.y)},midpoint:function(p){return new t((this.x+p.x)*0.5,(this.y+p.y)*0.5)},toString:function(){return this.getX()+", "+this.getY()}});c.Point=t})(__MapNS__);(function(c){function t(p,j,u,i){this.red=p;this.green=j;this.blue=u;this.alpha=parseInt(i)>=0?i:1}t.prototype={toRGB:function(){return"rgb("+[this.red,this.green,this.blue].join(",")+")"},toRGBA:function(){return"rgba("+[this.red,this.green,this.blue,this.alpha].join(",")+")"},toHex:function(){return"#"+(16777216+(this.red<<16)+(this.green<<8)+this.blue).toString(16).slice(1)},toInt:function(){return this.red<<16|this.green<<8|this.blue},toString:function(){return this.toRGBA()}};t.fromHex=function(p){if(p.substring(0,
1)==="#")p=p.substr(1);var j=p.length===3?1:2,u=p.substr(0*j,j),i=p.substr(1*j,j);p=p.substr(2*j,j);if(j===1){u+=u;i+=i;p+=p}u=parseInt(u,16);i=parseInt(i,16);p=parseInt(p,16);return new t(u,i,p,1)};c.Color=t})(__MapNS__);(function(c){__MapNSImpl__.Interfaces.registInterface("Size",["getWidth","getHeight","equals"]);c.Size=__MapNSImpl__.Class({initialize:function(t,p){this.width=t;this.height=p},getWidth:function(){return this.width},getHeight:function(){return this.height},equals:function(t){return this.getWidth()===t.getWidth()&&this.getHeight()===t.getHeight()},toString:function(){return this.getWidth()+", "+this.getHeight()}})})(__MapNS__);(function(c){var t=c.Point,p=__MapNSImpl__.Class({initialize:function(j){this.minX=this.minY=Number.MAX_VALUE;this.maxX=this.maxY=-Number.MAX_VALUE;if(j&&j.length){for(var u=[],i=[],k=j.length;k--;){u.push(j[k].x);i.push(j[k].y)}this.minX=Math.min.apply(Math,u);this.maxX=Math.max.apply(Math,u);this.minY=Math.min.apply(Math,i);this.maxY=Math.max.apply(Math,i)}this.min=new t(this.minX,this.minY);this.max=new t(this.maxX,this.maxY)},isEmpty:function(){return!(this.minX<this.maxX&&this.minY<this.maxY)},
equals:function(j){if(!j)return false;return this.minX==j.minX&&this.minY==j.minY&&this.maxX==j.maxX&&this.maxY==j.maxY},containsBounds:function(j){return j.minX>this.minX&&j.maxX<this.maxX&&j.minY>this.minY&&j.maxY<this.maxY},containsPoint:function(j){return j.x>=this.minX&&j.x<=this.maxX&&j.y>=this.minY&&j.y<=this.maxY},intersects:function(j){if(!(this.isEmpty()||j.isEmpty()))if(!(j.maxX<this.minX||j.minX>this.maxX||j.maxY<this.minY||j.minY>this.maxY)){var u=Math.min(this.maxX,j.maxX),i=Math.min(this.maxY,
j.maxY);return new p([new t(Math.max(this.minX,j.minX),Math.max(this.minY,j.minY)),new t(u,i)])}},getCenter:function(){return new t((this.minX+this.maxX)/2,(this.minY+this.maxY)/2)},extend:function(j){if(j){this.minX=Math.min(this.minX,j.x);this.maxX=Math.max(this.maxX,j.x);this.minY=Math.min(this.minY,j.y);this.maxY=Math.max(this.maxY,j.y)}this.min.x=this.minX;this.min.y=this.minY;this.max.x=this.maxX;this.max.y=this.maxY},toString:function(){return this.minX+","+this.minY+","+this.maxX+","+this.maxY}});
c.Bounds=p})(__MapNS__);(function(){function c(f){for(var l=0,a;a=k[l];l++)if(f===a[0])return a;return null}var t=__MapNS__.Event,p=__MapNS__.Point,j=__MapNSImpl__.Config,u=__MapNS__.MVCObject,i=__MapNSImpl__.Util,k=[],o=false,g=__MapNSImpl__.Class(u,{initialize:function(){u.apply(this);this.renderTime_=null},redraw:function(){var f=(new Date).getTime(),l=false;if(this.renderTime_){if(f-this.renderTime>100){this.renderTime=f;l=true}}else{this.renderTime=f;l=true}var a=this;if(l)a.render?a.render():a.draw();else if(!this.renderTimer_)this.renderTimer_=
setTimeout(function(){a.render?a.render():a.draw();delete a.renderTimer_},0)},triggerMouseEvent:function(f,l){l.latLng=this.getMouseLatLng(l);l.qLatLng=this.getMouseLatLng(l);var a=this.get("model_");a&&t.trigger(a,f,[l])},registMouseEvents:function(f,l){for(var a=this.get("model_"),h=0,m=l.length;h<m;h++){var q=function(E,A,r){return function(v){var z=E.get("mapCanvasProjection_");if(E instanceof __MapNS__.Polyline&&v.__point__&&z)E&&(v.latLng=z.fromDivPixelToLatLng(v.__point__));else{z=A.getMouseLatLng(v);
v.latLng=z;v.qLatLng=z;v.qLngLat=z}if(r=="click"){var C={};C=t.fixEvent(v);if(!E.clickTimer_)E.clickTimer_=setTimeout(function(){E.firstTouche&&(E.firstTouche=null);E.secondTouche&&(E.secondTouche=null);clearTimeout(E.clickTimer_);E.clickTimer_=null;E&&t.trigger(E,r,[C])},200)}else{if(r=="dblclick")if(E.clickTimer_){clearTimeout(E.clickTimer_);E.clickTimer_=null}E&&t.trigger(E,r,[v])}}};if(l[h]==="click"){c(a)||k.push([a,false,null,false,this]);var w=function(E){return function(A){if(!(A.touches&&
A.touches.length!==1)){var r=i.getMouseCoordinate(A),v=c(E);v[1]=false;v[2]=r;v[3]=A.button===2;q(v[0],v[4],"mousedown")(A)}}};i.Browser().isSupportTouch?t.addDomListener(f,"touchstart",w(a)):t.addDomListener(f,"mousedown",w(a));if(!o){o=true;w=function(E){for(var A=0,r;r=k[A];A++)if(r[2]&&!r[3]){var v=i.getMouseCoordinate(E);if(r[2][0]!==v[0]||r[2][1]!==v[1])r[1]=true}};var x=function(E){for(var A=0,r;r=k[A];A++){var v=r[0].get("clickable")!==false;if(r[2]&&!r[1]&&v){v=i.getMouseCoordinate(E);if(r[0].firstTouche&&
E.touches){r[0].secondTouche=new p(v[0],v[1]);if(i.pixelDistance(r[0].firstTouche,r[0].secondTouche)<20&&E.touches){r[0].firstTouche=null;r[0].secondTouche=null;q(r[0],r[4],"dblclick")(E);break}}else r[0].firstTouche=new p(v[0],v[1]);if(E.button===2)q(r[0],r[4],"rightclick")(E);else r[0].clickTimer_||q(r[0],r[4],"click")(E)}r[2]=null}},B=document;if(i.Browser().isSupportTouch){t.addDomListener(B,"touchmove",w);t.addDomListener(B,"touchend",x)}else{t.addDomListener(B,"mousemove",w);t.addDomListener(B,
"mouseup",x)}}}else t.addDomListener(f,l[h],q(a,this,l[h]))}},getMouseLatLng:function(f){var l=this.get("map_")||this.get("map");if(l)return l.get("mapCanvasProjection_").fromContainerPixelToLatLng(this.getMouseContainerPixel(f),true);return null},getMouseContainerPixel:function(f){var l=this.get("map_")||this.get("map");if(l){f=i.getMouseCoordinate(f);l=l.get("mapContainer_");l=i.getDomCoordinate(l);return new p(f[0]-l[0],f[1]-l[1])}return null},draw:function(){}}),b={},d=[];g.loadView=function(f,
l){b[f]||(b[f]={status:0,models:[],view:null});switch(b[f].status){case 2:new b[f].view(l);break;case 0:b[f].status=1;b[f].models.push(l);var a="";if(j.loader)a="modules/"+f+"/";d.push(f);i.RPCRequest(j.domain+a+f+"View.js?v=1.0.120709",function(){var h=0,m=0,q=false;h=0;for(m=d.length;h<m;h++){var w=null,x=b[d[h]];if(d[h]===f){w=b[f];q=true}else if(q&&x.view&&x.status===3)w=x;if(w){w.status=2;x=0;for(var B=w.models.length;x<B;x++)new w.view(w.models[x])}if(!q&&!b[d[h]].view){b[f].status=3;break}}});
break;case 1:b[f].models.push(l)}};g.setView=function(f,l){b[f].view=l;if(b[f].status!==2)b[f].status=2};g.getView=function(f){return!!b[f].view};__MapNS__.MVCView=g})();(function(c){var t=c.Event,p=__MapNSImpl__.Class(c.MVCObject,{initialize:function(j){c.MVCObject.apply(this);this.elems=j||[];this.set("length",this.elems.length)},getAt:function(j){return this.elems[j]},forEach:function(j){for(var u=0,i=this.get("length");u<i;++u)if(j(this.elems[u],u)===false)break},setAt:function(j,u){this.elems.splice(j,0,u);this.set("length",this.elems.length);t.trigger(this,"insert_at",[j,u])},insertAt:function(j,u){this.elems.splice(j,0,u);this.set("length",this.elems.length);
t.trigger(this,"insert_at",[j,u])},removeAt:function(j){var u=this.elems[j];this.elems.splice(j,1);this.set("length",this.elems.length);t.trigger(this,"remove_at",[j,u]);return u},push:function(j){this.insertAt(this.elems.length,j);return this.elems.length},pop:function(j){if(j)for(var u=0;u<this.elems.length;u++)if(j==this.elems[u])return this.removeAt(u);return this.removeAt(this.elems.length-1)},exists:function(j){if(j)for(var u=0;u<this.elems.length;u++)if(j==this.elems[u])return true;return false},
clear:function(){this.elems.length=0;this.set("length",0)},getArray:function(){return this.elems}});c.MVCArray=p;c.MVCObject.publicProperties(p,{length:0})})(__MapNS__);(function(c){function t(){for(var g=(new Date).getTime(),b=0,d=j.length;b<d;b++){var f=j[b];if(f&&f.get("time_")){var l=f.get("current");if(l<0)break;var a=f.get("duration");f.get("fps");l>a&&(l=a);f.frame(l);if(l>=a){f.stop();break}f.set("current",(g-f.get("time_"))/1E3)}}}var p=c.Event,j=[],u=null,i=__MapNSImpl__.Util,k=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(g,
1E3/60)}}(),o=function(g,b){function d(){if((new Date).getTime()-f>=b){g.call();f=(new Date).getTime()}l.value=k(d)}if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame)return window.setInterval(g,b);var f=(new Date).getTime(),l={};l.value=k(d);return l};c.Animation=__MapNSImpl__.Class(c.MVCObject,{initialize:function(g){c.MVCObject.apply(this);g=g||{};g.duration=g.duration||0;g.fps=40;this.setValues(g)},prepare:function(){return true},
start:function(g){if(this.prepare()){this.stop(true);var b=this.get("fps");this.set("current",0.1/b);!g&&p.trigger(this,"start");this.set("status",1);j.push(this);this.set("time_",(new Date).getTime());u||(u=i.Browser().isSupportTouch?o(t,1E3/b):window.setInterval(t,1E3/b));t()}},stop:function(g){this.set("time_",null);for(var b=0,d=j.length;b<d;b++)if(j[b]===this){j.splice(b,1);break}if(j.length===0){if(i.Browser().isSupportTouch){if(u){b=u;d=b.value;window.cancelAnimationFrame?window.cancelAnimationFrame(d):
window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(d):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(d):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(d):clearInterval(b)}}else u&&window.clearInterval(u);u=null}this.set("status",0);this.set("current",-1);!g&&p.trigger(this,"end")},getStatus:function(){return this.get("status")},frame:function(){}});c.Animation.BOUNCE=0;c.Animation.DROP=1;c.Animation.JUMP=2;c.Animation.POP=
3;c.Fx=__MapNSImpl__.Class(c.Animation,{initialize:function(g){g=g||{};g.begins=g.begins||[];g.ends=g.ends||[];g.duration=g.duration||0;g.callback=g.callback||function(){};g.fps=g.fps||60;g.method=g.method||c.Fx.linear;c.MVCObject.apply(this);this.setValues(g)},isBeginEqualsEnd:function(){for(var g=this.get("begins"),b=this.get("ends"),d=true,f=0,l=g.length;f<l;f++)if(g[f]!==b[f]){d=false;break}return d},prepare:function(){return!this.isBeginEqualsEnd()},getValues:function(g){var b=this.get("begins"),
d=this.get("ends"),f=this.get("method"),l=this.get("duration"),a=[],h=[],m,q;m=0;for(q=b.length;m<q;++m){var w=d[m]-b[m],x;if(l!=0){x=f(g,b[m],w,l);var B=g-1/this.get("fps");B<0&&(B=0);w=x-f(B,b[m],w,l)}else{x=d[m];w=w}a.push(x);h.push(w)}return{values:a,steps:h}},frame:function(g){var b=this.getValues(g);g=b.steps;b=b.values;for(var d=true,f=0,l=g.length;f<l;f++)if(g[f]!==0){d=false;break}d||this.qFxFrame(b,g)},qFxFrame:function(g,b){var d=this.get("callback");d&&d(g,b)}});c.CssFx=__MapNSImpl__.Class(c.Fx,
{initialize:function(g){g=g||{};g.items=g.items||[];g.duration=g.duration||0;g.fps=g.fps||60;g.method=g.method||c.Fx.linear;c.MVCObject.apply(this);this.setValues(g)},prepare:function(){for(var g=this.get("items"),b=[],d=[],f=0,l=g.length;f<l;++f){var a=g[f];b=b.concat(a.begins);d=d.concat(a.ends)}this.set("begins",b);this.set("ends",d);return!this.isBeginEqualsEnd()},qFxFrame:function(g){for(var b=this.get("items"),d=0,f=0,l=b.length;f<l;++f){var a=b[f],h=a.styles,m=a.units;a=a.element;for(var q=
0,w=h.length;q<w;++q){a.style[h[q]]=parseInt(g[d],10)+m[q];d++}}}});c.Fx.linear=function(g,b,d,f){return d*g/f+b};c.Fx.easeInQuad=function(g,b,d,f){return d*(g/=f)*g+b};c.Fx.easeOutQuad=function(g,b,d,f){return-d*(g/=f)*(g-2)+b};c.Fx.easeInOutQuad=function(g,b,d,f){return(g/=f/2)<1?d/2*g*g+b:-d/2*(--g*(g-2)-1)+b};c.Fx.easeInCubic=function(g,b,d,f){return d*Math.pow(g/f,3)+b};c.Fx.easeOutCubic=function(g,b,d,f){return d*(Math.pow(g/f-1,3)+1)+b};c.Fx.easeInQuart=function(g,b,d,f){return d*(g/=f)*g*
g*g+b};c.Fx.easeOutQuart=function(g,b,d,f){return-d*((g=g/f-1)*g*g*g-1)+b};c.Fx.easeInOutCubic=function(g,b,d,f){return(g/=f/2)<1?d/2*Math.pow(g,3)+b:d/2*(Math.pow(g-2,3)+2)+b};c.Fx.easeInSine=function(g,b,d,f){return d*(1-Math.cos(g/f*(Math.PI/2)))+b};c.Fx.easeOutSine=function(g,b,d,f){return d*Math.sin(g/f*(Math.PI/2))+b};c.Fx.easeInOutSine=function(g,b,d,f){return d/2*(1-Math.cos(Math.PI*g/f))+b};c.Fx.easeInExpo=function(g,b,d,f){return d*Math.pow(2,10*(g/f-1))+b};c.Fx.easeOutExpo=function(g,b,
d,f){return d*(-Math.pow(2,-10*g/f)+1)+b};c.Fx.easeInOutExpo=function(g,b,d,f){return(g/=f/2)<1?d/2*Math.pow(2,10*(g-1))+b:d/2*(-Math.pow(2,-10*--g)+2)+b};c.Fx.easeInCirc=function(g,b,d,f){return d*(1-Math.sqrt(1-(g/=f)*g))+b};c.Fx.easeOutCirc=function(g,b,d,f){return d*Math.sqrt(1-(g/=f-1)*g)+b};c.Fx.easeInOutCirc=function(g,b,d,f){return(g/=f/2)<1?d/2*(1-Math.sqrt(1-g*g))+b:d/2*(Math.sqrt(1-(g-=2)*g)+1)+b};c.Fx.easeInOutBack=function(g,b,d,f,l){if(l==undefined)l=2;if((g/=f/2)<1)return d/2*g*g*(((l*=
1.525)+1)*g-l)+b;return d/2*((g-=2)*g*(((l*=1.525)+1)*g+l)+2)+b};c.Fx.easeInBack=function(g,b,d,f,l){if(l==undefined)l=20;return d*(g/=f)*g*((l+1)*g-l)+b};c.Fx.easeOutBack=function(g,b,d,f,l){if(l==undefined)l=20;return d*((g=g/f-1)*g*((l+1)*g+l)+1)+b}})(__MapNS__);(function(c){function t(){if(!d)for(var e=0,n=null;n=B[e++];)if(n.isSupported&&n.isSupported()){d=n;break}return d}function p(e,n){this.shapes=new l;this.container=e;this.eventTarget=n||e;var s=this,y=[];m.addListener(this.shapes,"length_changed",function(){if(this.get("length")===0)s.disableEventListener(y);else y[0]||s.enableEventListener(y)})}function j(e){this.bridge=e;this._transformStack=[];this._flatness=3;this._lastY=this._lastX=0;this._arrY=this._arrX=null;this.isbegin=false}function u(){this.element=
this.transform=this.strokeLinecap=this.strokeLinejoin=this.strokeDashStyle=this.strokeWidth=this.strokeColor=this.fillColor=null}function i(){this.container=this.element=this.pathData=this._transform=null}function k(e){this.container=e;this.element=document.createElement("canvas");this.element.width=0;this.element.height=0;this.element.style.position="absolute";this.element.style.pointerEvents="none";this._canvas=this.element.getContext("2d");this._commands=null}function o(){this.element=this.pathData=
this.container=null}function g(e,n){this.x=e;this.y=n}function b(e,n,s){this.points=e||[];this.bounds=null;this.pointsNum=e.length;this.childSegs=null;this.width=Math.max(n,b.Config.minBufferWidth);this.index=s||0}var d=null,f=c.MVCObject,l=c.MVCArray,a=__MapNSImpl__.Synchronize,h=__MapNSImpl__.Util,m=c.Event,q=c.Color,w=c.Point,x=c.Bounds,B=[o,i,k],E={StrokeLinejoin:{DEFAULT:"round",ROUND:"round",BEVEL:"bevel",MITER:"miter"},StrokeLinecap:{DEFAULT:"butt",BUTT:"butt",FLAT:"flat",SQUARE:"square",ROUND:"round"}};
p.prototype={enableEventListener:function(){function e(H,I,M,U){var V=this;I=c.Event.addDomListener(I,M,function(){U.apply(V,arguments)});H.push(I)}function n(H,I){I=I||document.body;var M=h.getMouseCoordinate(H),U=h.getDomCoordinate(I);return new w(M[0]-U[0],M[1]-U[1])}function s(H,I){var M=null,U=null;I.forEach(function(V){var W=null;if(V.get("visible")&&V.bounds&&V.bounds.containsPoint(H)&&(W=V.isMouseIn(H))&&(!M||M.get("zIndex")<=V.get("zIndex"))){M=V;U=W}});if(M)if(U)M._mouseCoord=U;else delete M._mouseCoord;
return M}function y(){clearTimeout(P);P=null}function D(H){var I=this.container;if(O){var M=n(H,this.container);clearTimeout(P);H=m.fixEvent(H);P=setTimeout(function(){S(O,"mouseout",H,M);O=null;h.setCursorStyle(I.parentNode,"","auto")},0)}}function G(H){if(!(H.touches&&H.touches.length!==1)){L=true;R=false;var I=n(H,this.container),M=O||s(I,this.shapes);M&&S(M,"mousedown",H,I)}}function K(H){L=false;var I=n(H,this.container),M=O||s(I,this.shapes);if(M){S(M,"mouseup",H,I);if(!R){H=m.fixEvent(H);H.clickPoint=
I;H.clickShape=M;Q.push(H);if(!T&&Q.length===1)T=setTimeout(J,200)}}}function J(){var H=Q.shift(),I=Q.shift();H&&I?S(H.clickShape,"dblclick",H,H.clickPoint):S(H.clickShape,"click",H,H.clickPoint);if(Q[0])setTimeout(arguments.callee,200);else T=null}function N(H){if(L)R=true;var I=n(H,this.container),M=s(I,this.shapes);if(M){I=M._mouseCoord?new w(M._mouseCoord[0],M._mouseCoord[1]):I;H.__point__=I;if(M!==O){O&&S(O,"mouseout",H,I);S(M,"mouseover",H,I);O=M;h.setCursorStyle(this.container.parentNode,M.get("cursor"),
"auto")}S(M,"mousemove",H,I)}else if(O){M=O._mouseCoord?new w(O._mouseCoord[0],O._mouseCoord[1]):I;H.__point__=M;S(O,"mouseout",H,M);O=null;h.setCursorStyle(this.container.parentNode,"","auto")}}function S(H,I,M,U){U=H._mouseCoord||[U.x,U.y];m.trigger(H,I,[M,U])}var O=null,L=false,R=false,Q=[],T=null,P=null;return h.Browser().isSupportTouch?function(H){var I=this.eventTarget;e.call(this,H,I,"touchstart",G);e.call(this,H,I,"touchend",K)}:function(H){var I=this.eventTarget;e.call(this,H,I,"mousedown",
G);e.call(this,H,I,"click",K);e.call(this,H,I,"mousemove",N);e.call(this,H,I,"mouseout",D);e.call(this,H,I,"mouseover",y)}}(),disableEventListener:function(e){for(;e[0];)c.Event.removeListener(e.pop())},draw:function(e){var n=false;this.shapes.forEach(function(s){if(s===e){n=true;return false}});if(!n){this.shapes.push(e);e.get("canvas")!==this&&e.set("canvas",this)}},erase:function(e){if(e){var n=this.shapes,s=null;n.forEach(function(y,D){if(y===e){s=n.removeAt(D);return false}});s&&s.set("canvas",
null)}},clear:function(){for(var e=this.shapes,n=null;n=e.pop();)n.set("canvas",null)}};var A=__MapNSImpl__.Class(f,{initialize:function(){f.call(this);this.element=null;this.token=+new Date;var e=new (t());this.graphics=new j(e);var n=this,s=false;e.ready(function(){if(!s){s=true;G&&G()}});if(!s){var y=0,D=this.render,G=function(){if(s){n.render=D;G=D=null;if(y>0){n.render();y=0}}else y++};n.render=G}},getShape:function(){return this.element},setDefaultOptions:function(e){var n={fillColor:new q(255,
255,255,0.5),strokeColor:new q(23,145,252,1),strokeWidth:2,strokeDashStyle:"solid",strokeLinejoin:"round",strokeLinecap:"butt",zIndex:0,transform:null,visible:true,cursor:""};e=a.fill(e,n);this.setOptions(e)},changed:function(e){e==="viewbox_"||e==="cursor"||(e==="strokeWeight"?this.set("strokeWidth",this.get("strokeWeight")):this.render())},visible_changed:function(){var e=this.get("visible");if(this.element)this.element.style.display=e===false?"none":""},canvas_changed:function(){var e=this.get("canvas");
if(e){e.draw(this);this.render();this._canvas=e}else if(this.element){this.graphics.clear();this.element=null;if(this._canvas){this._canvas.erase(this);delete this._canvas}}},draw:function(){throw Error("subclasses must override the Shape.draw method");},isRender:function(){return true},isMouseIn:function(){return false},render:function(){var e=this.graphics,n=this.get("canvas");if(!(!e||!n||!this.isRender())){e.beginRender(n.container);if(n=this.get("fillColor")){var s=this.get("fillOpacity");if(typeof n===
"string")n=q.fromHex(n);if(typeof s==="number")n.alpha=s}if(s=this.get("strokeColor")){var y=this.get("strokeOpacity");if(typeof s==="string")s=q.fromHex(s);if(typeof y==="number")s.alpha=y}e.setFillColor(n);e.setStrokeColor(s);n=parseInt(this.get("strokeWidth"));e.setStrokeWidth(n);e.setStrokeDashStyle(this.get("strokeDashStyle"));e.setStrokeLinejoin(this.get("strokeLinejoin"));e.setStrokeLinecap(this.get("strokeLinecap"));this.draw(e);this.element=e.endRender(this.get("viewbox_"));this.notify("visible");
this.bounds=e.getBounds();if(this.element&&this.element.nodeType)this.element.style.zIndex=this.get("zIndex")}}}),r=__MapNSImpl__.Class(A,{type:"path",initialize:function(e,n){A.call(this);n=a.fill(n,{startArrow:null,endArrow:null});n.fillColor=null;n.points=e;var s=this;c.Event.addListener(this,"points_changed",function(){s._arrSegNode=null});this.setDefaultOptions(n)},getCacheSegs_:function(){var e=this._arrSegNode;if(!e){var n=this.get("points");if(n){e=[];for(var s=0,y=n.length;s<y;s++)e.push(new b(n[s],
this.get("strokeWidth")))}this._arrSegNode=e}return e},isMouseIn:function(e){if(this.get("canvas")){var n=this.getCacheSegs_();if(n){for(var s=null,y=0;y<n.length;y++)if(s=n[y].getPointOnLine(e))break;return s}}},startArrow_changed:function(){var e=this._sArrow,n=this.get("startArrow"),s=this.get("points");if(n&&s){s=s[0].slice(0,2);this._sArrow=e=this._drawArrow(e,s[0],s,n)}else if(e){this._eraseArrow(e);this._sArrow=null}},endArrow_changed:function(){var e=this._eArrow,n=this.get("endArrow"),s=
this.get("points");if(n&&s){var y=s.length,D=s[y-1].length;s=s[y-1].slice(D-2,D);this._eArrow=e=this._drawArrow(e,s[1],s,n)}else if(e){this._eraseArrow(e);this._eArrow=null}},_drawArrow:function(e,n,s,y){if(!e){e=new C(null,null,0);e.bindTo("visible",this);e.bindTo("canvas",this)}s=Math.atan2(s[1][0]-s[0][0],-s[1][1]- -s[0][1]);s=(s<0?Math.PI*2+s:s)*180/Math.PI;e.set("size",this.get("strokeWidth")*4);e.set("fillColor",this.get("strokeColor"));var D=this.get("strokeOpacity");D>=0&&e.set("fillOpacity",
D);e.set("style",y);e.set("angle",s);e.set("position",n);e.set("cursor",this.get("cursor"));return e},_eraseArrow:function(e){if(e){e.unbind("visible");e.unbind("canvas");e.set("canvas",null)}},draw:function(e){if(e){var n=this.get("points");if(n){for(var s=0,y=n.length;s<y;s++)for(var D=0,G=n[s],K=G.length;D<K;D++)e[!D?"movetoAbs":"linetoAbs"](G[D][0],G[D][1]);this.notify("startArrow");this.notify("endArrow")}}}}),v=__MapNSImpl__.Class(A,{type:"circle",initialize:function(e,n,s){A.call(this);s=s||
{};s.center=e;s.radius=n;this.setDefaultOptions(s)},isMouseIn:function(e){var n=this.get("center"),s=this.get("radius");if(!this.get("canvas")||!n||!s)return false;else{var y=e.x;e=e.y;return Math.sqrt(Math.pow(Math.abs(y-n[0]),2)+Math.pow(Math.abs(e-n[1]),2))<=s?[y,e]:false}},draw:function(e){if(e){var n=this.get("center"),s=this.get("radius");if(!n||!s)e.movetoAbs(0,0);else{var y=n[0]+s,D=n[0]-s;e.movetoAbs(D,n[1]);e.arcAbs(s,s,0,1,0,y,n[1]);e.arcAbs(s,s,0,1,0,D,n[1])}}}}),z=__MapNSImpl__.Class(A,
{type:"area",initialize:function(e,n){A.call(this);n=n||{};n.points=e;var s=this;c.Event.addListener(this,"points_changed",function(){s._segNode=null});this.setDefaultOptions(n)},getCacheSeg_:function(){var e=this._segNode;if(!e){var n=this.get("points");if(n){n=n[0];n.push([n[0][0],n[0][1]]);e=new b(n,this.get("strokeWidth"))}this._segNode=e}return e},isMouseIn:function(e){var n=this.get("points");if(!this.get("canvas")||!n)return false;else{n=n[0];for(var s=false,y=null,D=e.x,G=e.y,K=-1,J=n.length,
N=J-1;++K<J;N=K)(n[K][1]<=G&&G<n[N][1]||n[N][1]<=G&&G<n[K][1])&&D<(n[N][0]-n[K][0])*(G-n[K][1])/(n[N][1]-n[K][1])+n[K][0]&&(s=!s);if(!s&&this.type==="area")if(n=this.getCacheSeg_())y=n.getPointOnLine(e);return s?[D,G]:y||false}},draw:function(e){if(e){var n=this.get("points");if(n){for(var s=0,y=n.length;s<y;s++)for(var D=0,G=n[s],K=G.length;D<K;D++)e[!D?"movetoAbs":"linetoAbs"](G[D][0],G[D][1]);e.closePath()}}}}),C=__MapNSImpl__.Class(z,{type:"arrow",initialize:function(e,n,s,y){s={fillColor:new q(0,
0,255),size:16,strokeWidth:1,strokeColor:new q(255,255,255),zIndex:999,style:"Classic"};y=a.fill(y,s);y.position=e;y.angle=n;z.call(this,null,y)},angle_changed:function(){this.updatePoints()},position_changed:function(){this.updatePoints()},size_changed:function(){this.updatePoints()},style_changed:function(){this.updatePoints()},updatePoints:function(){var e=this.get("angle"),n=this.get("position"),s=Math.max(this.get("size"),14),y=this.get("style");y=y?y.toUpperCase():"CLASSIC";y=C.STYLES[y];var D=
[];if(n&&typeof e==="number"&&s&&y){e=e*Math.PI/180-Math.PI/2;var G=n[0],K=n[1];s=s/2;var J=G+Math.cos(e)-G,N=K+Math.sin(e)-K,S=Math.sqrt(Math.pow(J,2)+Math.pow(N,2));e=function(O,L,R,Q){var T=J/S,P=N/S;return[Math.floor(T*R+-P*Q+O),Math.floor(P*R+T*Q+L)]};for(G=0;G<y.length;G++)D.push(e(n[0],n[1],y[G][0]*s/5,y[G][1]*s/5))}this.set("points",D.length?[D]:null)},draw:function(e){if(e){var n=this.get("points");if(n){n=n[0];for(var s=0,y=n.length;s<y;s++)e[!s?"movetoAbs":"linetoAbs"](n[s][0],n[s][1]);
if(this.get("style").toUpperCase()==="OPEN"){if(n=this.get("fillColor")){s=this.get("fillOpacity");if(typeof n==="string")n=q.fromHex(n);if(typeof s==="number")n.alpha=s}e.setStrokeColor(n);e.setStrokeWidth(2);e.setFillColor(null)}else e.closePath()}else e.movetoAbs(0,0)}}});C.STYLES={CLASSIC:[[-6,0],[-10,5],[0,0],[-10,-5]],BLOCK:[[0,0],[-6,4],[-6,-4]],DIAMOND:[[4,0],[0,4],[-4,0],[0,-4]],OPEN:[[-5,4],[0,0],[-5,-4]]};j.prototype._hasMethod=function(e){return this.bridge!=null&&typeof this.bridge[e]===
"function"};j.prototype._invoke=function(e){if(this._hasMethod(e))if(arguments.length>2)throw Error("Graphics._invoke only supports one or two arguments");else return arguments.length==1?this.bridge[e]():this.bridge[e](arguments[1])};j.prototype.beginRender=function(e){if(!this.isbegin){this._lastY=this._lastX=0;this._arrX=[];this._arrY=[];this.isbegin=true;return this._invoke("beginRender",e)}};j.prototype.endRender=function(e){if(this.isbegin){this.isbegin=false;var n=null;if(this._arrX.length){n=
Math.min.apply(Math,this._arrX);var s=Math.max.apply(Math,this._arrX),y=Math.min.apply(Math,this._arrY),D=Math.max.apply(Math,this._arrY);n=new x([new w(n,y),new w(s,D)]);if(e)n=n.intersects(e);e=Math.max(20,this._strokeWidth);n.minX-=e;n.minY-=e;n.maxX+=e;n.maxY+=e}this._bounds=n;return this._invoke("endRender",this._bounds)}};j.prototype.clear=function(){this._invoke("clear")};j.prototype.getBounds=function(){return this._bounds};j.prototype.renderPathData=function(e){var n=this.bridge;if(n!=null)if(this._hasMethod("renderPathData"))n.renderPathData(e);
else{if(this._pathParser==null){this._pathParser=new PathParser;this._pathParser.setHandler(this)}this._pathParser.parseData(e)}};j.prototype.setFillColor=function(e){this._invoke("setFillColor",e)};j.prototype.setStrokeColor=function(e){this._invoke("setStrokeColor",e)};j.prototype.setStrokeWidth=function(e){this._invoke("setStrokeWidth",e);this._strokeWidth=e};j.prototype.setStrokeDashStyle=function(e){this._invoke("setStrokeDashStyle",e)};j.prototype.setStrokeLinejoin=function(e){this._invoke("setStrokeLinejoin",
e)};j.prototype.setStrokeLinecap=function(e){this._invoke("setStrokeLinecap",e)};j.prototype.arcAbs=function(e,n,s,y,D,G,K){var J=this.bridge;if(J!=null&&(this._lastX!=G||this._lastY!=K)){var N,S,O,L,R;if(e!=0||n!=0){var Q=(this._lastX-G)*0.5;L=(this._lastY-K)*0.5;O=s*Math.PI/180;R=Math.cos(O);var T=Math.sin(O);O=Q*R+L*T;Q=Q*-T+L*R;L=O*O;var P=Q*Q,H=L/(e*e)+P/(n*n);if(H>1){H=Math.sqrt(H);e*=H;n*=H}H=e*e;var I=n*n;P=H*P;L=I*L;H=H*I-P-L;P=H<1.0E-6?0:Math.sqrt(H/(P+L));if(y==D)P=-P;L=P*e*Q/n;P=P*-n*
O/e;N=L*R-P*T+(this._lastX+G)*0.5;S=L*T+P*R+(this._lastY+K)*0.5;T=new g(1,0);R=new g(O-L,Q-P);Q=new g(-O-L,-Q-P);O=T.angleBetween(R);L=R.angleBetween(Q);if(!D&&L>0)L-=360;else if(D&&L<0)L+=360;R=O+L}var M=function(Y){return new w(N+Math.cos(Y)*e,S+Math.sin(Y)*n)},U=function(Y,$){var aa=(Y+$)*0.5,Z=M(Y),ba=M(aa),ca=M($),da=g.fromPoints(Z,ba);Z=g.fromPoints(Z,ca);if(da.perpendicular(Z).length()>V){U(Y,aa);W.push(ba);U(aa,$)}else W.push(ba)},V=this._flatness;Q=Math.PI/180;T=O*Q;P=R*Q;var W=[];Q=M(T);
W.push(Q);U(T,P);T=M(P);W.push(T);if(this._hasMethod("arcTo"))J.arcTo(e,n,s,y,D,G,K);else if(s===0&&this._hasMethod("arcToByRect")){s=N-e;y=S-n;L=N+e;H=S+n;Q=Math.PI/180;T=O*Q;P=R*Q;Q=M(T);O=M(P);J.arcToByRect(D,s,y,L,H,Q.x,Q.y,O.x,O.y)}else if(this._hasMethod("quadraticCurveTo")){if(O!=R){s=L>0?1:-1;D=s*45;y=s*Math.floor(L/45);I=O*Math.PI/180;for(s=0;s<y;s++){T=(O+D)*Math.PI/180;H=e*Math.cos(I)+N;P=n*Math.sin(I)+S;Q=e*Math.cos(T)+N;L=n*Math.sin(T)+S;var X=(I+T)*0.5;I=e*Math.cos(X)+N;X=n*Math.sin(X)+
S;H=2*(I-0.25*H-0.25*Q);P=2*(X-0.25*P-0.25*L);J.quadraticCurveTo(H,P,Q,L);O+=D;I=T}if(O!=R){T=R*Math.PI/180;H=e*Math.cos(I)+N;P=n*Math.sin(I)+S;Q=e*Math.cos(T)+N;L=n*Math.sin(T)+S;X=(I+T)*0.5;I=e*Math.cos(X)+N;X=n*Math.sin(X)+S;H=2*(I-0.25*H-0.25*Q);P=2*(X-0.25*P-0.25*L);J.quadraticCurveTo(H,P,Q,L)}}}else if(this._hasMethod("lineTo")){s=0;for(D=W.length;s<D;s++)J.lineTo(W[s].x,W[s].y)}s=0;for(D=W.length;s<D;s++){this._arrX.push(W[s].x);this._arrY.push(W[s].y)}}this._lastX=G;this._lastY=K;this._lastCommand=
"A"};j.prototype.arcRel=function(e,n,s,y,D,G,K){this.arcAbs(e,n,s,y,D,this._lastX+G,this._lastY+K)};j.prototype.linetoAbs=function(e,n){this.bridge!=null&&this._hasMethod("lineTo")&&this.bridge.lineTo(e,n);this._lastX=e;this._lastY=n;this._lastCommand="L";this._arrX.push(e);this._arrY.push(n)};j.prototype.linetoRel=function(e,n){this.linetoAbs(this._lastX+e,this._lastY+n)};j.prototype.movetoAbs=function(e,n){this.bridge!=null&&this._hasMethod("moveTo")&&this.bridge.moveTo(e,n);this._firstX=e;this._firstY=
n;this._lastX=e;this._lastY=n;this._lastCommand="M";this._arrX.push(e);this._arrY.push(n)};j.prototype.movetoRel=function(e,n){this.movetoAbs(this._lastX+e,this._lastY+n)};j.prototype.closePath=function(){this._invoke("close");this._lastX=this._firstX;this._lastY=this._firstY;this._lastCommand="Z"};u.prototype={beginRender:function(){},endRender:function(){},moveTo:function(){},lineTo:function(){},close:function(){},clear:function(){},setFillColor:function(e){this.fillColor=e},setStrokeColor:function(e){this.strokeColor=
e},setStrokeWidth:function(e){this.strokeWidth=e},setStrokeDashStyle:function(e){this.strokeDashStyle=e},setStrokeLinejoin:function(e){e=!e?"":(e+"").toUpperCase();this.strokeLinejoin=E.StrokeLinejoin[e]||E.StrokeLinejoin.DEFAULT},setStrokeLinecap:function(e){e=!e?"":(e+"").toUpperCase();if(e==="BUTT"&&this.type==="vml")e="FLAT";else if(e==="FLAT"&&this.type!=="vml")e="BUTT";this.strokeLinecap=E.StrokeLinecap[e.toUpperCase()]||E.StrokeLinecap.DEFAULT},ready:function(e){e&&e()}};i.prototype=new u;
i.prototype.type="svg";i.svgns="http://www.w3.org/2000/svg";i.prototype._addCommand=function(e,n){if(!(e==="z"&&!this._lastCommand)){for(var s=[],y=e==this._lastCommand,D=this._lastCommand=="M"&&e=="L",G=0;G<n.length;G++)s[G]=n[G];y||D?this.pathData.push(s.join(",")):this.pathData.push(e+s.join(","));this._lastCommand=e}};i.prototype.beginRender=function(e){this.pathData=[];this.container=e;this._lastCommand=null};i.prototype._getViewboxByBounds=function(e){var n=[0,0,0,0];if(e&&!e.isEmpty()){n[0]=
Math.round(e.minX);n[1]=Math.round(e.minY);n[2]=Math.round(Math.abs(e.maxX-e.minX));n[3]=Math.round(Math.abs(e.maxY-e.minY))}return n};i.prototype.endRender=function(e){var n=this.pathData.join(" "),s=this.element,y=null;if(this.fillColor!=null||this.strokeColor!=null&&this.strokeWidth>0){if(!s){s=this.element=document.createElementNS(i.svgns,"svg");s.style.cssText="position:absolute;";s.setAttribute("version","1.1");s.setAttribute("baseProfile","full");s.setAttribute("pointer-events","none");y=document.createElementNS(i.svgns,
"path");y.setAttribute("pointer-events","auto");s._path=y}if(e){y=this._getViewboxByBounds(e);e=s.style;e.position="absolute";e.left=y[0]+"px";e.top=y[1]+"px";e.width=y[2]+"px";e.height=y[3]+"px";s.setAttribute("viewBox",y.join(" "))}y=s._path;y.setAttributeNS(null,"d",n||"M 0,0 0,0");if(this.fillColor!=null){if(this.fillColor instanceof q){n=this.fillColor.toHex();y.setAttributeNS(null,"fill-opacity",this.fillColor.alpha)}else n=this.fillColor;y.setAttributeNS(null,"fill",n)}else y.setAttributeNS(null,
"fill","none");if(this.strokeColor!=null&&this.strokeWidth>0){if(this.strokeColor instanceof q){n=this.strokeColor.toHex();y.setAttributeNS(null,"stroke-opacity",this.strokeColor.alpha)}else n=this.strokeColor;y.setAttributeNS(null,"stroke",n);n=parseInt(this.strokeWidth,10);y.setAttributeNS(null,"stroke-width",n);if(e=this.strokeDashStyle){if(e==="dash")e=n+","+n*2;y.setAttribute("stroke-dasharray",e)}}y.setAttribute("stroke-linejoin",this.strokeLinejoin);y.setAttribute("stroke-linecap",this.strokeLinecap);
if(this.transform!=null){n=this.transform.getTransformText();y.setAttributeNS(null,"transform",n)}y.parentNode||s.appendChild(y);this.container&&this.container.appendChild(s);return s}};i.prototype.arcTo=function(){this._addCommand("A",arguments)};i.prototype.curveTo=function(){this._addCommand("C",arguments)};i.prototype.lineTo=function(){this._addCommand("L",arguments)};i.prototype.moveTo=function(){this._addCommand("M",arguments)};i.prototype.quadraticCurveTo=function(){this._addCommand("Q",arguments)};
i.prototype.close=function(){this._addCommand("z",arguments)};i.prototype.clear=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};i.isSupported=function(){var e=false;if(document.createElementNS)e=document.createElementNS(i.svgns,"svg").x!=null;return e};k.prototype=new u;k.prototype.type="canvas";k.prototype.setStrokeDashStyle=function(e){this.strokeDashStyle=e;this.curveTo=this.quadraticCurveTo=false};k.prototype._addCommand=function(e,n){this._commands.push({command:e,
args:n})};k.prototype.beginRender=function(e){this.clear();this._canvas.beginPath();this._commands=[];this._dashIndex=0;if(e)this.container=e};k.prototype.endRender=function(e){if(this.fillColor!=null||this.strokeColor!=null&&this.strokeWidth>0){var n=this.element;if(e){var s=Math.abs(e.maxY-e.minY),y=e.minX,D=e.minY;n.width=Math.abs(e.maxX-e.minX);n.height=s;e=n.style;e.left=y+"px";e.top=D+"px"}if(this._commands){var G,K;e=[5,5];n=0;s=this._commands.length;for(var J;n<s;n++){J=this._commands[n];
switch(J.command){case "curveTo":J.args[5]-=D;J.args[4]-=y;case "quadraticCurveTo":J.args[3]-=D;J.args[2]-=y;case "lineTo":case "moveTo":J.args[1]-=D;J.args[0]-=y}if(this.strokeDashStyle==="dash"){var N=J.args[0],S=J.args[1];if(J.command==="lineTo"){J.command="dashedLine";J.args=[G,K,N,S,e]}G=N;K=S}this._canvas[J.command].apply(this._canvas,J.args)}}if(this.fillColor!=null){this._canvas.fillStyle=this.fillColor instanceof q?this.fillColor.toRGBA():this.fillColor;this._canvas.fill()}if(this.strokeColor!=
null&&this.strokeWidth>0){this._canvas.strokeStyle=this.strokeColor instanceof q?this.strokeColor.toRGBA():this.strokeColor;this._canvas.lineWidth=this.strokeWidth;this._canvas.lineCap=this.strokeLinecap;this._canvas.lineJoin=this.strokeLinejoin;this._canvas.stroke()}this.container&&this.container.appendChild(this.element)}return this.element};k.prototype.lineTo=function(e,n){this._addCommand("lineTo",[e,n])};k.prototype.moveTo=function(e,n){this._addCommand("moveTo",[e,n])};k.prototype.curveTo=function(e,
n,s,y,D,G){this._addCommand("bezierCurveTo",[e,n,s,y,D,G])};k.prototype.quadraticCurveTo=function(e,n,s,y){this._addCommand("quadraticCurveTo",[e,n,s,y])};k.prototype.close=function(){this._addCommand("closePath")};k.prototype.clear=function(){if(this.element){this._canvas.clearRect(0,0,this.element.width,this.element.height);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}if(this._command)this._command=[]};k.isSupported=function(){var e=document.createElement("canvas"),
n=false;if(e.getContext!=null)n=e.getContext("2d")!=null;return n};var F=window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype;if(F&&F.lineTo)F.dashedLine=function(e,n,s,y,D){D||(D=[5,5]);var G=D.length;s=s-e;y=y-n;var K=Math.abs(s)>Math.abs(y),J=K?y/s:s/y;this.moveTo(e,n);for(var N=Math.sqrt(s*s+y*y),S=0;N>=0.1;){var O=Math.min(N,D[S%G]),L=Math.sqrt(O*O/(1+J*J));if(K){if(s<0)L=-L;e+=L;n+=J*L}else{if(y<0)L=-L;e+=J*L;n+=L}this[S%2==0?"lineTo":"moveTo"](e,n);N-=O;S++}};o.prototype=new u;
o.prototype.type="vml";o.prototype.beginRender=function(e){this.pathData=[];if(e)this.container=e};o.prototype.endRender=function(){if(this.fillColor!=null||this.strokeColor!=null&&this.strokeWidth>0){var e=this.element,n=null,s=null;if(!e){this.container.insertAdjacentHTML("beforeEnd",'<v:shape style="width:1px;height:1px;position:absolute;display:inline-block;"><v:stroke></v:stroke><v:fill></v:fill></v:shape>');e=this.element=this.container.lastChild;e.coordsize="1 1"}s=e.firstChild;n=e.lastChild;
if(this.fillColor!=null){e.filled=true;if(this.fillColor instanceof q){n.color=this.fillColor.toHex();n.opacity=this.fillColor.alpha}else{n.color=this.fillColor;n.opacity=1}}else e.filled=false;if(this.strokeColor!=null&&this.strokeWidth>0){if(this.strokeColor instanceof q){s.color=this.strokeColor.toHex();s.opacity=this.strokeColor.alpha}else{s.color=this.strokeColor;s.opacity=1}n=parseInt(this.strokeWidth,10);s.weight=n+"px";if(n=this.strokeDashStyle){if(n==="dash")n="1,1";s.dashstyle=n}}else s.setAttribute("on",
false);s.joinstyle=this.strokeLinejoin;s.endcap=this.strokeLinecap;e.path=this.pathData.join(" ")||"m0,0";if(this.container&&(!e.parentNode||e.parentNode!==this.container))this.container.appendChild(e);return e}};o.prototype.curveTo=function(e,n,s,y,D,G){e=Math.round(e);n=Math.round(n);s=Math.round(s);y=Math.round(y);D=Math.round(D);G=Math.round(G);this.pathData.push("c"+[e,n,s,y,D,G].join(","))};o.prototype.lineTo=function(e,n){e=Math.round(e);n=Math.round(n);this.pathData.push("l"+e+","+n)};o.prototype.moveTo=
function(e,n){e=Math.round(e);n=Math.round(n);this.pathData.push("m"+e+","+n)};o.prototype.arcToByRect=function(e,n,s,y,D,G,K,J,N){e=e===0?"at ":"wr ";n=Math.round(n);s=Math.round(s);y=Math.round(y);D=Math.round(D);G=Math.round(G);K=Math.round(K);J=Math.round(J);N=Math.round(N);this.pathData.push(e+[n,s,y,D,G,K,J,N].join(","))};o.prototype.close=function(){this.pathData.push("x")};o.prototype.clear=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};
o.prototype.ready=function(e){if(o.initialized!==true)(o._queue||(o._queue=[])).push(function(n){return function(){n()}}(e));if(o.initialized!=="loading"){o.initialized="loading";(function(){try{document.namespaces.v||document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");o.initialized=true;delete o.prototype.ready;for(var n=o._queue,s=null;s=n.shift();)s();delete o._queue}catch(y){setTimeout(arguments.callee,100)}})()}};o.isSupported=function(){var e=navigator.appVersion.match(/MSIE (\d\.\d)/);
return e&&e[1]>=6};g.prototype.angleBetween=function(e){var n=Math.acos((this.x*e.x+this.y*e.y)/(Math.sqrt(this.x*this.x+this.y*this.y)*Math.sqrt(e.x*e.x+e.y*e.y)));if(this.x*e.y-e.x*this.y<0)n=-n;return 180*n/Math.PI};g.prototype.dot=function(e){return this.x*e.x+this.y*e.y};g.prototype.perpendicular=function(e){e=this.project(e);e.x=this.x-e.x;e.y=this.y-e.y;return e};g.prototype.project=function(e){var n=e.dot(this)/e.dot(e);return e.scale(n)};g.prototype.scale=function(e){return new g(this.x*
e,this.y*e)};g.prototype.isZeroVector=function(){return this.x==0&&this.y==0};g.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};g.fromPoints=function(e,n){return new g(n.x-e.x,n.y-e.y)};b.Config={maxChildPoints:10,minBufferWidth:10};b.prototype={getBounds:function(){if(this.bounds)return this.bounds;else if(this.points){for(var e=[],n=[],s=this.pointsNum;s--;){e.push(this.points[s][0]);n.push(this.points[s][1])}s=Math.min.apply(Math,e)-this.width;var y=Math.min.apply(Math,
n)-this.width;e=Math.max.apply(Math,e)+this.width;n=Math.max.apply(Math,n)+this.width;return this.bounds=new c.Bounds([new w(s,y),new w(e,n)])}},getChildSegs:function(){if(this.childSegs)return this.childSegs;else if(this.pointsNum>b.Config.maxChildPoints){var e=parseInt(this.pointsNum/2);return this.childSegs=[new b(this.points.slice(0,e),this.width,this.index),new b(this.points.slice(e-1,this.pointsNum),this.width,this.index+e-1)]}},getPointOnLine:function(e){var n=this.getBounds(),s=null;if(n&&
n.containsPoint(e))if(n=this.getChildSegs())for(var y=0;y<2;y++){if(s=n[y].getPointOnLine(e))break}else{s=this.points;var D=[e.x,e.y];e=Number.MAX_VALUE;var G,K,J,N,S,O,L,R;n=D[0];D=D[1];for(var Q=1,T=s.length;Q<T;Q++){J=s[Q-1];N=s[Q];if(J&&N){S=J[0];O=J[1];L=N[0];R=N[1];if(J[0]!==N[0]){J=(R-O)/(L-S);N=R-J*L;J=Math.abs(J*n+N-D)/Math.sqrt(J*J+1)}else J=Math.abs(n-L);N=Math.pow(R-O,2)+Math.pow(L-S,2);L=Math.pow(R-D,2)+Math.pow(L-n,2);S=Math.pow(O-D,2)+Math.pow(S-n,2);O=Math.pow(J,2);R=L-O+S-O;if(R>
N)J=Math.sqrt(Math.min(L,S));if(e===null||e>J){K=Math.sqrt(S-O)/Math.sqrt(N);G=Math.sqrt(L-O)/Math.sqrt(N);e=J;y=Q}e=Math.min(e,J)}}if(e<=this.width){if(K>1)K=1;if(G>1)K=0;e=s[y-1][1]-s[y][1];G=s[y-1][0]-(s[y-1][0]-s[y][0])*K;K=s[y-1][1]-e*K;s=[G,K,y-1]}else s=void 0;if(s)s[2]+=this.index}return s}};c.Canvas=p;c.CanvasShape=A;c.CanvasPolyline=r;c.CanvasCircle=v;c.CanvasPolygon=z;c.CanvasArrow=C})(__MapNS__);(function(c){var t=c.Event;c.Copyright=function(p,j,u){this.text=p;this.bounds=j;this.minZoom=u};c.CopyrightCollection=__MapNSImpl__.Class({initialize:function(p){this.cpcol=[];this.prefix=p},addCopyright:function(p){this.cpcol.push(p);t.trigger(this,"newcopyright",[p])},getCopyrights:function(p,j){for(var u=[],i,k=0;k<this.cpcol.length;k++){i=this.cpcol[k];j>=i.minZoom&&i.bounds.intersects(p)&&u.push(this.cpcol[k].text)}return u},getCopyrightNotice:function(p,j){var u=this.getCopyrights(p,j);if(u.length===
0)return null;return(typeof this.prefix==="string"?this.prefix+" ":"")+u.join(", ")}})})(__MapNS__);(function(c){var t=__MapNSImpl__.Util;c.Lng=__MapNSImpl__.Class({initialize:function(p,j){if(p==-180&&j!=180)p=180;if(j==-180&&p!=180)j=180;this.minX=p;this.maxX=j},isEmpty:function(){return this.minX-this.maxX==360},intersects:function(p){var j=this.minX,u=this.maxX;if(this.isEmpty()||p.isEmpty())return false;if(j>u)return p.minX>p.maxX||p.minX<=u||p.maxX>=j;else{if(p.minX>p.maxX)return p.minX<=u||p.maxX>=j;return p.minX<=u&&p.maxX>=j}},contains:function(p){if(p==-180)p=180;var j=this.minX,u=this.maxX;
return this.minX>this.maxX?(p>=j||p<=u)&&!this.isEmpty():p>=j&&p<=u},extend:function(p){if(!this.contains(p))if(this.isEmpty())this.minX=this.maxX=p;else if(this.distance(p,this.minX)<this.distance(this.maxX,p))this.minX=p;else this.maxX=p},equals:function(p){if(this.isEmpty())return p.isEmpty();return Math.abs(p.minX-this.minX)%360+Math.abs(p.maxX-this.maxX)%360<=1.0E-9},distance:function(p,j){var u=j-p;if(u>=0)return u;return j+180-(p-180)},center:function(){var p=(this.minX+this.maxX)/2;if(this.minX>
this.maxX)p=t.getLoopNumber(p,-180,180);return p}})})(__MapNS__);(function(c){c.Lat=__MapNSImpl__.Class({initialize:function(t,p){this.minY=t;this.maxY=p},isEmpty:function(){return this.minY>this.maxY},intersects:function(t){var p=this.minY,j=this.maxY;return p<=t.minY?t.minY<=j&&t.minY<=t.maxY:p<=t.maxY&&p<=j},contains:function(t){return t>=this.minY&&t<=this.maxY},extend:function(t){if(this.isEmpty())this.maxY=this.minY=t;else if(t<this.minY)this.minY=t;else if(t>this.maxY)this.maxY=t},equals:function(t){if(this.isEmpty())return t.isEmpty();return Math.abs(t.minY-
this.minY)+Math.abs(this.maxY-t.maxY)<=1.0E-9},center:function(){return(this.maxY+this.minY)/2}})})(__MapNS__);(function(c){var t=__MapNSImpl__.Util;__MapNSImpl__.Interfaces.registInterface("LatLng",["getLng","getLat","equals","toUrlValue"]);c.LatLng=__MapNSImpl__.Class({initialize:function(p,j,u){p-=0;j-=0;if(!u){p=t.getNumberInRange(p,-90,90);j=t.getLoopNumber(j,-180,180)}this.lng=j;this.lat=p},getLng:function(){return this.lng},getLat:function(){return this.lat},equals:function(p){if(!p)return false;return t.isEquals(this.getLat(),p.getLat())&&t.isEquals(this.getLng(),p.getLng())},getDistanceTo:function(p){var j=
function(k){return Math.PI/180*k},u=j(p.getLat()-this.getLat()),i=j(p.getLng()-this.getLng());p=Math.sin(u/2)*Math.sin(u/2)+Math.cos(j(this.getLat()))*Math.cos(j(p.getLat()))*Math.sin(i/2)*Math.sin(i/2);return 6378137*2*Math.asin(Math.min(1,Math.sqrt(p)))},toUrlValue:function(p){p=p||6;return this.getLat().toFixed(p)+","+this.getLng().toFixed(p)},toString:function(){return this.getLat()+", "+this.getLng()}})})(__MapNS__);(function(c){var t=c.LatLng,p=c.Lng,j=c.Lat,u=__MapNSImpl__.Util;c.LatLngBounds=__MapNSImpl__.Class({initialize:function(i,k){if(i&&!k)k=i;if(i){var o=u.getNumberInRange(i.getLat(),-90,90),g=u.getNumberInRange(k.getLat(),-90,90);this.lat=new j(o,g);o=i.getLng();g=k.getLng();if(g-o>=360)this.lng=new p(-180,180);else{o=u.getLoopNumber(o,-180,180);g=u.getLoopNumber(g,-180,180);this.lng=new p(o,g)}}else{this.lat=new j(1,-1);this.lng=new p(180,-180)}},getCenter:function(){return new t(this.lat.center(),
this.lng.center())},getNorthEast:function(){return new t(this.lat.maxY,this.lng.maxX,true)},getSouthWest:function(){return new t(this.lat.minY,this.lng.minX,true)},intersects:function(i){return this.lat.intersects(i.lat)&&this.lng.intersects(i.lng)},union:function(i){if(!i.isEmpty()){this.extend(i.getNorthEast());this.extend(i.getSouthWest());return this}},equals:function(i){if(!i)return false;return this.lat.equals(i.lat)&&this.lng.equals(i.lng)},contains:function(i){return this.lat.contains(i.getLat())&&
this.lng.contains(i.getLng())},isEmpty:function(){return this.lat.isEmpty()||this.lng.isEmpty()},extend:function(i){if(this.isEmpty()){var k=i.getLat();i=i.getLng();this.lat=new j(k,k);this.lng=new p(i,i)}else{this.lat.extend(i.getLat());this.lng.extend(i.getLng());return this}},toString:function(){return this.getSouthWest()+", "+this.getNorthEast()}})})(__MapNS__);(function(c){c.LatLngCircles=__MapNSImpl__.Class({initialize:function(t,p){this.private_={center:null,radius:null};this.private_.center=t;this.private_.radius=p},getCenter:function(){return this.private_.center},getRadius:function(){return this.private_.radius}})})(__MapNS__);(function(c){var t=__MapNSImpl__.Synchronize,p=__MapNSImpl__.Config,j=c.Size,u=c.MVCObject,i=u.checkers;c.MapType=__MapNSImpl__.Class({initialize:function(k){var o={name:"",layers:null,projection:new c.Projection,alt:"",maxZoom:p.zoomMax,minZoom:p.zoomMin,radius:6378137,tileSize:new j(256,256),system:false,fullLoad:true};k=t.fill(k,o);this.layers=k.layers;this.projection=k.projection;this.name=k.name;this.alt=k.alt;this.minZoom=k.minZoom;this.maxZoom=k.maxZoom;this.tileSize=k.tileSize;this.radius=
k.radius;this.fullLoad=k.fullLoad;this.system=k.system},getCopyrights:function(k,o){var g=this.layers,b="",d,f;for(f=g.length;f--;)if((d=g[f].getCopyright(k,o))&&b.indexOf(d)===-1)b+=b===""?d:" "+d;return b}});c.MapTypeId={ROADMAP:"roadmap",HYBRID:"hybrid",SATELLITE:"satellite"};c.MapTypeRegistry=__MapNSImpl__.Class(u,{initialize:function(){u.apply(this)},set:function(k,o){if(o!=null&&!(o&&i.isNumber(o.maxZoom)&&o.tileSize&&o.tileSize.width&&o.tileSize.height))throw Error("\u5b9e\u73b0 soso.maps.MapType \u6240\u9700\u7684\u503c");
return u.prototype.set.apply(this,arguments)}})})(__MapNS__);(function(c){function t(g){return g&&g.width&&g.height?g:typeof g==="number"?new k(g,g):new k(i.DEFAULT_TILE_SIZE,i.DEFAULT_TILE_SIZE)}function p(g,b,d){var f=o,l;l=g.width;b=b;if(b<0){b=b%l;b=b!==0?l+b:0}else b=b>=l?b%l:b;l=b;g=g.height;d=d;if(d<0){d=d%g;d=d!==0?g+d:0}else d=d>=g?d%g:d;return new f(l,d)}function j(g,b,d){g=1<<g;return p(new k(g,g),b,d)}var u=c.LatLng,i=__MapNSImpl__.Config,k=c.Size,o=c.Point;c.Projection=__MapNSImpl__.Class({initialize:function(){},fromPointToLatLng:function(g,b,
d,f){var l=t(f);f=Math.PI*i.EARTH_RADIUS;var a=Math.pow(2,Math.floor(b));b=a+(a*2-a)*(b%1);a=f*2;a={x:a/l.width/b,y:a/l.height/b};d||(g=p(new k(b*l.width,b*l.height),g.x,g.y));l=g.x*a.x-f;b=g.y*a.y-f;b=-b;g=l/f*180;f=b/f*180;f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2);return new u(f,g,d)},fromLatLngToPoint:function(g,b,d){d=t(d);var f=Math.sin(g.lat*Math.PI/180);return new o((g.lng+180)/360*d.width*Math.pow(2,b),(0.5-Math.log((1+f)/(1-f))/(4*Math.PI))*d.height*Math.pow(2,b))},fromLatLngToTile:function(g,
b,d){d=t(d);g=this.fromLatLngToPoint(g,b,d);return j(b,Math.floor(g.x/d.width),Math.floor(g.y/d.height),d)},fromTileToLatLng:function(g,b,d){d=t(d);g=j(b,g.x,g.y,d);return this.fromPointToLatLng(new o(g.x*d.width,g.y*d.height),b,false,d)}})})(__MapNS__);(function(c){function t(u,i,k,o){var g=u.get("projection"),b=u.get("width")/2,d=u.get("height")/2;k=k||u.get("center");u=u.get("zoom");b=i.getX()-b;i=i.getY()-d;d=g.fromLatLngToPoint(k,u);return g.fromPointToLatLng(new j(d.x+b,d.y+i),u,o)}function p(u,i,k){var o=u.get("projection"),g=u.get("width")/2,b=u.get("height")/2;k=k||u.get("center");u=u.get("zoom");i=o.fromLatLngToPoint(i,u);k=o.fromLatLngToPoint(k,u);o=i.getX()-k.getX();i=i.getY()-k.getY();return new j(g+o,b+i)}var j=c.Point;c.MapCanvasProjection=
__MapNSImpl__.Class(c.MVCObject,{initialize:function(){c.MVCObject.apply(this)},fromContainerPixelToLatLng:function(u,i){return t(this,u,null,i)},fromLatLngToContainerPixel:function(u){return p(this,u)},fromDivPixelToLatLng:function(u){var i=this.get("origin");return t(this,u,i)},fromLatLngToDivPixel:function(u){var i=this.get("origin");return p(this,u,i)}})})(__MapNS__);(function(c){var t=__MapNSImpl__.Synchronize;c.Overlay=__MapNSImpl__.Class(c.MVCView,{initialize:function(p){c.MVCObject.apply(this);p=t.fill(p,{noClip:true,smoothFactor:1});this.setOptions(p)},getPanes:function(){return this.get("mapPane_")?{mapPane:this.get("mapPane_"),overlayLayer:this.get("overlayLayer_"),overlayShadow:this.get("overlayShadow_"),overlayImage:this.get("overlayImage_"),floatShadow:this.get("floatShadow_"),overlayMouseTarget:this.get("overlayMouseTarget_"),floatPane:this.get("floatPane_"),
canvas:this.get("canvas_")}:null},draw:function(){},setMap:function(p){this.set("map",p)},getMap:function(){return this.get("map")},getProjection:function(){var p=this.get("map");return p&&p.get("mapCanvasProjection_")},construct:function(){},destroy:function(){},map_changed:function(){var p=this.get("map"),j=["viewbox_","originPosition_","mapPane_","overlayLayer_","overlayShadow_","canvas_","overlayImage_","floatShadow_","overlayMouseTarget_","floatPane_","overlayRedraw_","layerRedraw_","mapCanvasProjection_"];
if(p)this.bindsTo(j,p);else{this.destroy();this.set("constructed_",false);this.unbindAll(j)}},overlayRedraw__changed:function(){if(this.get("originPosition_")){if(!this.get("constructed_")){this.construct();this.set("constructed_",true)}this.draw()}},layerRedraw__changed:function(){this.set("originalPoints_",null)}})})(__MapNS__);(function(c){var t=c.MVCObject.checkers,p=__MapNSImpl__.Interfaces,j=__MapNSImpl__.Util,u=__MapNSImpl__.Synchronize;c.Control=__MapNSImpl__.Class(c.MVCObject,{initialize:function(i){c.MVCObject.apply(this);var k={content:"",margin:new c.Size(0,0),align:0,visible:true,zIndex:0};i=u.fill(i,k);k=i.map;i.map=null;this.setOptions(i);k&&this.set("map",k)},controlContainer__changed:function(){var i=this.get("controlContainer_");if(i){var k=document.createElement("div");k.style.cssText="position:absolute;z-index:"+
this.get("zIndex")+";";i.appendChild(k);this.set("container_",k)}},changed:function(i){if(i==="align"||i==="margin"||i==="style"||i==="viewWidth_"||i==="viewHeight_"||i==="content")this.redraw();if(i==="visible"&&this.get("container_"))if(this.get(i))this.get("container_").style.display="";else this.get("container_").style.display="none"},redraw:function(){var i=this.get("container_");j.setPositionByAlign(i,this.get("align"),this.get("margin"));this.draw&&this.draw()},content_changed:function(){this.notify("container_")},
container__changed:function(){var i=this.get("content"),k=this.get("container_");if(i&&k){if(typeof i==="string")k.innerHTML=i;else if(i.parentNode!=k){k.innerHTML="";k.appendChild(i)}this.redraw()}k&&this.notify("visible")},map_changed:function(){var i=this.get("map");if(i){this.bindTo("controlContainer_",i,"mapContainer_");this.bindTo("viewWidth_",i);this.bindTo("viewHeight_",i);this.construct&&this.construct()}else{i=this.get("controlContainer_");var k=this.get("container_");i&&k&&i.removeChild(k);
this.destroy&&this.destroy();this.unbind("controlContainer_");this.unbind("viewWidth_");this.unbind("viewHeight_")}}});t={content:null,margin:t.checkInterface(p.Size),align:t.isNumber,zIndex:t.isNumber,visible:t.isBoolean,map:null};c.MVCObject.publicProperties(c.Control,t)})(__MapNS__);(function(c){var t=__MapNSImpl__.Util,p=__MapNSImpl__.Config,j=c.LatLng,u=c.MVCObject,i=c.LatLngBounds;c.BaseService=__MapNSImpl__.Class(u,{initialize:function(){this.queryType="";u.apply(this)},send:function(k,o){var g=p.SERVICE_URL;if(this.queryType==="geoc"||this.queryType==="rgeoc")g=g+this.queryType+"/?"+k.join("&")+"&output=jsonp&fr=mapapi";else{k.push("qt="+this.queryType);g=g+"?"+k.join("&")+"&output=jsonp&fr=mapapi"}var b=c.ObjectLoader.get();c.Event.bind(b,"loaded",this,function(){return function(d){this.onResult({object:d,
request:o.request,callback:o.callback})}}.call(this));b.request(g)},fromProjectionToLatLng:function(k,o){var g=t.latFromProjectionTo4326(o),b=t.lngFromProjectionTo4326(k);return new j(g,b)},fromSegmentToPath:function(k){k=k.split(";");for(var o=[],g=new i,b=0,d=k.length;b<d;b++){var f=k[b].split(",");f=new j(f[1],f[0]);o.push(f);g.extend(f)}return{path:o,bounds:g}},fromDestToPoi:function(k){var o=new c.Poi;o.id=k.uid;o.name=k.query||k.name;o.latLng=new j(k.pointy,k.pointx);o.type=k.poitype;o.address=
k.addr||"";return o},fromDestToString:function(k){var o=[];if(!checkers.isNull(k)){checkers.isInstanceOf(j)(k)&&(o.push(1),o.push(""),o.push(k.getLng()+","+k.getLat()),o.push(""));checkers.isString(k)&&(o.push(2),o.push(""),o.push(""),o.push(encodeURIComponent(k)));checkers.isInstanceOf(c.Poi)(k)&&(o.push(1),o.push(""),o.push(k.latLng.getLng()+","+k.latLng.getLat()),o.push(encodeURIComponent(k.name)))}return o.join("$$")},fromDistToString:function(k){var o="";if(k>0&&k<=10)o=k+__MapNSImpl__.RC.Units.m;
else if(k>10)o=k<1E3?(k/10).toFixed(1)*10+__MapNSImpl__.RC.Units.m:(k/1E3).toFixed(1)+__MapNSImpl__.RC.Units.km;return o},fromTimeToString:function(k){var o="";if(k>0&&k<60)o=k+__MapNSImpl__.RC.Units.min;else if(k>60)o=Math.floor(k/60)+__MapNSImpl__.RC.Units.hour+this.fromTimeToString(k-Math.floor(k/60)*60);return o}});c.Poi=function(){};c.Distance=function(){this.text="";this.value=0};c.Duration=function(){this.text="";this.value=0};c.Turning=function(){this.text="";this.latLng=null};c.Region=function(){};
c.PoiType={NORMAL:0,BUS_STATION:1,SUBWAY_STATION:2,BUS_LINE:3,DISTRICT:4,DOCK:"DOCK"}})(__MapNS__);(function(c){var t=c.MVCObject.checkers,p=c.MVCObject,j=c.Event,u=__MapNSImpl__.Synchronize;c.Paging=__MapNSImpl__.Class(p,{initialize:function(i){p.apply(this);i=u.fill(i,{pageIndex:1,pageSize:3,totalRows:10,data:{},container:null});this.setOptions(i)},pageUndate:function(i){for(var k=Math.ceil(this.get("totalRows")/this.get("pageSize")),o=this.get("panel");this.get("panel").hasChildNodes();){j.clearListeners(o.firstChild,"click");o.removeChild(o.firstChild)}i>1&&this.addNewAnchor("\u4e0a\u4e00\u9875",
3);if(k<=5)for(o=1;o<=k;o++)i==o?this.addNewAnchor("["+o+"]"):this.addNewAnchor(o);else{if(i<=3){for(o=1;o<i;o++)this.addNewAnchor(" "+o+"");this.addNewAnchor("["+i+"]");for(o=i+1;o<=5;o++)this.addNewAnchor(" "+o+"");this.addNewAnchor("\u5c3e\u9875",2)}if(i>3&&i<=k-3){this.addNewAnchor("\u9996\u9875",1);this.addNewAnchor(" "+(i-2)+"");this.addNewAnchor(" "+(i-1)+"");this.addNewAnchor(" ["+i+"]");this.addNewAnchor(" "+(i+1)+"");this.addNewAnchor(" "+(i+2)+"");this.addNewAnchor("\u5c3e\u9875",2)}if(i>
k-3){this.addNewAnchor("\u9996\u9875",1);for(o=k-4;o<i;o++)this.addNewAnchor(" "+o+"");this.addNewAnchor("["+i+"]");for(o=i+1;o<=k;o++)this.addNewAnchor(" "+o+"")}}i<k&&this.addNewAnchor("\u4e0b\u4e00\u9875",4)},getPageIndexByPageText:function(i){var k,o=i.innerHTML;this.get("pageIndex")==undefined&&this.set("pageIndex",0);if(i.specialIndex)switch(i.specialIndex){case 1:k=1;break;case 2:k=Math.ceil(this.get("totalRows")/this.get("pageSize"));break;case 3:k=parseInt(this.get("pageIndex"));break;case 4:k=
parseInt(this.get("pageIndex"))+2}else if(o||o>-1)k=parseInt(o.match(/\d+/g)[0]);return k},addNewAnchor:function(i,k){var o=document.createElement("a");o.innerHTML=" "+i+" ";o.href="javascript:void(0);";o.style.textDecoration="none";k&&(o.specialIndex=k);var g=this;j.addDomListener(o,"click",function(b){j.preventDefault(b);g.set("pageIndex",g.getPageIndexByPageText(this)-1);g.set("pageTarget",true)});this.get("panel").appendChild(o)}});p.publicProperties(c.Paging,{pageIndex:t.isNumber,pageSize:t.isNumber,
totalRows:t.isNumber,panel:t.isHtmlControlOrNull})})(__MapNS__);(function(c){function t(){this.HEADER=document.getElementsByTagName("head")[0]}var p=__MapNSImpl__.Util,j=c.Event,u=__MapNSImpl__.Synchronize,i=0;t.prototype.request=function(k,o){o=u.fill(o,{jsonp:true,objName:"OLR",charset:"gbk"});this.objName=o.objName;this.charset=o.charset;if(o.jsonp){this.callback="cb"+((new Date).getTime()+i++).toString(36);k+="&cb="+this.callback;this.objName=o.objName+this.callback;var g=this;window[this.callback]=function(b){window[g.objName]=b}}k+="&t="+(new Date).getTime();
if(!this.jsFile){this.jsFile=document.createElement("script");this.jsFile.setAttribute("type","text/javascript");this.jsFile.setAttribute("charset",this.charset);this.jsFile.src=k;this.HEADER.appendChild(this.jsFile);if(p.Browser().ie&&p.Browser().ie<9){j.bindDom(this.jsFile,"readystatechange",this,p.callback(this,this.onReadyStateChange,[this.callback]));this.fixIeOnError(k)}else{j.bindDom(this.jsFile,"load",this,p.callback(this,this.onLoad,[this.callback]));j.bindDom(this.jsFile,"error",this,this.onError)}window.opera&&
this.fixOperaOnError(k)}this.running=true};t.prototype.onLoad=function(k){var o;if(window[this.objName])o=window[this.objName];o?j.trigger(this,"loaded",[o]):j.trigger(this,"error",[]);try{window[k]&&delete window[k];window[this.objName]&&delete window[this.objName]}catch(g){}this.remove()};t.prototype.onError=function(){j.trigger(this,"error",[]);this.remove()};t.prototype.onReadyStateChange=function(k){this.jsFile&&/loaded|complete/.test(this.jsFile.readyState)&&this.onLoad(k)};t.get=function(){var k,
o;if(!t.objects)t.objects=[];o=t.objects;for(var g=0,b=o.length;g<b;g++)if(o[g].running===false){k=o[g];j.clearListeners(k);o.splice(g,b-g);break}if(!k){k=new t;t.objects.push(k);return k}k.running=true;return k};t.prototype.remove=function(){if(this.jsFile){this.jsFile.removeAttribute("src");this.jsFile.parentNode.removeChild(this.jsFile);this.running=false;delete this.jsFile}};t.prototype.fixOperaOnError=function(k){k='<script src="'+k+'" '+(document.dispatchEvent?"onload":"onreadystatechange")+
'="this.ownerDocument.z = 1"><\/script>';var o=document.createElement("iframe");o.style.display="none";this.HEADER.appendChild(o);var g=o.contentDocument,b=this;o.onload=function(){g.z!=1&&b.onError();o.onload=null;this.HEADER.removeChild(this)};try{g.write(k);g.close()}catch(d){}};t.prototype.fixIeOnError=function(){var k=this;setTimeout(function(){k.onError()},3E3)};c.ObjectLoader=t})(__MapNS__);(function(c){var t=__MapNSImpl__.Config,p=c.MVCObject,j=c.MVCView,u=c.Size,i=c.LatLngBounds,k=c.LatLng,o=p.checkers,g=__MapNSImpl__.RC.TileLayer,b=__MapNSImpl__.Synchronize;o.isTileGridLayer=function(f){if(typeof f.getTileImageUrl==="function"||typeof f.getTileUrl==="function")return true;return false};var d=0;c.TileLayer=__MapNSImpl__.Class(p,{initialize:function(f){p.apply(this);var l={tileUrlTemplate:"",tileSubdomains:"",copyrights:null,name:"",alt:"",isPng:false,tileSize:new u(256,256),opacity:1,
minZoom:1,maxZoom:18,zIndex:d++,retryCount:2,errorUrl:t.domain+"imgs/404.png"};f=b.fill(f,l);this.setOptions(f);j.loadView("TileLayer",this)},getCopyright:function(f,l){return this.get("copyrights_").getCopyrightNotice(f,l)},changed:function(f){if(f=="map")if(f=this.get("map")){var l=f.layers;this.set("map_",f);l.exists(this)||l.push(this);var a=l.getLength();if(a>1)if(this.get("base")){for(var h=0;h<a;h++){var m=l.getAt(h);m!=this&&m.set("base",false)}f.set("baseLayer",this)}else this.get("zIndex")==
"0"&&this.set("zIndex",d++);else{this.set("base",true);f.set("baseLayer",this)}}else if(f=this.get("map_")){l=f.layers;l.exists(this)&&this.get("map_").layers.pop(this);if(l.getLength()==1){f=l.getAt(0);f.get("zIndex")=="0"&&f.set("base",true)}}},getTileUrl:function(f,l){var a=f.getX(),h=f.getY(),m=t.domain+"imgs/transparent.gif",q=this.get("tileUrlTemplate"),w=this.get("tileSubdomains");if(q){m=q.replace(/\{x\}/,a);m=m.replace(/\{y\}/,h);m=m.replace(/\{z\}/,l)}if(w){q=w.split(",");if(q.length)m=
m.replace(/\{s\}/,q[Math.abs(a+h)%q.length])}return m}});p.publicProperties(c.TileLayer,{zIndex:o.isNumber,name:o.isString,opacity:o.isNumber,map:null,minZoom:o.isNumber,maxZoom:o.isNumber});c.RoadMapLayer=__MapNSImpl__.Class(c.TileLayer,{initialize:function(f){var l=new i(new k(-90,-180),new k(90,180)),a=new c.CopyrightCollection("- GS(2012)6001\u53f7&nbsp;&nbsp;Data&copy; ");a.addCopyright(new c.Copyright('<a href="http://www.autonavi.com" style="text-decoration:none;color:#000" target="_blank">AutoNavi</a>',
l,1));f=b.fill(f,{tileUrlTemplate:"http://{s}.map.soso.com/maptilesv2/{z}/{dx}/{dy}/{x}_{y}.png",tileSubdomains:"p0,p1,p2,p3",copyrights:a,name:g.ROADMAP.name,alt:g.ROADMAP.alt,base:true});c.TileLayer.apply(this,[f])},getTileImageUrl:function(f,l,a){var h=t.tileDomains,m=t.domain+"imgs/transparent.gif",q=this.get("tileUrlTemplate");h=this.get("tileSubdomains").split(",");var w=h.length,x=this.get("tileSize").getHeight();l=(1<<a+Math.floor(256/x/2))-1-l;x=l.toString();w=x.charAt(x.length-1)%w||0;if(q){m=
q.replace(/\{x\}/,f);m=m.replace(/\{y\}/,l);m=m.replace(/\{z\}/,a);m=m.replace(/\{dx\}/,Math.floor(f/16));m=m.replace(/\{dy\}/,Math.floor(l/16))}if(h.length)m=m.replace(/\{s\}/,h[w]);return m}});c.SatelliteLayer=__MapNSImpl__.Class(c.RoadMapLayer,{initialize:function(f){var l=new i(new k(-90,-180),new k(90,180)),a=new c.CopyrightCollection("- GS(2012)6007\u53f7&nbsp;&nbsp;Imagery&copy; ");a.addCopyright(new c.Copyright('<a href="http://www.chinasiwei.com" style="text-decoration:none;color:#000" target="_blank">DigitalGlobe & Chinasiwei</a>',
l,1));f=b.fill(f,{tileUrlTemplate:"http://{s}.map.soso.com/sateTiles/{z}/{dx}/{dy}/{x}_{y}.jpg",tileSubdomains:"p0,p1,p2,p3",copyrights:a,name:g.SATELLITE.name,alt:g.SATELLITE.alt,base:true});c.TileLayer.apply(this,[f])}});c.HybridLayer=__MapNSImpl__.Class(c.RoadMapLayer,{initialize:function(f){var l=new i(new k(-90,-180),new k(90,180)),a=new c.CopyrightCollection("&nbsp;&nbsp;Data&copy; ");a.addCopyright(new c.Copyright('<a href="http://www.autonavi.com" style="text-decoration:none;color:#000" target="_blank">AutoNavi</a>',
l,1));f=b.fill(f,{tileUrlTemplate:"http://{s}.map.soso.com/sateTranTiles/{z}/{dx}/{dy}/{x}_{y}.png",tileSubdomains:"p0,p1,p2,p3",copyrights:a,name:g.HYBRID.name,alt:g.HYBRID.alt});c.TileLayer.apply(this,[f])}});c.TrafficLayer=__MapNSImpl__.Class(c.TileLayer,{initialize:function(f){f=b.fill(f,{name:g.TRAFFIC.name,alt:g.TRAFFIC.alt});c.TileLayer.apply(this,[f])},getTileUrl:function(f,l){var a=f.getX(),h=f.getY();return"http://rtt.map.soso.com/live/"+l+"/"+Math.floor(a/10)+"/"+Math.floor(h/10)+"/"+a+
"_"+h+".png?timeKey="+(new Date).getTime()}});c.TileGridLayer=c.TileLayer})(__MapNS__);(function(c){var t=__MapNSImpl__.Util,p=__MapNSImpl__.Config,j=__MapNSImpl__.RC.MapType,u=__MapNSImpl__.Interfaces,i=c.MVCObject.checkers;t.Browser();var k=i.checkInterface(u.LatLng),o=c.Event,g=c.MapType,b=c.MapTypeId,d=c.MapTypeRegistry,f=c.Size,l=c.Point,a=c.LatLng,h=c.LatLngBounds,m=c.Bounds,q=c.MVCArray,w=c.MVCObject,x=c.MVCView,B=__MapNSImpl__.Synchronize,E=__MapNSImpl__.Class(w,{initialize:function(r,v){w.apply(this);var z={__hideLogo__:false,center:new a(p.DEFAULT_LAT,p.DEFAULT_LNG),zoomLevel:p.DEFAULT_ZOOMLEVEL,
maxZoom:p.zoomMax,minZoom:p.zoomMin,backgroundColor:"",cursor:"default",draggingCursor:"grabbing",draggable:true,scrollWheel:true,zoomInByDblClick:true,keyBoard:true,animation:true,mapTypeId:b.ROADMAP,boundary:null,autoPan:false,__clip_padding__:1.5};v=B.fill(v,z);this.layers=new q;this.controls=new q;this.overlays=new q;this.mapTypes=new d;this.fromPixelToLngLat=this.fromPixelToLatLng;this.fromLngLatToPixel=this.fromLatLngToPixel;this.fromContainerPixelToLngLat=this.fromContainerPixelToLatLng;this.fromLngLatToContainerPixel=
this.fromLatLngToContainerPixel;z=new c.MapCanvasProjection;z.bindTo("center",this,"center");z.bindTo("width",this,"viewWidth_");z.bindTo("height",this,"viewHeight_");z.bindTo("zoom",this,"zoomLevel");z.bindTo("origin",this,"origin_");var C=new c.RoadMapLayer,F=new c.SatelliteLayer,e=new c.HybridLayer;this.mapTypes.set(b.ROADMAP,new g({name:j.ROADMAP.name,alt:j.ROADMAP.alt,layers:[C],fullLoad:false,system:true}));this.mapTypes.set(b.SATELLITE,new g({name:j.SATELLITE.name,alt:j.SATELLITE.alt,layers:[F],
system:true}));this.mapTypes.set(b.HYBRID,new g({name:j.HYBRID.name,alt:j.HYBRID.alt,layers:[F,e],system:true}));if(C=v.boundary){C=C.getCenter();v.center=C}C=this.mapTypes.get(v.mapTypeId);F=v.minZoom||Number.MIN_VALUE;e=v.maxZoom||Number.MAX_VALUE;if(C){for(var n=0,s=C.layers.length;n<s;n++){var y=C.layers[n];this.layers.push(y);F=Math.max(y.get("minZoom"),F);e=Math.min(y.get("maxZoom"),e)}v.minZoom=F;v.maxZoom=e}this.set("lastZoom",v.zoomLevel);this.set("targetZoom",v.zoomLevel);this.setOptions(v);
r=typeof r=="object"?r:document.getElementById(r);this.set("container_",r);this.notifyResize();this.set("projection",C&&C.projection||new c.Projection);z.bindTo("projection",this);z.set("map",this);this.set("mapCanvasProjection_",z);x.loadView("Map",this);var D=this;o.addListener(this.layers,"remove_at",function(G,K){if(D.get("loaded"))K.get("map")&&K.set("map",null);else{var J=D.mapTypes.get(D.get("mapTypeId"));J&&(J.layers.length=0)}});o.addListener(this.layers,"insert_at",function(G,K){function J(){setTimeout(function(){K.set("map",
N);K.get("loaded")||J()},0)}var N=K.get("map")||D;J()});setInterval(t.callback(this,this.notifyResize),10)},getViewSize:function(){return new f(this.get("viewWidth_"),this.get("viewHeight_"))},getBounds:function(){if(this.get("projection")){var r=this.get("mapCanvasProjection_"),v=this.get("viewWidth_"),z=this.get("viewHeight_");z=r.fromContainerPixelToLatLng(new l(0,z),true);r=r.fromContainerPixelToLatLng(new l(v,0),true);return new h(z,r)}},moveTo:function(r,v){if(k(r)){var z=this.get("boundary");
if(z){var C=this.get("projection"),F=this.get("zoomLevel"),e=this.get("viewWidth_"),n=this.get("viewHeight_"),s=C.fromLatLngToPoint(z.getNorthEast(),F),y=C.fromLatLngToPoint(z.getSouthWest(),F),D=C.fromLatLngToPoint(r,F);z=D.getX();D=D.getY();var G=s.getX()-e/2;s=s.getY()+n/2;e=y.getX()+e/2;n=y.getY()-n/2;if(z>G&&D<s&&z<e&&D>n)return;r=C.fromPointToLatLng(new l(Math.min(Math.max(z,e),G),Math.min(Math.max(D,s),n)),F)}C=this.get("center");F=true;if(!C||!this.get("animation")||v||!x.getView("Map"))F=
false;else{F=this.get("mapCanvasProjection_");C=F.fromLatLngToContainerPixel(C);n=F.fromLatLngToContainerPixel(r);F=C.getX()-n.getX();C=C.getY()-n.getY();F=!(Math.abs(F)>this.get("viewWidth_")||Math.abs(C)>this.get("viewHeight_"))}if(F)this.set("animation_",{type:"move",center:r});else{this.set("animation_",null);this.set("center",r)}}else throw Error("Map center should be a LatLng.");},moveBy:function(r,v){if(i.checkInterface(u.Size)(r)){if(r.getWidth()!==0||r.getHeight()!==0){var z=this.get("center"),
C=this.get("mapCanvasProjection_");z=C.fromLatLngToContainerPixel(z);var F=z.getX()-r.getWidth();z=z.getY()-r.getHeight();F=new l(F,z);this.moveTo(C.fromContainerPixelToLatLng(F,!v),v)}}else throw Error("Move by new a Size type offset.");},fitBounds:function(r,v,z){v=v||{left:0,right:0,top:0,bottom:0};var C=parseInt(v.left)||0+parseInt(v.right)||0;v=parseInt(v.top)||0+parseInt(v.bottom)||0;C=this.get("viewWidth_")-C;v=this.get("viewHeight_")-v;var F=this.get("projection"),e=this.get("minZoom"),n=
this.get("maxZoom");C=t.getOptimalZoomLevel(r,C,v,F,e,n);this.set("center",r.getCenter());this.set("zoomLevel",z||C);this.set("lastZoom",z||C)},getFitBoundsZoomLevel:function(r,v){var z=this.get("viewWidth_"),C=this.get("viewHeight_"),F=this.get("projection"),e=this.get("minZoom"),n=this.get("maxZoom");if(v){z=v.getWidth();C=v.getHeight()}return t.getOptimalZoomLevel(r,z,C,F,e,n)},zoomIn:function(r,v,z){this.zoomTo(this.getZoomLevel()+1,r,v,z)},zoomOut:function(r,v,z){this.zoomTo(this.getZoomLevel()-
1,r,v,z)},zoomTo:function(r,v,z,C){r=Math.round(r);r=Math.max(r,this.get("minZoom"));r=Math.min(r,this.get("maxZoom"));if(r===this.get("zoomLevel"))v&&this.moveTo(v);else{var F=r-this.getZoomLevel();C=this.get("animation")&&!C;var e=v||this.get("center"),n=this.get("mapCanvasProjection_");e=n.fromLatLngToContainerPixel(e);this.set("focusPixel",e);var s=this.get("zoomAnimation_");if((!s||s.getStatus()!==1)&&C)(s=this.getBaseLayer())&&s.notify("exchange_");s=e.getX();var y=e.getY();if(s<0||s>this.get("viewWidth_")||
y<0||y>this.get("viewHeight_"))C=false;s=this.get("originPosition_");this.set("zoomLevel",r);if(v){if(z){v=n.fromLatLngToContainerPixel(v);y=this.getCenter();y=n.fromLatLngToContainerPixel(y);r=y.getX()+v.getX()-e.getX();v=y.getY()+v.getY()-e.getY();r=new l(r,v);v=n.fromContainerPixelToLatLng(r)}this.set("center",v)}C&&s||x.getView("Map")?this.set("animation_",{type:"zoom",delta:F,focusPixel:e,originPosition:s,isInPlace:z}):this.set("animation_",null)}},notifyResize:function(){var r=this.get("container_"),
v=t.getCurrentStyle(r),z=r.offsetWidth,C=r.offsetHeight;r=v&&parseInt(v.width);v=v&&parseInt(v.height);r=isNaN(r)||!r?z:z||r;v=isNaN(v)||!v?z:C||v;z=this.getViewSize();if(!(z.getWidth()==r&&z.getHeight()==v)){var F=this.get("center")&&this.get("projection")&&this.get("mapCanvasProjection_");C=null;z=this.get("mapCanvasProjection_");if(F){var e=new l(r/2,v/2);e=z.fromContainerPixelToLatLng(e);C=[r-this.get("viewWidth_"),v-this.get("viewHeight_")]}this.set("viewWidth_",r);this.set("viewHeight_",v);
o.trigger(this,"resize");if(F){if(r=this.get("origin_")){r=z.fromLatLngToContainerPixel(r);r=new l(r.getX()+C[0]/2,r.getY()+C[1]/2);this.set("origin_",z.fromContainerPixelToLatLng(r))}this.set("center",e)}}},getDistance:function(r,v){if(!r||!v)return 0;if(!k(r)||!k(v))throw Error("Start and end must be __MapNS__.LatLng object.");var z=function(e){return Math.PI/180*e},C=z(r.getLat()-v.getLat()),F=z(r.getLng()-v.getLng());z=Math.sin(C/2)*Math.sin(C/2)+Math.cos(z(v.getLat()))*Math.cos(z(r.getLat()))*
Math.sin(F/2)*Math.sin(F/2);return 6378137*2*Math.asin(Math.min(1,Math.sqrt(z)))},fromLatLngToPixel:function(r){return this.get("mapCanvasProjection_").fromLatLngToDivPixel(r)},fromPixelToLatLng:function(r){return this.get("mapCanvasProjection_").fromDivPixelToLatLng(r)},fromLatLngToContainerPixel:function(r){return this.get("mapCanvasProjection_").fromLatLngToContainerPixel(r)},fromContainerPixelToLatLng:function(r){return this.get("mapCanvasProjection_").fromContainerPixelToLatLng(r)},getCenter:function(){return this.get("center")},
setCenter:function(r){this.moveTo(r,true)},getZoomLevel:function(){return this.get("zoomLevel")},getProjection:function(){return this.get("projection")},setZoomLevel:function(r){this.zoomTo(r,null,null,true)},setBoundary:function(r){this.setCenter(r&&r.getCenter())},getBaseLayer:function(){return this.get("baseLayer")},getViewbox:function(){var r=this.get("mapCanvasProjection_"),v=this.get("__clip_padding__"),z=this.getCenter();if(r&&z){var C=this.get("viewWidth_")*v;v=this.get("viewHeight_")*v;r=
r.fromLatLngToDivPixel(z);z=r.x+C;var F=r.y+v;return new m([new l(r.x-C,r.y-v),new l(z,F)])}},getDrawBounds:function(){var r=this.get("projection");if(r){var v=this.get("__clip_padding__"),z=this.get("zoomLevel"),C=this.get("viewWidth_")*v;v=this.get("viewHeight_")*v;var F=this.getCenter(),e=r.fromLatLngToPoint(F,z);F=e.getX();var n=e.getY();e=new l(F-C,n+v);C=new l(F+C,n-v);v=r.fromPointToLatLng(e,z);r=r.fromPointToLatLng(C,z);return new h(v,r)}}}),A={backgroundColor:i.isString,cursor:i.isString,
draggingCursor:i.isString,scrollWheel:i.isBoolean,zoomInByDblClick:i.isBoolean,keyBoard:i.isBoolean,animation:i.isBoolean,draggable:i.isBoolean,autoPan:i.isBoolean,boundary:i.isInstanceOf(h),mapTypeId:i.isStringOrNull};w.publicProperties(E,A);c.Map=E})(__MapNS__);(function(c){var t=c.MVCObject.checkers,p=__MapNSImpl__.Config,j=__MapNSImpl__.Synchronize,u=c.MVCView,i=c.Overlay;c.InfoWindow=__MapNSImpl__.Class(i,{initialize:function(k){i.apply(this);k=j.fill(k,{visible:true,content:"",style:{url:p.domain+"imgs/infowindow_default.png",top_left:[0,0,10,10],bottom_right:[600,430,10,10],margin:[20,10],width_range:[200,560],height_range:[80,440],offset:[-3,0],stem:{x:[65,100,43],y:484,align:c.ALIGN.CENTER,offset:0},close:{url:p.domain+"imgs/infowindow_close_default.png",
coordinate:[0,0,13,13],align:c.ALIGN.TOP_RIGHT,margin:[8,8]},shadow:{url:p.domain+"imgs/infowindow_shadow_default.png",top_left:[343,142],bottom_right:[641,452],stem:{x:[97,127,44],y:484,offset:[-6,-2],blur:5}}},zIndex:0,position:null,target:null,autoMove:true});this.setOptions(k);u.loadView("InfoWindow",this)},open:function(k,o){this.set("position",o);this.set("content",k);this.set("visible",true)},close:function(){this.set("visible",false)},reset:function(){this.notify("content")},construct:function(){this.set("panes_",
this.getPanes())},destroy:function(){this.notify("destroy_");this.set("panes_",null)},draw:function(){this.notify("draw_")}});c.MVCObject.publicProperties(c.InfoWindow,{visible:t.isBoolean,content:null,zIndex:t.isNumber,autoMove:t.isBoolean,style:null,position:null,target:null,animation:null});c.InfoWindow.Animation={POP:0}})(__MapNS__);(function(){var c=__MapNS__.MVCObject.checkers,t=__MapNS__.Overlay,p=__MapNS__.MVCView,j=__MapNS__.MVCObject,u=__MapNSImpl__.Synchronize;__MapNS__.Polyline=__MapNSImpl__.Class(t,{initialize:function(i){t.apply(this);i=u.fill(i,{path:[],strokeColor:"#1791fc",strokeWeight:4,fillOpacity:0.2,strokeOpacity:0.8,strokeDashStyle:"solid",startArrow:null,endArrow:null,strokeLinejoin:"round",strokeLinecap:"round",editable:false,hasLabel:false,zIndex:0,cursor:"",simplify:true,visible:true});this.setValues(i);
p.loadView("Polygon",this)},construct:function(){this.set("panes_",this.getPanes());this.notify("construct_")},draw:function(){this.notify("draw_")},destroy:function(){this.notify("destroy_");this.set("panes_",null)},getBounds:function(){var i=this.get("path"),k=null;if(i&&i.length!==0){var o=i[0].getLng(),g=i[0].getLat();k=o;for(var b=g,d=1,f=i.length;d<f;d++){var l=i[d].getLng(),a=i[d].getLat();l>k&&(k=l);a>b&&(b=a);l<o&&(o=l);a<g&&(g=a)}i=new __MapNS__.LatLng(g,o);k=new __MapNS__.LatLng(b,k);k=
new __MapNS__.LatLngBounds(i,k)}return k}});c={path:null,strokeColor:j.union(c.isInstanceOf(__MapNS__.Color),c.isString,c.isNull),strokeWeight:c.isNumber,strokeOpacity:c.isNumber,strokeDashStyle:c.isString,startArrow:c.isString,endArrow:c.isString,strokeLinejoin:c.isString,strokeLinecap:c.isString,cursor:c.isString,editable:c.isBoolean,hasLabel:c.isBoolean,zIndex:c.isNumber,simplify:c.isBoolean,visible:c.isBoolean};j.publicProperties(__MapNS__.Polyline,c)})();(function(c){var t=c.MVCObject.checkers,p=c.Polyline,j=c.MVCObject,u=__MapNSImpl__.Synchronize;c.Polygon=__MapNSImpl__.Class(p,{initialize:function(k){k=u.fill(k,{strokeWeight:2,filled:true});p.apply(this,[k]);this.set("fillColor",k.fillColor||"#1791fc")}});var i=j.union(t.isInstanceOf(c.Color),t.isString,t.isNull);j.publicProperties(c.Polygon,{path:null,strokeColor:i,strokeWeight:t.isNumber,strokeOpacity:t.isNumber,strokeDashStyle:t.isString,cursor:t.isString,zIndex:t.isNumber,visible:t.isBoolean,
fillColor:i,fillOpacity:t.isNumber,simplify:t.isBoolean,editable:t.isBoolean})})(__MapNS__);(function(c){var t=c.MVCObject.checkers,p=c.MVCView,j=c.MVCObject,u=c.Overlay,i=c.LatLng,k=__MapNSImpl__.Synchronize;c.Circle=__MapNSImpl__.Class(u,{initialize:function(g){u.apply(this);var b={center:new c.LatLng(0,0),radius:0,strokeColor:new c.Color(23,145,252,0.8),strokeWeight:1,fillColor:new c.Color(23,145,252,0.2),strokeDashStyle:"solid",zIndex:0,cursor:"",visible:true};g=k.fill(g,b);this.setValues(g);p.loadView("Circle",this)},construct:function(){this.set("panes_",this.getPanes());this.notify("construct_")},
draw:function(){this.notify("draw_")},destroy:function(){this.notify("destroy_");this.set("panes_",null)},getBounds:function(){var g=this.get("center"),b=this.get("radius"),d=null,f=g.getLat();if(g)if(b<=0)d=new c.LatLngBounds(new c.LatLng(g.getLat(),g.getLng()),new c.LatLng(g.getLat(),g.getLng()));else{var l=b/6378137,a=l*180/Math.PI;b=f+a;d=f-a;a=Math.asin(l/2/Math.cos(f*Math.PI/180))*360/Math.PI;f=g.getLng()+a;g=g.getLng()-a;d=new c.LatLngBounds(new c.LatLng(d,g),new c.LatLng(b,f))}return d}});
var o=j.union(t.isInstanceOf(c.Color),t.isString,t.isNull);t={center:j.union(t.isInstanceOf(i),t.isNull),radius:t.isNumber,strokeColor:o,fillColor:o,strokeWeight:t.isNumber,strokeOpacity:t.isNumber,fillOpacity:t.isNumber,strokeDashStyle:t.isString,cursor:t.isString,zIndex:t.isNumber,visible:t.isBoolean};j.publicProperties(c.Circle,t)})(__MapNS__);(function(c){var t=__MapNSImpl__.Util,p=c.Point,j=c.Size,u=c.MVCObject,i=__MapNSImpl__.Interfaces,k=c.MVCObject.checkers;c.MarkerImage=__MapNSImpl__.Class(u,{initialize:function(b,d,f,l,a,h,m){u.apply(this);this.set("origin_",l||new p(0,0));this.set("size_",d||a);this.set("anchor_",f||new p(0,0));this.set("scaledSize_",a);this.set("url_",b);this.set("offset_",h);this.set("printable_",m);new g(this)}});var o=u.union(k.checkInterface(i.Size),k.isNull);i=u.union(k.checkInterface(i.Point),k.isNull);c.MVCObject.publicProperties(c.MarkerImage,
{url_:k.isString,size_:o,origin_:i,anchor_:i,scaledSize_:o});var g=__MapNSImpl__.Class(u,{initialize:function(b){u.apply(this);this.bindsTo(["origin_","size_","anchor_","scaledSize_","ready_","url_"],b)},url__changed:function(){var b=this,d=this.get("url_");t.fetchImage(d,function(f,l){if(f!==0&&l!==0){b.get("size_")||b.set("size_",new j(f,l));b.set("ready_",true)}})}});c.MarkerShape=__MapNSImpl__.Class(u,{initialize:function(b,d){u.apply(this);this.set("coord_",b);this.set("type_",d)}})})(__MapNS__);(function(c){var t=c.MVCObject.checkers,p=__MapNSImpl__.Interfaces,j=__MapNSImpl__.Util,u=c.Size,i=c.ALIGN,k=c.MVCObject,o=__MapNSImpl__.Synchronize;c.MarkerDecoration=__MapNSImpl__.Class(k,{initialize:function(d){k.apply(this);var f={align:i.CENTER,zIndex:0,margin:new u(0,0)};d=o.fill(d,f);this.setOptions(d);new b(this)}});var g=k.union(t.isString,t.isNull,t.isNumber,t.isHtmlControl);k.publicProperties(c.MarkerDecoration,{content:g,margin:t.checkInterface(p.Size),marker:null});var b=__MapNSImpl__.Class(c.MVCObject,
{initialize:function(d){k.apply(this);this.set("model_",d);this.bindsTo(["content","align","margin","marker"],d)},iconDom__changed:function(){var d=this.get("container_"),f=this.get("iconDom_");if(d&&d.parentNode)try{d.parentNode.removeChild(d)}catch(l){}if(!d){d=document.createElement("div");d.style.cssText="position:absolute;";this.set("container_",d)}if(f){f.appendChild(d);this.notify("content");this.draw()}},marker_changed:function(){var d=this.get("marker");this.unbind("iconDom_");d?this.bindTo("iconDom_",
d):this.notify("iconDom_")},content_changed:function(){var d=this.get("container_"),f=this.get("content");if(d&&f){d.innerHTML="";if(j.isHtmlControl(f))d.appendChild(f);else d.innerHTML=f;this.draw()}},changed:function(d){if(d==="align"||d==="margin")this.draw()},draw:function(){this.get("container_")&&j.setPositionByAlign(this.get("container_"),this.get("align"),this.get("margin"),this.get("iconDom_"))}})})(__MapNS__);(function(c){function t(){return m=m||new f(u.domain+"imgs/marker.png",new k(22,34),new o(11,34),new o(0,0))}function p(){return q=q||new f(u.domain+"imgs/marker.png",new k(51,39),new o(18,34),new o(22,0))}function j(){return w=w||new c.MarkerShape([7,0,13,0,17,1,22,7,22,8,22,14,21,16,20,18,18,19,15,22,13,25,12,26,12,28,11,31,11,33,10,33,10,29,9,28,9,26,8,25,0,15,0,7],"poly")}var u=__MapNSImpl__.Config,i=c.Overlay,k=c.Size,o=c.Point,g=c.MVCObject,b=c.MVCView,d=c.Animation,f=c.MarkerImage,l=__MapNSImpl__.Interfaces,
a=c.MVCObject.checkers,h=__MapNSImpl__.Synchronize,m=null,q=null,w=null,x=null;c.Marker=__MapNSImpl__.Class(i,{initialize:function(r){i.apply(this);r=h.fill(r,{icon:null,shadow:null,shape:null,dragTargetIcon:null,title:"",cursor:"pointer",clickable:true,visible:true,zIndex:0,flat:false,dragAnimation:1,altitude_:0,background:"",draggable:false});!r.icon&&(r.icon=t(),r.shadow&&(r.shadow=p()),r.shape=j());if(r.draggable){var v=r,z;if(!(z=r.dragTargetIcon))z=x=x||new f(u.domain+"imgs/target.png",new k(16,
16),new o(8,8),new o(0,0));v.dragTargetIcon=z}this.setOptions(r);b.loadView("Marker",this)},construct:function(){this.set("panes_",this.getPanes())},destroy:function(){if(this.get("panes_")){this.set("dragEvent_",false);this.notify("destroy_");this.set("panes_",null)}},draw:function(){this.notify("draw_")},startDrag:function(r){this.set("dragEvent_",r)},stopDrag:function(){this.set("dragEvent_",false)},changed:function(r){var v=this.get(r);switch(r){case "animation":this.set("animationType_",v);break;
case "shadow":case "icon":case "dragTargetIcon":if(r==="icon")if(this.get("icon")===null){this.unbind(r+"Ready_");this.set("icon",t());this.set("shadow",p());break}else if(this.get("icon")!==t()){this.get("shadow")===p()&&this.set("shadow",null);this.get("shape")===j()&&this.set("shape",null)}this.unbind(r+"Ready_");v&&this.bindTo(r+"Ready_",v,"ready_")}}});c.Marker.Animation={BOUNCE:0,DROP:1,JUMP:2,STICK:3};var B=g.union(function(r){return r===d.BOUNCE||r===d.DROP||r===d.JUMP||r===d.STICK},a.isNull),
E=g.union(a.isInstanceOf(f),a.isNull),A=g.union(a.isInstanceOf(c.MarkerShape),a.isNull);l={position:g.union(a.checkInterface(l.LatLng),a.isNull),icon:E,title:a.isStringOrNull,shadow:E,dragTargetIcon:E,shape:A,cursor:a.isString,zIndex:a.isNumber,visible:a.isBoolean,clickable:a.isBoolean,flat:a.isBoolean,draggable:a.isBoolean,background:a.isStringOrNull,animation:B};g.publicProperties(c.Marker,l)})(__MapNS__);(function(c){var t=c.Point,p=__MapNSImpl__.Interfaces,j=c.MVCObject,u=c.MVCView,i=j.checkers,k=c.Overlay,o=__MapNSImpl__.Synchronize;c.Label=__MapNSImpl__.Class(k,{initialize:function(f){k.apply(this);var l={offset:new t(0,0),style:{border:"solid 1px #999",fontSize:"12px",padding:"2px",backgroundColor:"#fff"},visible:true,opacity:1,content:""};f=o.fill(f,l);this.setOptions(f);u.loadView("Label",this)},construct:function(){this.set("panes_",this.getPanes())},destroy:function(){this.notify("destroy_");
this.set("panes_",null)},draw:function(){this.notify("draw_")},changed:function(f){this.get(f)}});var g=j.union(i.checkInterface(p.LatLng),i.isInstanceOf(c.Marker),i.isNull),b=j.union(i.isString,i.isNull,i.isNumber,i.isHtmlControl),d=j.union(i.isObject,i.isString,i.isNull);p=j.union(i.checkInterface(p.Point),i.checkInterface(p.Size),i.isNull);j.publicProperties(c.Label,{style:d,position:g,offset:p,content:b,zIndex:i.isNumberOrNull,opacity:i.isNumber,visible:i.isBoolean})})(__MapNS__);(function(c){var t=c.LatLngBounds,p=c.MVCObject.checkers,j=__MapNSImpl__.Synchronize,u=c.MVCView,i=c.Overlay;c.GroundOverlay=__MapNSImpl__.Class(i,{initialize:function(k){i.apply(this);k=j.fill(k,{visible:true,opacity:1});this.setOptions(k);u.loadView("GroundOverlay",this)},construct:function(){this.set("panes_",this.getPanes())},destroy:function(){this.notify("destroy_");this.set("panes_",null)},draw:function(){this.notify("draw_")}});t=c.MVCObject.union(p.checkInterface(t),p.isNull);c.MVCObject.publicProperties(c.GroundOverlay,
{zIndex:p.isNumberOrNull,opacity:p.isNumber,visible:p.isBoolean,imageUrl:p.isStringOrNull,bounds:t})})(__MapNS__);(function(c){function t(r,v,z){var C=document.createElement("div");C.style.cssText="position:absolute;overflow:hidden;z-index:1;opacity:0.01;filter:alpha(opacity=1);cursor:pointer";var F=document.createElement("img");F.style.cssText="position:absolute;-moz-user-select:none;-khtml-user-select:none;border:none;";F.unselectable="on";var e=function(n){o.stopEvent(n);return false};o.addDomListener(F,"selectstart",e);o.addDomListener(F,"dragstart",e);C.appendChild(F);F.src=v;v="qimgmapnavcontrol"+m++;e=
null;F.setAttribute("usemap","#"+v);i.setSize(F,z);i.setSize(C,z);if(k.ie&&k.ie<9){F.setAttribute("useMap","#"+v);e=document.createElement('<map name="'+v+'"></map>')}else{e=document.createElement("map");e.setAttribute("name",v)}C.appendChild(e);r.appendChild(C);return e}function p(r,v,z){var C=document.createElement("area");C.href="javascript:void(0)";r.appendChild(C);C.setAttribute("shape","poly");C.setAttribute("coords",v.join(","));C.style.cursor="pointer";z&&(C.title=z);return C}function j(r,
v,z,C){var F=function(e){return function(){a(r,z,C[e])}};o.addDomListener(v,"mouseover",F(1));o.addDomListener(v,"mouseout",F(0));o.addDomListener(v,"mouseup",F(1));o.addDomListener(v,"mousedown",F(2))}function u(r,v,z){var C=z.get("minZoom"),F=z.get("maxZoom"),e=z.get("zoomLevelTips"),n;for(n in e){var s=parseInt(n);if(s>=C&&s<=F){var y=q.levelTips[v],D=document.createElement("div");D.style.position="absolute";D.style.cssText="line-height:12px;font-size:12px;position:absolute;color:#fff;padding-left:"+
(v=="left"?"2px":"9px")+";padding-top:"+(k.ie&&k.ie==6?"1px":"0px");i.setSize(D,[y[2],y[3]]);a(D,q.url,y);y=document.createElement("span");y.style.position="absolute";y.innerHTML=e[n];D.appendChild(y);v==="right"?D.style.left="34px":D.style.left="-16px";D.style.bottom=9*(s-C)-3+"px";r.appendChild(D);o.addDomListener(D,"click",function(G){return function(){z.get("map").zoomTo(G)}}(s))}}}var i=__MapNSImpl__.Util,k=i.Browser(),o=c.Event,g=__MapNSImpl__.Interfaces,b=c.MVCObject.checkers,d=__MapNSImpl__.Config,
f=__MapNSImpl__.RC.NavControl,l=__MapNSImpl__.Synchronize,a=i.setCssSprite,h=i.setDomCoord,m=0,q={url:d.domain+"imgs/ctrls.png",background:[0,121,44,44],downhover:[44,121,44,44],lefthover:[88,121,44,44],uphover:[132,121,44,44],righthover:[176,121,44,44],downpress:[220,121,44,44],leftpress:[264,121,44,44],uppress:[308,121,44,44],rightpress:[352,121,44,44],inback:[0,69,23,25],outback:[0,95,23,25],inhover:[26,69,23,25],outhover:[26,95,23,25],inpress:[53,69,23,25],outpress:[53,95,23,25],slideback:[170,
76,24,13],slidehover:[170,92,24,13],slidepress:[170,107,24,13],ruler:[84,0,8,9],heat:[92,0,8,9],levelTips:{right:[139,54,25,16],left:[112,54,25,16]}},w=[22,22,8,8,2,16,0,26,2,36,8,44],x=[22,22,44,8,50,16,52,26,50,36,44,44],B=[22,22,8,8,16,2,26,0,36,2,44,8],E=[22,22,8,44,16,50,26,52,36,50,44,44],A=__MapNSImpl__.Class(c.Control,{initialize:function(r){r=l.fill(r,{style:c.NavigationControlStyle.DEFAULT,maxZoom:d.zoomMax,minZoom:d.zoomMin,zoomLevelTips:f.zoomLevelTips});c.Control.apply(this,[r]);this.set("content",
this.getControlDom())},getControlDom:function(){var r=this.get("map");if(r){var v=this.get("minZoom")||r.get("minZoom"),z=this.get("maxZoom")||r.get("maxZoom");r=document.createElement("div");var C=document.createElement("div");C.style.cssText="position:relative;margin-bottom:10px;";var F=document.createElement("div");F.style.cssText="position:absolute;z-index:0;";var e=q.background;i.setSize(C,[e[2],e[3]]);i.setSize(F,[e[2],e[3]]);a(F,q.url,e);C.appendChild(F);r.appendChild(C);var n=t(C,q.url,[e[2],
e[3]]);C=p(n,w,f.left);j(F,C,q.url,[q.background,q.lefthover,q.leftpress]);e=p(n,x,f.right);j(F,e,q.url,[q.background,q.righthover,q.rightpress]);var s=p(n,B,f.up);j(F,s,q.url,[q.background,q.uphover,q.uppress]);n=p(n,E,f.down);j(F,n,q.url,[q.background,q.downhover,q.downpress]);F=document.createElement("div");F.style.cssText="position:relative;margin-left:11px;cursor:pointer;";F.title=f.zoomIn;var y=document.createElement("div");y.style.cssText="position:relative;margin-left:11px;cursor:pointer;";
y.title=f.zoomOut;var D=q.inback,G=q.outback;i.setSize(F,[D[2],D[3]]);i.setSize(y,[G[2],G[3]]);a(F,q.url,D);a(y,q.url,G);D=[q.outback,q.outhover,q.outpress];j(F,F,q.url,[q.inback,q.inhover,q.inpress]);j(y,y,q.url,D);r.appendChild(F);D=document.createElement("div");D.style.cssText="position:relative;cursor:pointer;";var K=q.ruler,J=q.heat;i.setSize(D,[0,(z-v+1)*K[3]+1]);var N=document.createElement("div");N.style.cssText="position:absolute;cursor:pointer;";N.title=f.ruler;for(var S=-2;S<z-v;S++){var O=
document.createElement("div");i.setSize(O,[K[2],K[3]]);a(O,q.url,K);N.appendChild(O)}G=document.createElement("div");G.style.cssText="position:absolute;cursor:pointer;";G.title=f.ruler;for(S=-2;S<z-v;S++){O=document.createElement("div");i.setSize(O,[J[2],J[3]]);a(O,q.url,J);G.appendChild(O)}i.setSize(N,[K[2],(z-v+1)*K[3]]);h(N,[17,-2]);i.setSize(G,[J[2],(z-v+1)*J[3]]);h(G,[17,-2]);var L=document.createElement("div");L.style.position="absolute";L.style.margin="auto 0px";L.title=f.slide;J=q.slideback;
i.setSize(L,[J[2],J[3]]);a(L,q.url,J);h(L,[10,K[3]]);j(L,L,q.url,[q.slideback,q.slidehover,q.slidepress]);var R=document.createElement("div");R.style.display="none";r.appendChild(D);D.appendChild(N);D.appendChild(G);D.appendChild(L);D.appendChild(R);r.appendChild(y);var Q=this;K=function(H){return function(){var I=Q.get("map");if(I){var M=Q.get("viewHeight_")/3,U=Q.get("viewWidth_")/3,V=null;switch(H){case 4:I.zoomIn();break;case 5:I.zoomOut();break;case 0:V=new c.Size(0,M);break;case 1:V=new c.Size(0,
-M);break;case 2:V=new c.Size(U,0);break;case 3:V=new c.Size(-U,0);break;case 6:Q.resume()}V&&I.moveBy(V)}}};var T;Q=this;var P=function(H,I){return function(){if(T){window.clearTimeout(T);T=null}if(Q.getCurrentStyle().style===3)if(I==="none")T=setTimeout(function(){H.style.display=I;T=null},1E3);else{H.style.display=I;T=null}}};o.addDomListener(s,"click",K(0));o.addDomListener(n,"click",K(1));o.addDomListener(C,"click",K(2));o.addDomListener(e,"click",K(3));o.addDomListener(F,"click",K(4));o.addDomListener(y,
"click",K(5));o.addDomListener(D,"mouseover",P(R,""));o.addDomListener(F,"mouseover",P(R,""));o.addDomListener(y,"mouseover",P(R,""));o.addDomListener(R,"mouseover",P(R,""));o.addDomListener(D,"mouseout",P(R,"none"));o.addDomListener(F,"mouseout",P(R,"none"));o.addDomListener(y,"mouseout",P(R,"none"));o.addDomListener(R,"mouseout",P(R,"none"));o.addListener(this,"zoomlevel_changed",function(){P(R,"")();P(R,"none")()});C=function(H,I){if(!I||I[0]!==0||I[1]!==0){var M=i.getMouseXY(H),U=i.getDomCoordinate(N);
M=(1-(M[1]-U[1])/(U[3]-9))*(z-v)+v+1;Q.get("map").zoomTo(Math.floor(M));Q.zoomLevel_changed()}};o.addDomListener(N,"click",C);o.addDomListener(G,"click",C);i.enableDrag(L,D,{dragging:function(H,I){if(I[0]!==0||I[1]!==0){var M=i.getMouseXY(H),U=i.getDomCoordinate(N),V=Q.get("slideStart_"),W=Q.get("slideEnd_");M=M[1]-U[1]+V-11;M<-2&&(M=-2);M>=W-9&&(M=W-9);L.style.top=M+"px";Q.setHeat(M,U[3])}},dragend:C});return r}},setHeat:function(r){var v=this.get("slideStart_")-2;r=(r-v)/9;r=r>0?r:0;v=this.get("heat_").getElementsByTagName("div");
for(var z=0;z<v.length;z++)if(z<=r){if(v[z])v[z].style.visibility="hidden"}else if(v[z])v[z].style.visibility="visible"},getCurrentStyle:function(){var r=this.get("style"),v=this.get("content"),z,C,F=0,e=this.get("maxZoom")-this.get("minZoom"),n=q.background[3]+q.inback[3]+q.outback[3]+12;e=q.background[3]+q.inback[3]+q.outback[3]+e*q.ruler[3]+12;var s=q.background[3]+16;if(v.parentNode&&v.parentNode.parentNode&&v.parentNode.style){C=i.getDomCoordinate(v);v=i.getDomCoordinate(v.parentNode.parentNode);
z=C[1]-v[1];C=C[0]-v[0]}if(r===0){r=this.get("viewHeight_")-z;r=r<n?1:r<e?2:3;r!==this.get("currentStyle")&&this.set("currentStyle",r)}if(this.get("viewWidth_")-C<s)F=1;return{style:r,type:F}},draw:function(){var r=this.get("content"),v=this.get("map");if(r&&v){v=this.getCurrentStyle();var z=v.style,C=r.firstChild,F=C.nextSibling.nextSibling,e=F.firstChild;r=e.nextSibling;var n=r.nextSibling;tips=n.nextSibling;if(z==1){C.style.display="none";F.style.display="none"}else C.style.display="";if(z==2)F.style.display=
"none";if(z==3){F.style.display="";this.set("slideStart_",0);z=e.offsetHeight;if(k.ie&&k.ie<=6)z-=9;this.set("slideEnd_",z);this.set("slide_",n);this.set("heat_",r)}v=v.type;if(tips.childNodes.length)tips.innerHTML="";v==1?u(tips,"left",this):u(tips,"right",this);this.zoomLevel_changed()}},zoomLevel_changed:function(){var r=this.get("zoomLevel"),v=this.get("slideEnd_"),z=this.get("minZoom"),C=this.get("maxZoom"),F=this.get("slideStart_")-2;if(typeof r!=="undefined"&&typeof v!=="undefined"){z=(r-z)/
(C-z+1);r=this.get("slide_");v=v-Math.round(z*(v-F)+9);r.style.top=v+"px";this.setHeat(v)}},maxZoom_changed:function(){this.get("maxZoom")&&this.set("content",this.getControlDom())},minZoom_changed:function(){this.get("minZoom")&&this.set("content",this.getControlDom())},save:function(){var r=this.getMap();if(r){this.set("center_",r.getCenter());this.set("zoomLevel_",r.getZoomLevel())}},resume:function(){var r=this.getMap(),v=this.get("center_");r&&v&&r.zoomTo(this.get("zoomLevel_"),v)},construct:function(){var r=
this.getMap();this.bindTo("zoomLevel",r);this.bindTo("maxZoom",r);this.bindTo("minZoom",r);this.save()},destroy:function(){var r=this.getMap(),v=this.get("content");if(r&&v){v.parentNode.removeChild(v);this.unbind("zoomLevel",r);this.unbind("minZoom",r);this.unbind("maxZoom",r);this.set("center_",null);this.set("zoomLevel_",null)}}});c.NavigationControlStyle={DEFAULT:0,SMALL:1,NORMAL:2,LARGE:3};g={content:null,margin:b.checkInterface(g.Size),align:b.isNumber,style:b.isNumber,zoomLevelTips:b.isObject,
map:null};c.NavigationControl=A;c.MVCObject.publicProperties(A,g)})(__MapNS__);(function(c){var t=__MapNSImpl__.Synchronize,p=c.Control;c.CopyrightControl=__MapNSImpl__.Class(p,{initialize:function(j){var u=document.createElement("span");u.style.cssText="display:block;*width:1%;height:15px;font:11px arial,simsun;white-space:nowrap;filter:alpha(opacity=60 finishopacity=30 style=1 startx=0,starty=0,finishx=200,finishy=20) progid:DXImageTransform.Microsoft.gradient(startcolorstr=#FFFFFF,endcolorstr=#FFFFFF,gradientType=1);background-image:-moz-linear-gradient(right center , rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.45) 50px);background-image:-o-linear-gradient(right , rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.45) 50px);background-image:-webkit-gradient(linear,100 100,80 20,from(rgba(255, 255, 255, 0)),to(rgba(255, 255, 255, 0.45)))";
u.innerHTML=__MapNSImpl__.RC.Control.TencentText;j=t.fill(j,{content:u,zIndex:10});p.apply(this,[j])},draw:function(){var j=this.get("content"),u=this.get("map"),i=u.layers;if(i){var k=[];u=u.getBounds();for(var o=this.get("zoomLevel"),g=0;g<i.getLength();g++){var b=i.getAt(g).get("copyrights");if(b)(b=b.getCopyrightNotice(u,o))&&k.push(b)}i=this.get("copySpan");if(!i){i=document.createElement("span");j.appendChild(i);this.set("copySpan",i)}i.innerHTML=k.join(",")}},changed:function(j){switch(j){case "zoomLevel":case "center":case "baseLayer":this.redraw()}},
construct:function(){var j=this.get("map");this.bindTo("zoomLevel",j);this.bindTo("center",j);this.bindTo("baseLayer",j)},destroy:function(){var j=this.get("map");this.unbind("zoomLevel",j);this.unbind("center",j);this.unbind("baseLayer",j)}})})(__MapNS__);(function(c){var t=__MapNSImpl__.Synchronize,p=c.Event,j=c.Size,u=c.MapTypeId,i=c.MVCObject.checkers,k=__MapNSImpl__.Util,o=k.Browser(),g=c.Control;c.MapTypeControlStyle={DEFAULT:0,DROPDOWN_MENU:1,HORIZONTAL_BAR:2};g=__MapNSImpl__.Class(g,{initialize:function(b){var d={mapTypeIds:[u.ROADMAP,u.SATELLITE,u.HYBRID],align:c.ALIGN.TOP_RIGHT,margin:new j(5,5),style:c.MapTypeControlStyle.DEFAULT};b=t.fill(b,d);c.Control.apply(this,[b])},getControlDom:function(){function b(e,n){for(var s=0;s<e.layers.length;s++){var y=
e.layers[s];if(!y.get("base")){var D=document.createElement("div");D.style.cssText="font-size:13px;padding:3px 8px 1px 1px;_padding-right:2px;;background-color: white;font-family: Arial, sans-serif;line-height:18px;text-align:left;font-size:13px;width:46px";D.title=y.get("alt");var G="cb_"+q+"_"+s,K=e.fullLoad?"checked":"",J="top";if(o.ie)J=o.ie>6?"baseline":"middle";D.innerHTML="<span><input id="+G+" "+K+' style = "cursor: pointer;" type="checkbox"/></span><label for='+G+' style="color:#333;vertical-align: '+
J+';cursor: pointer;">'+y.get("name")+"</label>";n.appendChild(D);k.setUnSelectable(D);(function(N,S){p.addDomListener(D,"click",function(){document.getElementById(S).checked?N.setMap(d):N.setMap(null)})})(y,G)}}}var d=this.get("map");if(d){var f=document.createElement("div");f.style.cssText="cursor:pointer;";for(var l=this.get("mapTypeIds"),a={},h=[],m,q=0,w=l.length;q<w;q++){var x=l[q],B=d.mapTypes.get(x);if(w>1&&x==u.HYBRID)m=B;else{var E=document.createElement("div");E.style.cssText="float:left;";
var A=q>0?"border-left:0px":"",r=o.ie?"1px":"0px",v=document.createElement("div");v.style.cssText="color: #333;font-size:13px;border:1px solid #717B87;padding:1px 6px;-webkit-box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px;box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px;background-color: white;min-width:30px;font-family: Arial, sans-serif;line-height:20px;padding-top:"+r+";text-align:center;overflow: hidden;"+A;v.title=B.alt;v.innerHTML=B.name;if(d.get("mapTypeId")==x||l.toString().indexOf(u.HYBRID>
-1)&&d.get("mapTypeId")==u.HYBRID&&x==u.SATELLITE)v.style.fontWeight="bold";h.push(v);k.setUnSelectable(v);E.appendChild(v);A=document.createElement("div");A.style.cssText="color: #333;font-size:13px;background-color:#fff;border: 1px solid #717B87;position: absolute;-webkit-box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px;box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px;text-align: left;line-height:20px;z-index:-1;display:none;top:20px;left:"+q*30+"px;";(function(e,n){p.addDomListener(v,"click",function(){m&&
e==u.SATELLITE?d.setMapTypeId(u.HYBRID):d.setMapTypeId(e);for(var s=0;s<h.length;s++){h[s].style.color="#333";h[s].style.fontWeight="normal"}this.style.color="#000";this.style.fontWeight="bold";for(s=0;s<l.length;s++){var y=l[s];if(a[y])a[y].style.display="none"}if(a[e].childNodes.length){a[e].style.display="";s=a[e].getElementsByTagName("input");y=n.fullLoad?"checked":"";for(var D=0;D<s.length;D++)s[D].checked=y}});p.addDomListener(v,"mouseover",function(){if(d.get("mapTypeId")==e||d.get("mapTypeId")==
u.HYBRID&&e==u.SATELLITE)if(a[e].childNodes.length)a[e].style.display="block";this.style.backgroundColor="#E7E8E7"});p.addDomListener(v,"mouseout",function(){this.style.background="#FFF";C&&clearTimeout(C);C=setTimeout(function(){if(!F)a[e].style.display="none"},2E3)})})(x,B);var z,C,F;p.addDomListener(A,"mouseover",function(e){if(k.containsNode(this,e.target||e.srcElement)){F=true;z&&clearTimeout(z);this.style.display="block"}});p.addDomListener(A,"mouseout",function(){var e=this;F=false;z=setTimeout(function(){e.style.display=
"none"},1E3)});a[x]=A;b(B,A);E.appendChild(A);f.appendChild(E)}}m&&b(m,a[u.SATELLITE]);return f}},construct:function(){this.bindTo("loaded",this.getMap())},loaded_changed:function(){this.get("loaded")&&this.set("content",this.getControlDom())},destroy:function(){var b=this.getMap(),d=this.get("content");if(b&&d){d.parentNode.removeChild(d);this.unbind("mapTypeId")}}});i={content:null,mapTypeIds:i.isInstanceOf(j),align:i.isNumber,style:i.isNumber,map:null};c.MapTypeControl=g;c.MVCObject.publicProperties(g,
i)})(__MapNS__);(function(c){var t=c.MVCObject.checkers,p=c.Control;MVCObject=c.MVCObject;Synchronize=__MapNSImpl__.Synchronize;c.ScaleControl=__MapNSImpl__.Class(p,{initialize:function(j){j=Synchronize.fill(j,{textColor:"#333333",barColor:"#333333",printable:true});var u=document.createElement("div");u.style.width="100px";var i=document.createElement("div"),k=document.createElement("div");i.style.cssText="font:11px arial,simsun;color:"+j.textColor+";text-align:center;";k.style.cssText="position:relative;height:8px;width:84px;";
var o=document.createElement("div");o.style.cssText="position:absolute;border:1px solid #ffffff;width:1px;height:6px;background:"+j.barColor+";font-size:0;line-height:0;";o.style.left=0;var g=document.createElement("div");g.style.cssText=o.style.cssText;g.style.left="81px";var b=document.createElement("div");b.style.cssText=o.style.cssText;b.style.left="2px";b.style.width="80px";b.style.height="2px";b.style.top="2px";b.style.borderLeft="none";b.style.borderRight="none";k.appendChild(o);k.appendChild(g);
k.appendChild(b);u.appendChild(i);u.appendChild(k);j.content=u;p.apply(this,[j]);this.set("text",i);this.set("rl",o);this.set("rr",g);this.set("rm",b)},construct:function(){var j=this.get("map");this.bindTo("center",j);this.bindTo("zoomLevel",j)},destroy:function(){this.unbind("center");this.unbind("zoomLevel")},changed:function(j){var u=this.get("rr"),i=this.get("rl"),k=this.get("rm"),o=this.get("text");switch(j){case "zoomLevel":case "center":if(!this.get("zoomLevel")||!this.get("center"))return;
i=this.get("center").getLat();j=this.get("zoomLevel");if(o)o.innerHTML=__MapNSImpl__.RC.Control.ScaleText[j];i=[52,52,52,52,52,41,82,82,82,65,65,65,52,52,52,41,82,82,82][j]/Math.cos(i/180);if(o){o.style.width=i+4+"px";k.style.width=i+"px";u.style.left=i+1+"px"}break;case "textColor":if(o){j=this.get("textColor");o.style.color=j}break;case "barColor":if(u&&k&&i){j=this.get("barColor");u.style.backgroundColor=j;i.style.backgroundColor=j;k.style.backgroundColor=j}}this.redraw()}});MVCObject.publicProperties(c.ScaleControl,
{textColor:t.isString,barColor:t.isString})})(__MapNS__);(function(c){var t=__MapNSImpl__.Util,p=__MapNSImpl__.Synchronize,j=c.Event,u=[];c.ContextMenuControl=__MapNSImpl__.Class(c.Control,{initialize:function(i){i=p.fill(i,{map:null,zIndex:100});var k=document.createElement("div"),o=document.createElement("div");o.style.cssText="position:absolute;z-index:1;border:1px solid #A8B7D2;background:#FFFFFF;display:none;padding:4px 0px 4px 0px;margin:0px 0px;-moz-box-shadow:2px 2px 8px #A8B7D2;-webkit-box-shadow:2px 2px 8px #A8B7D2;";var g=document.createElement("div");
g.style.cssText="position:absolute;background:black;opacity:0.2;filter:alpha(opacity=20);border:1px solid #A8B7D2;display:none;";var b=document.createElement("table");b.cellSpacing="0";b.cellPadding="0";var d=document.createElement("tbody");b.appendChild(d);o.appendChild(b);k.appendChild(o);k.appendChild(g);i.content=k;c.Control.apply(this,[i]);this.set("tbody_",d);this.set("menu_",o);this.set("shadow_",g);this.set("targets_",[]);this.set("items_",[]);this.set("itemIndex_",0);var f=this;i=function(){f.hide()};
j.addDomListener(document.body.parentNode||document.body,"click",i);j.addDomListener(document.body.parentNode||document.body,"contextmenu",i);j.addDomListener(o,"click",function(l){j.stopEvent(l)})},construct:function(){this.destroy();var i=this.get("map");if(i){var k=this;this.set("listener_",j.addListener(i,"mousedown",function(){k.hide()}));u.push(this)}},destroy:function(){for(var i=0,k;k=u[i];i++)if(k===this){u.splice(i,1);break}this.get("listener_")&&j.removeListener(this.get("listener_"))},
hide:function(){this.get("menu_").style.display="none";this.get("shadow_").style.display="none"},show:function(i){var k=this.get("map");if(k){this.set("position",i.qLatLng||null);var o=k.get("mapContainer_");o=t.getDomCoordinate(o);i=t.getMouseCoordinate(i);var g=new c.Point(i[0]-o[0],i[1]-o[1]),b=this.get("menu_");i=b.style;o=this.get("shadow_").style;i.display="";var d=b.offsetWidth;b=b.offsetHeight;k=k.getViewSize();var f=g.getX();g=g.getY();if(f-d>=0&&f+d>k.getWidth())f-=d;if(g-b>=0&&g+b>k.getHeight())g-=
b;i.left=f+"px";i.top=g+"px";if(t.Browser().ie!==0){o.left=f+1+"px";o.top=g+1+"px";o.width=d+"px";o.height=b+"px";o.display=""}for(k=0;i=u[k];k++)i!==this&&i.hide()}},addTarget:function(i){for(var k=this.get("targets_"),o=0,g;g=k[o];o++)if(g.target===i)return;o={target:i,listener:null};var b=this;o.listener=j.addListener(i,"contextmenu",function(d){b.show(d);j.stopEvent(d);return false});k.push(o)},removeTarget:function(i){for(var k=this.get("targets_"),o=0,g;g=k[o];o++)if(g.target===i){j.removeListener(g.listener);
k.splice(o,1);break}},addSeparator:function(){this.get("items_").push({content:"separator",type:1});var i=this.get("itemIndex_")+1;this.set("itemIndex_",i);this.renderItems();return i-1},addItem:function(i,k){this.get("items_").push({content:i,handler:k,type:0});var o=this.get("itemIndex_")+1;this.set("itemIndex_",o);this.renderItems();return o-1},removeItem:function(i){var k=this.get("items_");k[i]&&(k[i].content=null);this.renderItems()},disableItem:function(i){var k=this.get("items_");k[i]&&(k[i].disabled=
true);this.renderItems()},enableItem:function(){var i=this.get("items_");i[index]&&(i[index].disabled=false);this.renderItems()},renderItems:function(){for(var i,k,o=this,g=this.get("items_"),b=g.length-1;b>=0;--b)if(g[b].content){if(g[b].dom)k=g[b].dom;else{i=document.createElement("tr");k=document.createElement("td");i.appendChild(k);k.style.cssText="white-space:nowrap;font-size:12px;color:#4B6AA3;";g[b].dom=k;this.get("tbody_").appendChild(i)}j.clearListeners(k);if(g[b].type==0){k.innerHTML=g[b].content;
k.style.padding="3px 18px";k.style.margin="0px 0px";k.style.lineHeight="18px";if(g[b].disabled){k.style.color="#999999";k.style.cursor="default"}else{k.style.color="#4B6AA3";k.style.cursor="pointer";j.addDomListener(k,"mouseover",function(){this.style.color="#4B6AA3";this.style.background="#E9EDF4"});j.addDomListener(k,"mouseout",function(){this.style.color="#4B6AA3";this.style.background="#FFFFFF"});j.addDomListener(k,"click",function(d){return function(f){o.hide();d&&d(f,o.get("position"));j.stopEvent(f)}}(g[b].handler))}}else{k.height=
"1px";k.style.background="#E6ECF4"}}else{(i=g[b].dom)&&__MapNSImpl__.Util.removeNode(i.parentNode);g[b]=null}g=this.get("shadow_").style;b=this.get("menu_");g.width=b.offsetWidth+"px";g.height=b.offsetHeight+"px"}})})(__MapNS__);(function(c){var t=__MapNSImpl__.Synchronize,p=c.Event,j=__MapNSImpl__.Config,u=c.Control;c.ZoomHintControl=__MapNSImpl__.Class(u,{initialize:function(i){var k="background-image:url("+(j.domain+"imgs/ctrls.png")+");background-repeat:no-repeat;overflow:hidden;font-size:1px; position:absolute;width:7px;height:7px;",o=['<div style="position:absolute;z-index:0;top:0px;left:0px;overflow:hidden;display:none;">'];o.push('<div style="'+k+'top:0;left:0;"></div>');o.push('<div style="'+k+'top:0;right:0;"></div>');
o.push('<div style="'+k+'bottom:0;left:0;"></div>');o.push('<div style="'+k+'bottom:0;right:0;"></div>');o.push("</div>");o=o.join("");i=t.fill(i,{content:o,zIndex:0});u.apply(this,[i])},getControlDom:function(){var i="background-image:url("+(j.domain+"imgs/ctrls.png")+");background-repeat:no-repeat;overflow:hidden;font-size:1px; position:absolute;width:7px;height:7px;",k=['<div style="position:absolute;z-index:0;top:0px;left:0px;overflow:hidden;display:none;">'];k.push('<div style="'+i+'top:0;left:0;"></div>');
k.push('<div style="'+i+'top:0;right:0;"></div>');k.push('<div style="'+i+'bottom:0;left:0;"></div>');k.push('<div style="'+i+'bottom:0;right:0;"></div>');k.push("</div>");return k=k.join("")},draw:function(){var i=this.get("targetZoom"),k=this.get("zoomLevel")-i;if(k!==0){var o=this.get("content"),g=this.get("map"),b=this.get("container_");i=this.get("focusPixel");if(o&&i&&g){b=b.lastChild;o=this.get("zoomAnimation");(g=g.get("moveAnimation_"))&&g.stop();var d=k>0?true:false;k=Math.ceil(d?60:120);
g=Math.max(30,k/(4/3));var f=b.style;f.width=k+"px";f.height=g+"px";f.display="";b=b.children;if(d){b[0].style.backgroundPosition="0 0";b[1].style.backgroundPosition="-7px 0";b[2].style.backgroundPosition="0 -7px";b[3].style.backgroundPosition="-7px -7px"}else{b[0].style.backgroundPosition="-7px -7px";b[1].style.backgroundPosition="0 -7px";b[2].style.backgroundPosition="-7px 0";b[3].style.backgroundPosition="0 0"}this.set("position",i);f.left=i.x-k+"px";f.top=i.y-g+"px";if(!o){var l=this;o=new c.Fx({duration:0.3,
fps:40,method:c.Fx.easeInQuad,callback:function(a){var h=l.get("position");f.width=a[0]+"px";f.height=a[1]+"px";f.left=h.x-a[0]/2+"px";f.top=h.y-a[1]/2+"px"}});this.set("zoomAnimation",o);p.addListener(o,"end",function(){setTimeout(function(){f.display="none"},200)})}if(d){i=[k,g];b=[2*k,2*g]}else{i=[k,g];b=[k/2,g/2]}o.set("begins",i);o.set("ends",b);o.start()}}},changed:function(i){switch(i){case "zoomLevel":this.redraw()}},construct:function(){var i=this.get("map");this.destroy();if(i){this.set("content",
this.getControlDom());this.bindTo("focusPixel",i);this.bindTo("zoomLevel",i);this.bindTo("targetZoom",i)}},destroy:function(){var i=this.getMap(),k=this.get("content");i&&k&&k.parentNode&&k.parentNode.removeChild(k);this.unbind("focusPixel");this.unbind("zoomLevel");this.unbind("targetZoom");this.unbind("zoomAnimation");this.set("focusPixel",null);this.set("zoomLevel",null);this.set("zoomAnimation",null)}})})(__MapNS__);(function(c){var t=__MapNSImpl__.Util,p=c.Event,j=c.MVCObject.checkers,u=c.Point,i=c.Size,k=c.Control,o=c.Map,g=__MapNSImpl__.Synchronize;c.OverviewMap=__MapNSImpl__.Class(MVCObject,{initialize:function(b,d){MVCObject.apply(this);d=g.fill(d,{center:null,zoom:null,zoomAdd:4});this.setOptions(d);this.set("container_",b);var f=new o(b,{__hideLogo__:true,zoomInByDblClick:false,draggable:false,scrollWheel:false});d.center&&f.setDraggable(false);this.set("miniMap",f);var l="border-width:1px;border-style:solid;border-color:#88F #115 #115 #88F;position:absolute;",
a=t.createDiv(l);t.setUnSelectable(a);new k({map:f,content:a});l="border:1px solid #44B;overflow:hidden;width:100%;height:100%";var h=t.createDiv(l);a.appendChild(h);l="background-color:#66C;width:100%;height:100%";l=t.createDiv(l);t.setOpacity(l,0.3);h.appendChild(l);h=a.cloneNode(true);new k({map:f,content:h});t.setOpacity(h.firstChild.firstChild,0);t.setCursorStyle(h,"grab","default");this.set("rectBorder",a);this.set("rectBack",h);this.enable()},initRect:function(){var b=this.get("map"),d=this.get("miniMap"),
f=b.getBounds(),l=d.get("mapCanvasProjection_"),a=l.fromLatLngToContainerPixel(f.getSouthWest());f=l.fromLatLngToContainerPixel(f.getNorthEast());l=b.get("lastZoom")-b.get("zoomLevel");l=l>0?l<<2:1;a=[(f.x-a.x)/l,(a.y-f.y)/l];f=d.getViewSize();var h=b.getViewSize();l=f.getWidth()/h.getWidth();h=f.getHeight()/h.getHeight();l=[10/l,12/h];f=[f.getWidth()/2,f.getHeight()/2];if(a[0]<l[0])a[0]=l[0];if(a[1]<l[1])a[1]=l[1];if(a[0]>f[0])a[0]=f[0];if(a[1]>f[1])a[1]=f[1];this.set("rectSize",a);this.set("units",
Math.pow(2,d.getZoomLevel()-b.getZoomLevel()));f=this.get("rectBack");l=this.get("rectBorder");if(b.get("zoomLevel")<=3){f.style.display="none";l.style.display="none"}else{f.style.display="";l.style.display=""}b=b.getCenter();d.set("center",b);d.set("zoomLevel",this.get("detalZoom"));this.setRectPosition(f,b);t.setSize(f,a);this.setRectPosition(l,b);t.setSize(l,a)},setRectPosition:function(b,d){var f=this.get("rectSize"),l=this.get("miniMap");if(f){l=l.get("mapCanvasProjection_").fromLatLngToContainerPixel(d);
t.setPosition(b,[l.x-f[0]/2,l.y-f[1]/2])}},onMapMove:function(){var b=this.get("map");this.get("miniMap");if(b){var d=b.get("zooming_");b.get("zoomAnimation_");d||this.setRectPosition(this.get("rectBorder"),b.getCenter());(b=this.get("dragLatLng"))&&this.setRectPosition(this.get("rectBack"),b)}},onMapMoveEnd:function(b){var d=this.get("miniMap"),f=this.get("map"),l=this.get("detalZoom");if(b&&(b=="m_drag"||b=="m_auto"||b=="m_zoom"))d.zoomTo(l,f.getCenter());d.zoomTo(l)},onRectMouseDown:function(b){p.stopEvent(b);
this.resetRect(b);this.get("dragObject")&&this.onRectMouseUp(b);var d=this.get("rectBack");t.setCursorStyle(d,"grabbing","move");this.set("dragObject",{startPosition:[parseInt(d.style.left),parseInt(d.style.top)],preMove:[0,0],startPoint:[b.clientX,b.clientY],timeout:window.setInterval(t.callback(this,this.onRectMouseMove),16),moveListener:p.bindDom(document,"mousemove",this,this.onRectMouseMove),upListener:p.bindDom(document,"mouseup",this,this.onRectMouseUp)})},onRectMouseMove:function(b){var d;
if(typeof b!="object")d=this.get("dragEvent");else this.set("dragEvent",[b.clientX,b.clientY]);if(d){b=this.get("dragObject");t.setPosition(this.get("rectBack"),this.getDragPoint(d));d=this.get("miniMap");var f=d.getViewSize(),l=this.get("moveSize"),a=d.get("mapCanvasProjection_");f=new u(f.getWidth()/2+l[0],f.getHeight()/2+l[1]);a=a.fromContainerPixelToLatLng(f);d.setCenter(a);b.preMove[0]+=l[0];b.preMove[1]+=l[1]}},getDragPoint:function(b){var d=this.get("dragObject"),f=this.get("rectSize");b=[d.startPosition[0]-
d.startPoint[0]+b[0],d.startPosition[1]-d.startPoint[1]+b[1]];d=[0,0];var l=this.get("miniMap").getViewSize();if(b[0]<0){b[0]=0;d[0]=-2}if(b[1]<0){b[1]=0;d[1]=-2}if(b[0]>l.getWidth()-f[0]){b[0]=l.getWidth()-f[0]-3;d[0]=2}if(b[1]>l.getHeight()-f[1]){b[1]=l.getHeight()-f[1]-3;d[1]=2}this.set("moveSize",d);return b},onRectMouseUp:function(b){p.stopEvent(b);var d=this.get("rectBack");t.setCursorStyle(d,"grab","default");d=this.get("dragObject");p.removeListener(d.moveListener);p.removeListener(d.upListener);
window.clearInterval(d.timeout);b=this.getDragPoint([b.clientX,b.clientY]);var f=this.get("miniMap"),l=f.getViewSize(),a=f.get("mapCanvasProjection_");l=new u(l.getWidth()/2+b[0]-d.startPosition[0],l.getHeight()/2+b[1]-d.startPosition[1]);this.set("dragLatLng",a.fromContainerPixelToLatLng(l));f.moveBy(new i(-b[0]+d.startPosition[0],-b[1]+d.startPosition[1]));f=this.get("map");a=this.get("units");f.moveBy(new i((-b[0]+d.startPosition[0]+d.preMove[0])*a,(-b[1]+d.startPosition[1]+d.preMove[1])*a));this.set("dragEvent",
null);this.set("dragObject",null)},resetRect:function(b){var d=this.get("miniMap"),f=this.get("map");if(f){this.set("dragLatLng",null);d=d.getCenter();var l=f.get("zooming_");if(b&&!l&&(b=="m_drag"||b=="m_auto"||b=="m_zoom"))f.moveTo(d)}},changed:function(b){this.get("miniMap");var d=this.get("map"),f=this.get("zoomAdd");switch(b){case "zoomLevel":b=d.get("zoomLevel")-f;if(b<=0)b=f+b;else if(b<=f)b=f;this.set("detalZoom",b)}},enable:function(){var b=this.get("listeners");if(!b){b=this.get("rectBack");
var d=this.get("miniMap"),f=this.get("map");if(f){b=[p.bindDom(b,"mousedown",this,this.onRectMouseDown),p.bind(f,"moveend",this,this.onMapMoveEnd),p.bind(f,"resize",this,this.initRect),p.bind(f,"center_changed",this,this.onMapMove),p.bind(d,"center_changed",this,this.onMapMove),p.bind(d,"mouseup",this,this.initRect),p.bind(d,"moveend",this,this.resetRect)];this.set("listeners",b);this.bindTo("center",f);this.bindTo("zoomLevel",f);this.initRect()}}},disable:function(){var b,d=this.get("listeners");
if(d){for(;b=d.pop();)p.removeListener(b);this.set("listeners",null);this.unbind("zoomLevel")}}});c.MVCObject.publicProperties(c.OverviewMap,{visible:j.isBoolean,map:null})})(__MapNS__);(function(c){var t=__MapNSImpl__.Synchronize,p=__MapNSImpl__.Util,j=__MapNSImpl__.Config,u=c.Event,i=c.Size,k=c.ALIGN,o=c.OverviewMap,g=p.setCssSprite;Control=c.Control;var b={url:j.domain+"imgs/ctrls.png","0":{open:[37,33,20,20],close:[37,13,20,20]},"1":{open:[111,12,20,20],close:[131,13,20,20]},"2":{open:[19,33,20,20],close:[19,13,20,20]},"3":{open:[111,32,20,20],close:[130,32,20,20]},"4":{open:[37,33,20,20],close:[37,13,20,20]},"5":{open:[131,32,20,20],close:[112,32,20,20]},"6":{open:[56,33,20,
20],close:[56,13,20,20]},"7":{open:[131,13,20,20],close:[111,12,20,20]},"8":{open:[0,33,20,20],close:[0,14,20,20]}};c.OverviewMapControl=__MapNSImpl__.Class(Control,{initialize:function(d){var f={align:8,size:new i(120,120),zoomAdd:4,padding:4,opened:true};d=t.fill(d,f);Control.apply(this,[d])},getControlDom:function(){var d="verflow:hidden;",f=p.createDiv(d),l=function(m){u.stopEvent(m);return false};u.addDomListener(f,"mousewheel",l);u.addDomListener(f,"DOMMouseScroll",l);p.setZIndex(f,800);d="overflow:hidden;background-color:#fff;border:solid 1px #979797;position:absolute;";
l=p.createDiv(d);f.appendChild(l);this.set("resizeDiv",l);var a=this.get("size"),h=this.get("padding");d=p.createDiv(d);p.setSize(d,a);p.setPosition(d,[h,h]);l.appendChild(d);this.set("mapDiv",d);a=[a.width+h*2,a.height+h*2];p.setSize(f,[a[0]+2,a[1]+2]);p.setSize(l,a);l=document.createElement("div");l.style.position="absolute";p.setCursorStyle(l,"pointer");u.bindDom(l,"click",this,this.changeView);u.addDomListener(l,"dblclick",u.stopEvent);u.addDomListener(l,"mousedown",u.stopEvent);p.setZIndex(l,
1E4);f.appendChild(l);p.setSize(l,[20,20]);this.set("button",l);return f},changeView:function(){var d=this.get("slideAnimation"),f=this.get("resizeDiv"),l=this.get("content"),a=this.get("button"),h=this.get("opened");this.get("map");var m=this;if(!d){d=new c.Fx({duration:0.3,fps:60,method:c.Fx.easeInQuad,callback:function(x){var B=m.get("align");if(B!=k.TOP&&B!=k.BOTTOM)f.style.width=x[0]+"px";if(B!=k.RIGHT&&B!=k.LEFT)f.style.height=x[1]+"px"}});this.set("slideAnimation",d);u.addListener(d,"end",
function(){var x=!m.get("opened");m.set("opened",x);var B=d.get("ends"),E=m.get("align");if(x){g(a,b.url,b[E].close);if(E==k.RIGHT||E==k.LEFT)B=[0,B[1]];else if(E==k.TOP||E==k.BOTTOM)B=[B[0],0]}else{g(a,b.url,b[E].open);B=E==k.RIGHT||E==k.LEFT?[0,w[1]+2]:E==k.TOP||E==k.BOTTOM?[w[0]+2,0]:[B[0]+2,B[1]+2]}p.setSize(l,B)})}var q,w=this.get("size");q=this.get("padding");w=[w.width+q*2,w.height+q*2];if(h){h=[w[0],w[0]];q=[0,0]}else{h=[0,0];q=[w[0],w[0]]}d.set("begins",h);d.set("ends",q);d.start()},draw:function(){var d=
this.get("content"),f=this.get("map");if(d&&d.parentNode){var l=this.get("mapDiv"),a=this.get("button"),h=this.get("overviewMap");if(!h){h=new o(l,{map:f});this.set("overviewMap",h)}f=this.get("align");d=d.parentNode.style;l=l.style;h=this.get("resizeDiv");var m=this.get("padding");if(d){var q=this.get("opened"),w=this.get("size");m=this.get("padding");w=[w.width+m*2,w.height+m*2];if(q)g(a,b.url,b[f].close);else{g(a,b.url,b[f].open);w=f==k.RIGHT||f==k.LEFT?[0,w[1]]:f==k.TOP||f==k.BOTTOM?[w[0],0]:
[0,0];p.setSize(h,w)}q=f==4?0:f;p.setPositionByAlign(h,q,new i(0,0));p.setPositionByAlign(a,q,new i(0,0));switch(f){case k.BOTTOM_RIGHT:d.right="-1px";d.bottom="-1px";l.left=m+m/2+"px ";l.top=m+m/2+"px";break;case k.TOP_LEFT:d.left="-1px";d.top="-1px";l.left=m-m/2-2+"px ";l.top=m-m/2-2+"px";break;case k.TOP_RIGHT:d.right="-1px";d.top="-1px";l.left=m+m/2+"px ";l.top=m-m/2-2+"px";break;case k.BOTTOM_LEFT:d.left="-1px";d.bottom="-1px";l.left=m-m/2-2+"px ";l.top=m+m/2+"px";break;case k.RIGHT:d.right=
"-2px";l.left=m+m/2-1+"px ";l.top=m-m/2+1+"px";break;case k.LEFT:d.left="-2px";l.left=m-m/2-1+"px ";l.top=m-m/2+1+"px";break;case k.TOP:d.top="-2px";l.left=m+"px ";l.top=m-m/2+"px";break;case k.BOTTOM:d.bottom="-2px";l.left=m+"px ";l.top=m+m/2+"px"}}}},construct:function(){var d=this.get("map");this.destroy();d&&this.set("content",this.getControlDom())},destroy:function(){var d=this.getMap(),f=this.get("content");if(d&&f&&f.parentNode){p.removeNode(f);if(d=this.get("overviewMap")){d.set("map",null);
d.disable();this.set("overviewMap",null)}}}})})(__MapNS__);(function(c){c.GeocoderResult=function(){this.location=null;this.address="";this.addressComponents={streetNumber:"",street:"",district:"",city:"",province:""};this.similarResults=null}})(__MapNS__);(function(c){c.GeocoderStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT"}})(__MapNS__);(function(c){var t=c.BaseService,p=c.GeocoderResult,j=c.LatLng,u=c.GeocoderStatus;c.Geocoder=__MapNSImpl__.Class(t,{initialize:function(){t.apply(this);this.queryType="geoc"},geocode:function(i,k){i&&this.request({request:i,callback:k})},request:function(i){var k=c.MVCObject.checkers,o=i.request,g=[],b=o.address;o=o.location;if(!k.isNull(b)&&!k.isNull(o)){if(k.isString(b)){this.queryType="geoc";g.push("addr="+encodeURIComponent(b))}}else{if(k.isString(b)){this.queryType="geoc";g.push("addr="+encodeURIComponent(b))}if(k.isInstanceOf(j)(o)||
k.isInstanceOf(j)(b)){o=o||b;this.queryType="rgeoc";k=o.getLng();b=o.getLat();g.push("lnglat="+k+","+b)}}this.send(g,i)},onResult:function(i){var k=i.callback,o=i.request,g=i.object;i=new p;if(g){var b=g.info;g=g.detail;var d;d=b.error;switch(b.type){case 45:if(d==-2)d=u.NO_RESULTS;else if(d==0){var f=g.name||"",l=g.city||"",a=g.province||"",h=g.district||"";i.address=a+l+h+f;i.location=new j(g.pointy,g.pointx);i.similarity=g.similarity;i.pcd_conflict_flag=g.pcd_conflict_flag;i.gps_type=g.gps_type;
i.addressComponents={street:f,district:h,city:l,province:a,country:g.country||"\u4e2d\u56fd"};i.similarResults=[];d=u.OK}else if(d==-1)d=u.ERROR;else if(d==-3)d=u.OVER_QUERY_LIMIT;break;case 46:if(d==-2)d=u.NO_RESULTS;else{var m=g.results,q=m.length;if(q){var w="";for(var x=g=b=d="",B=0;B<q;B++){var E=m[B];switch(E.dtype){case "AD":w=E.name;break;case "ST":b=E.name;break;case "ST_NO":d=E.name;break;case "TOWN":g=E.name;break;case "VILLAGE":x=E.name}}i.address=w.replace(/,/g,"")+(d?d:b?b:g+x);i.location=
o.location;o=w.split(",");if(o.length==4){f=o[0];a=o[1];l=o[2];h=o[3]}if(o.length==3){f=o[0];a=o[1];l=o[1];h=o[2]}i.addressComponents={village:x,town:g,streetNumber:d,street:b,district:h,city:l,province:a,country:f};d=u.OK}else d=u.NO_RESULTS}break;case 1E4:d=u.ERROR;break;case 10004:d=u.INVALID_REQUEST;break;default:d=u.UNKNOWN_ERROR}}k&&k(i,d);delete k}})})(__MapNS__);(function(c){c.SearchMode={NORMAL:"NORMAL",BUS:"BUS"}})(__MapNS__);(function(c){c.SearchResult=function(){this.pois=[];this.totalNum=0;this.pageCapacity=10;this.pageIndex=0;this.cityList=null}})(__MapNS__);(function(c){c.SearchStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",REGIONS:"REGIONS",CITIES:"CITIES"}})(__MapNS__);(function(c){var t=c.MVCObject.checkers,p=c.Event,j=__MapNSImpl__.Util,u=c.Paging,i=c.MVCObject,k=__MapNSImpl__.Synchronize,o=c.Marker;j.Browser();var g=c.MarkerDecoration;c.SearchRenderer=__MapNSImpl__.Class(i,{initialize:function(b){i.apply(this);b=k.fill(b,{map:null,searchResult:null,markerOptions:{},autoViewport:true,panel:null});this.set("markers",[]);this.setOptions(b)},renderExcute:function(){if(this.get("paging")){this.get("paging").setPageSize(this.get("searchResult").pageCapacity);this.get("paging").setTotalRows(this.get("searchResult").totalNum)}this.pageTurning(this.get("searchResult").pageIndex)},
clearOverlays:function(b){for(var d;d=b.pop();){p.clearListeners(d,"click");d.setMap(null)}},clearMarkers:function(){this.get("markers")&&this.clearOverlays(this.get("markers"))},clearPanel:function(){for(var b=this.get("panel");b&&b.hasChildNodes();)b.removeChild(b.firstChild);this.set("poiLiArray",null);this.get("poiOl");this.get("pageContainer")},clearPanelContent:function(){for(var b=this.get("poiOl");b&&b.hasChildNodes();){p.clearListeners(b.firstChild,"click");b.removeChild(b.firstChild)}for(b=
this.get("pageContainer");b&&b.hasChildNodes();){p.clearListeners(b.firstChild,"click");b.removeChild(b.firstChild)}},pageTurning:function(b){var d=this.get("searchResult").pois,f=new c.LatLngBounds,l;this.initForPageTurning();this.noResultHandler(d.length);for(l=0;l<d.length;l++){f.extend(d[l].latLng);this.get("markers")[l].setMap(this.get("map"));this.get("markers")[l].setPosition(d[l].latLng);var a=d[l],h=a.name,m;switch(a.type){case 0:m=a.address;break;case 1:m="\u516c\u4ea4\u8f66\u7ad9";break;
case 2:m="\u5730\u94c1\u7ad9";break;case 3:m="";break;case 4:m=""}this.get("poiLiArray")[l].childNodes[0].innerHTML=h+":    ";this.get("poiLiArray")[l].childNodes[0].style.fontWeight="bold";this.get("poiLiArray")[l].childNodes[1].innerHTML=m;this.get("poiLiArray")[l].style.visibility="visible";this.get("autoViewport")&&this.get("map").fitBounds(f)}for(;l<this.get("poiLiArray").length;){this.get("poiLiArray")[l].childNodes[0].innerHTML="";this.get("poiLiArray")[l].childNodes[1].innerHTML="";this.get("poiLiArray")[l].style.visibility=
"hidden";this.get("markers")[l].setMap(null);l++}this.get("paging").pageUndate(b+1)},noResultHandler:function(b){this.get("errorDiv").style.display=b==0?"block":"none"},onMarkerClick:function(b,d){var f=[[this.get("searchResult").pois[b],d,b]];p.trigger(this,"item_clicked",f)},onMouseOver:function(b,d){var f=[[this.get("searchResult").pois[b],d,b]];p.trigger(this,"item_mouseover",f)},onMouseOut:function(b,d){var f=[[this.get("searchResult").pois[b],d,b]];p.trigger(this,"item_mouseout",f)},getMarkers:function(){return this.get("markers")},
initForPageTurning:function(){if(!this.get("poiLiArray")){for(var b=[],d=[],f=0;f<this.get("searchResult").pois.length;f++){var l=document.createElement("li"),a=document.createElement("span"),h=document.createElement("span");l.appendChild(a);l.appendChild(h);l.style.cursor="pointer";this.get("poiOl").appendChild(l);b.push(l);a=this.get("markerOptions");a.map=this.get("map");a=new o(a);new g({content:f+1,margin:new c.Size(0,-4),align:c.ALIGN.CENTER,marker:a});d.push(a);this.set("eventIndex",f);this.get("searchResult");
p.bind(a,"click",this,j.callback(this,this.onMarkerClick,[f,a]));p.bindDom(l,"click",a,function(){p.trigger(this,"click")});p.bind(a,"mouseover",this,j.callback(this,this.onMouseOver,[f,a]));p.bindDom(l,"mouseover",a,function(){p.trigger(this,"mouseover")});p.bind(a,"mouseout",this,j.callback(this,this.onMouseOut,[f,a]));p.bindDom(l,"mouseout",a,function(){p.trigger(this,"mouseout")})}this.set("poiLiArray",b);this.set("markers",d)}},initForPanel:function(){var b=this.get("panel"),d=document.createElement("ol"),
f=document.createElement("div"),l=document.createElement("div");l.innerHTML="\u5f53\u524d\u641c\u7d22\u65e0\u7ed3\u679c\u3002";l.style.color="red";l.style.display="none";this.set("errorDiv",l);l=new u;l.set("pageTarget",true);l.set("panel",f);this.set("paging",l);this.get("paging").get("tempID");this.set("pageContainer",f);this.set("poiOl",d);this.set("initEnd",true);b.appendChild(this.get("errorDiv"));b.appendChild(this.get("poiOl"));b.appendChild(this.get("pageContainer"))},updatePanel:function(){this.clearPanel();
null==this.get("panel")?this.clearPanelContent():this.initForPanel()},changed:function(b){switch(b){case "map":this.get("map")||this.get("markers")&&this.clearOverlays(this.get("markers"));break;case "panel":this.updatePanel();break;case "markerOptions":this.get("markerOptions")&&(this.get("markerOptions").zIndex=1)}},searchResult_changed:function(){var b=this.get("searchResult")?this.get("searchResult").pageIndex:0;if(this.get("searchResult")){var d=this.get("oldPageCapacity"),f=this.get("searchResult").pois.length;
!d&&this.set("oldPageCapacity",f);if(f!=d){this.clearMarkers();this.clearPanel();this.initForPanel();this.set("oldPageCapacity",f)}}p.trigger(this,"pageIndex_changed",[b])},getLiNum:function(b){for(var d=b.parentNode.getElementsByTagName("li"),f=0,l=0;l<d.length;l++)if(b==d[l]){f=l;break}return f}});t={map:t.isInstanceOfOrNull,panel:t.isHtmlControlOrNull,searchResult:t.isInstanceOf(c.searchResult),markerOptions:t.isObject,autoViewport:t.isBoolean};i.publicProperties(c.SearchRenderer,t)})(__MapNS__);(function(c){var t=c.BaseService,p=c.MVCObject,j=c.LatLng,u=c.LatLngCircles,i=c.LatLngBounds,k=c.SearchResult,o=c.Poi,g=c.Region,b=c.SearchMode,d=c.SearchStatus,f=__MapNSImpl__.Config,l=c.Geocoder,a=__MapNSImpl__.Synchronize,h=c.MVCObject.checkers,m=[];c.SearchService=__MapNSImpl__.Class(t,{initialize:function(q){t.apply(this);this.defaultCapacity=10;this.defaultPage=0;this.queryType=f.QueryType.POI;q=a.fill(q,{renderer:null});this.setOptions(q)},search:function(q,w){q&&this.request({request:q,callback:w})},
setPageForRender:function(q){var w=this.get("request");if(q>-1)w.pageIndex=q;return w},getNewIndex:function(q,w,x,B){return B?parseInt(this.get("totalNum")/x):Math.floor(Math.floor((q*w+1+q*(w+1))/2)/x)},isLastPageIndex:function(q,w,x){return parseInt(x/q)==w},request:function(q){var w=p.checkers,x=q.request,B=x.dataProvider,E=x.keyword,A=x.region,r=x.level||11,v=x.noquery,z=x.forceBounds,C=x.searchMode,F=[],e="";this.set("request",x);if(null==this.get("oldCapacity"))this.set("oldCapacity",x.pageCapacity||
this.defaultCapacity);if(this.get("renderer")){var n=x.pageCapacity||this.defaultCapacity,s=x.pageIndex||this.defaultPage;if(this.get("oldCapacity")!=n){var y=this.isLastPageIndex(this.get("oldCapacity"),s,this.get("totalNum"));x.pageIndex=this.getNewIndex(this.get("oldCapacity"),s,n,y);this.set("oldCapacity",n)}}if(!w.isNull(B))if(w.isString(B)){n=B.split(";");s=n.length;if(s>1)for(B=0;B<s;B++)e+="||"+encodeURIComponent(n[B])+"||";else e="||"+encodeURIComponent(B)+"||"}var D;if(w.isNull(A))F.push("c=1");
else{if(w.isString(A)){F.push("c="+encodeURIComponent(A));F.push("l="+r)}this.queryType=f.QueryType.POI;if(!C||C===b.NORMAL){if(w.isInstanceOf(i)(A)){this.queryType=f.QueryType.SYN;n=A.getSouthWest();B=A.getNorthEast();D=n.getLng();n=n.getLat();s=B.getLng();B=B.getLat();F.push("b="+D+","+n+","+s+","+B);D=A.getCenter();if(!z)this.queryType=f.QueryType.POI;F.push("l="+r)}if(w.isInstanceOf(u)(A)){this.queryType=f.QueryType.RN;D=A.getCenter();r=A.getRadius();z=D.getLng();B=D.getLat();F.push("px="+z);
F.push("py="+B);F.push("r="+r);if(v||E=="*"){E="*";F.push("lc=8&ro=1")}}}}if(w.isString(E)){v=encodeURIComponent(E);if(e){F.push("sp=1");v=E+e}F.push("wd="+v)}E=x.pageIndex||this.defaultPage;x=x.pageCapacity||this.defaultCapacity;if(C===b.BUS){this.queryType="busls";F.push("tp=0")}F.push("pn="+E);F.push("rn="+x);if(w.isInstanceOf(i)(A)||w.isInstanceOf(u)(A)){var G=new l;x={location:D};m.push([x,this.queryType,F,q]);var K=this,J=function(){var N=m.shift();N&&G.geocode(N[0],function(S){K.queryType=
N[1];F.push("c="+encodeURIComponent(S.addressComponents.city||1));J();K.send(N[2],N[3])})};J()}else this.send(F,q)},onResult:function(q){var w=q.callback,x=q.request,B=q.object;q=new k;if(B){var E=B.info;B=B.detail;var A;switch(E.type){case 6:case 11:case 16:case 17:case 49:var r=B.pois;A=B.city;var v=r.length,z=[];if(v){for(B=0;B<v;B++){var C=new o,F=r[B];C.id=F.uid;C.name=F.name;C.latLng=new j(F.pointy,F.pointx);if(!x.searchMode||x.searchMode===b.NORMAL)F.addr&&(C.address=F.addr);!A&&(A={cname:x.region});
A.cname&&(C.city=A.cname);F.phone&&(C.phone=F.phone);F.zip&&(C.postcode=F.zip);F.classes&&(C.category=F.classes);C.type=F.poitype;z.push(C)}q.pois=z;q.pageIndex=x.pageIndex||this.defaultPage;q.pageCapacity=x.pageCapacity||this.defaultCapacity;q.totalNum=E.total;x=new g;x.name=A.cname;x.code=A.ccode;x.level=A.level;x.position=new j(A.pointy,A.pointx);q.region=x;q.cityList=[{city:A.cname,resultNums:E.total}];A=d.OK}else A=d.NO_RESULTS;break;case 8:x=B.result;E=[];for(B=0;B<x.length;B++){A=x[B];r=A.cities;
if(r.length)for(v=0;v<r.length;v++){A=r[v];E.push({city:A.cname,resultNums:A.cnum})}else E.push({city:A.cname,resultNums:A.cnum})}q.cityList=E;A=d.CITIES;break;case 9:E=B.area;A=B.children;r=B.parent;x=new g;v=new g;v.code=r.ccode;v.name=r.cname;x.parent=v;x.name=E.cname;x.code=E.ccode;x.level=E.level;x.position=new j(E.pointy,E.pointx);x.brief=B.brief;E=[];B=0;for(r=A&&A.length;B<r;B++){v=A[B];z=new g;z.name=v.cname;z.code=v.ccode;E.push(z)}x.children=E;q.region=x;A=d.REGIONS;break;case 1E4:A=d.ERROR;
break;case 10004:A=d.INVALID_REQUEST;break;default:A=d.UNKNOWN_ERROR}}if(null!=this.get("renderer")){this.set("totalNum",q.totalNum);this.get("renderer").set("searchResult",q);this.get("renderer").renderExcute()}w&&w(q,A);delete w},changed:function(q){switch(q){case "renderer":if(this.get("renderer")){this.get("renderer").get("paging").bindTo("pageIndex",this);this.get("renderer").get("paging").bindTo("pageTarget",this);this.get("renderer").bindTo("initEnd",this)}break;case "pageTarget":this.get("pageTarget")&&
this.search(this.setPageForRender(this.get("pageIndex")));break;case "initEnd":this.unbind("pageTarget");this.get("renderer").get("paging").bindTo("pageTarget",this);this.unbind("pageIndex");this.get("renderer").get("paging").bindTo("pageIndex",this)}}});p.publicProperties(c.SearchService,{renderer:h.isInstanceOfOrNull})})(__MapNS__);(function(c){c.LineStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.LineType={SUBWAY:2,BUS:1,FERRY:"FERRY"}})(__MapNS__);(function(c){c.LineResult=function(){this.type=this.name=this.id="";this.distance=0;this.price=this.etime=this.stime="";this.time=this.stationNum=0;this.to=this.from="";this.path=null;this.stations=[]}})(__MapNS__);(function(c){var t=c.BaseService,p=c.LatLng,j=c.LatLngBounds,u=c.LineResult,i=c.Poi,k=c.LineStatus,o=c.MVCObject.checkers;c.LineService=__MapNSImpl__.Class(t,{initialize:function(){t.apply(this);this.queryType=Config.QueryType.DT},detail:function(g,b){g&&this.request({request:g,callback:b})},request:function(g){var b=g.request.lineId,d=[];o.isString(b)&&d.push("uid="+b);d.push("tp=3");this.send(d,g)},onResult:function(g){var b=g.callback,d=g.object;g=new u;if(d){var f=d.detail;switch(d.info.type){case 18:d=
f.poi;bounds=new j;if(d){g.id=d.uid;g.name=d.name;g.type=d.poitype;g.distance=d.dist;g.stime=d.stime;g.etime=d.etime;g.price=d.price;g.stationNum=d.snum;g.from=d.from;g.to=d.to;f=this.fromSegmentToPath(d.points);g.path=f.path;g.bounds=f.bounds;f=0;for(var l=d.stations,a=l.length;f<a;f++){d=new i;var h=l[f];d.id=h.uid;d.type=h.poitype;d.name=h.name;d.latLng=new p(h.pointy,h.pointx);g.stations.push(d)}f=k.OK}else f=k.NO_RESULTS;break;case 1E4:f=k.ERROR;break;case 10004:f=k.INVALID_REQUEST;break;default:f=
k.UNKNOWN_ERROR}}b&&b(g,f);delete b}})})(__MapNS__);(function(c){c.StationStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.StationResult=function(){this.type=this.name=this.id="";this.latLng=null;this.lines=[]}})(__MapNS__);(function(c){var t=c.BaseService,p=c.LatLng,j=c.StationResult,u=c.LineResult,i=c.StationStatus;checkers=c.MVCObject.checkers;Util=__MapNSImpl__.Util;c.StationService=__MapNSImpl__.Class(t,{initialize:function(){t.apply(this);this.queryType=Config.QueryType.DT},detail:function(k,o){k&&this.request({request:k,callback:o})},request:function(k){var o=k.request.stationId,g=[];checkers.isString(o)&&g.push("uid="+o);g.push("tp=1");this.send(g,k)},onResult:function(k){var o=k.callback,g=k.object;k=new j;
if(g){var b=g.detail;switch(g.info.type){case 19:g=b.poi;b=g.lines;var d=b.length;if(d){for(var f=0;f<d;f++){var l=new u,a=b[f];l.id=a.uid;l.name=a.name;l.stime=a.stime;l.etime=a.etime;l.from=a.from;l.to=a.to;k.lines.push(l)}k.id=g.uid;k.name=g.name;k.type=g.poitype;k.latLng=new p(g.pointy,g.pointx);b=i.OK}else b=i.NO_RESULTS;break;case 1E4:b=i.ERROR;break;case 10004:b=i.INVALID_REQUEST;break;default:b=i.UNKNOWN_ERROR}}o&&o(k,b);delete o}})})(__MapNS__);(function(c){c.DirectionsPolicy={LEAST_TIME:0,AVOID_HIGHWAYS:1,LEAST_DISTANCE:2,REAL_TRAFFIC:3,PREDICT_TRAFFIC:4}})(__MapNS__);(function(c){c.DirectionsTravelMode={DRIVING:"DRIVING",WALKING:"WALKING"}})(__MapNS__);(function(c){c.DirectionsResult=function(){this.routes=[];this.policy=0;this.end=this.start=null}})(__MapNS__);(function(c){c.DirectionsRoute=function(){this.bounds=null;this.legs=[];this.distance=this.duration=null}})(__MapNS__);(function(c){c.DirectionsLeg=function(){this.duration=this.distance=null;this.steps=[];this.path=[];this.start_address="";this.start_location=null;this.end_address="";this.end_location=null}})(__MapNS__);(function(c){c.DirectionsStep=function(){this.duration=this.distance=null;this.path=[];this.roadname="";this.end_location=this.start_location=null;this.instructions="";this.placemarks=[];this.cities=[];this.turning=null}})(__MapNS__);(function(c){c.DirectionsStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",MULTI_DESTINATION:"MULTI_DESTINATION"}})(__MapNS__);(function(c){var t=c.BaseService,p=c.DirectionsResult,j=c.DirectionsStatus,u=c.DirectionsPolicy,i=c.DirectionsTravelMode,k=c.DirectionsRoute,o=c.DirectionsLeg,g=c.DirectionsStep,b=c.LatLng,d=c.Distance,f=c.Duration,l=c.Turning,a=c.Poi,h=c.LatLngBounds,m=__MapNSImpl__.Config,q=__MapNSImpl__.Util;c.DirectionsService=__MapNSImpl__.Class(c.BaseService,{initialize:function(){t.apply(this);this.routeIndex=0;this.queryType=m.QueryType.NAV},route:function(w,x){w&&this.request({request:w,callback:x})},request:function(w){var x=
w.request,B=x.region,E=[];checkers.isString(B)&&E.push("c="+encodeURIComponent(B));B=x.end;var A=x.time,r=x.time,v=x.policy;E.push("start="+this.fromDestToString(x.start));E.push("dest="+this.fromDestToString(B));!r&&(r=x.travelMode=i.DRIVING);switch(r){case "DRIVING":this.queryType=m.QueryType.NAV;break;case "WALKING":this.queryType=m.QueryType.WALK}!v&&(v=x.policy=u.LEAST_TIME);if(A&&(v===u.REAL_TRAFFIC||v===u.PREDICT_TRAFFIC))E.push("time="+A);E.push("cond="+v);this.send(E,w)},onResult:function(w){var x=
w.callback,B=w.request,E=w.object;w=new p;if(E){var A=E.info,r=E.detail;switch(A.type){case 44:var v=r.route[0],z=q.parseCoords(v.coors),C=v.distance;v=v.segmentList;var F=r.bounds;r=v&&v.length;var e=new k,n=F.split(",");F=new b(n[1],n[0]);n=new b(n[3],n[2]);F=new h(F,n);n=new o;if(r){var s=new d;s.text=this.fromDistToString(E.distance);s.value=C;C=new f;C.text=this.fromTimeToString(A.time);C.value=A.time;n.distance=s;n.duration=C;n.path=z;for(E=0;E<r;E++){var y=v[E],D=new g,G=y.coorStart;G=z.slice(G,
G+y.coorNum);if(E==0){n.start_address=y.roadName;n.start_location=G[0]}if(E==r-1){n.end_address=y.roadName;n.end_location=G[G.length-1]}var K=new d;K.text=this.fromDistToString(y.roadLength);K.value=y.roadLength;D.distance=K;K=new f;K.text=this.fromTimeToString(parseInt(y.driveTime));K.value=parseInt(y.driveTime);D.duration=K;K=new l;K.text=y.action;K.latLng=G[G.length-1];for(var J=y.kp,N=[],S=0,O=J.length;S<O;S++){var L=new a,R=J[S];L.name=R.name;L.latLng=new b(R.pointy,R.pointx);N.push(L)}D.roadname=
y.roadName;D.start_location=G[0];D.end_location=G[G.length-1];D.instructions=y.textInfo;D.path=G;D.turning=K;D.cities=y.cities;D.placemarks=N;n.steps.push(D)}e.bounds=F;e.distance=s;e.duration=C;e.legs.push(n);w.start=this.fromDestToPoi(A.start);w.end=this.fromDestToPoi(A.dest);w.traffic=!!A.navtraffic;w.policy=B.policy;w.routes.push(e);A=j.OK}else A=j.NO_RESULTS;break;case 21:B=r.start;A=r.dest;w.start=[];E=0;for(z=B?B.length:0;E<z;E++){v=B[E];w.start.push(this.fromDestToPoi(v))}w.end=[];E=0;for(z=
A?A.length:0;E<z;E++){v=A[E];w.end.push(this.fromDestToPoi(v))}A=j.MULTI_DESTINATION;break;case 1E4:A=j.ERROR;break;case 10004:A=j.INVALID_REQUEST;break;default:A=j.UNKNOWN_ERROR}}x&&x(w,A);delete x}})})(__MapNS__);(function(c){c.ActionType={BUS:"BUS",SUBWAY:"SUBWAY",WALK:"WALK"}})(__MapNS__);(function(c){c.TransferAction=function(){}})(__MapNS__);(function(c){c.TransferResult=function(){this.plans=[];this.policy=0;this.city="";this.end=this.start=null}})(__MapNS__);(function(c){c.TransferPlan=function(){this.actions=[];this.bounds={};this.lines=[];this.walks=[];this.stations=[];this.distance=this.duration=null}})(__MapNS__);(function(c){c.TransferPolicy={LEAST_TIME:0,LEAST_TRANSFER:1,LEAST_WALKING:2,MOST_ONE:3,NO_SUBWAY:4}})(__MapNS__);(function(c){c.TransferStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS",NO_SUPPORT:"NO_SUPPORT",MULTI_DESTINATION:"MULTI_DESTINATION"}})(__MapNS__);(function(c){var t=c.BaseService,p=c.LatLng,j=c.LatLngBounds,u=c.Poi,i=c.LineResult,k=c.TransferResult,o=c.TransferPlan,g=c.TransferStatus,b=c.TransferPolicy,d=c.TransferAction,f=c.ActionType,l=c.LineType,a=c.DirectionsLeg,h=c.DirectionsStep,m=c.Distance,q=c.Duration,w=c.Turning,x=c.MVCObject.checkers,B=__MapNSImpl__.RC.Transfer,E=__MapNSImpl__.Config;c.TransferService=__MapNSImpl__.Class(t,{initialize:function(){t.call(this);this.queryType=E.QueryType.BUS},plan:function(A,r){A&&this.request({request:A,
callback:r})},request:function(A){var r=A.request,v=r.region,z=[];x.isString(v)&&z.push("c="+encodeURIComponent(v));v=r.end;var C=r.policy;z.push("start="+this.fromDestToString(r.start));z.push("dest="+this.fromDestToString(v));!C&&(C=r.policy=b.LEAST_TIME);x.isNull(C)||(C===b.NO_SUBWAY?z.push("nosub="+C):z.push("cond="+C));this.send(z,A)},onResult:function(A){var r=A.callback,v=A.request,z=A.object;A=new k;if(z){var C=z.info;z=z.detail;A.city=v.region;A.policy=v.policy;switch(C.type){case 15:var F=
z.length,e=[];if(F){for(v=0;v<F;v++){var n=new o,s=z[v],y=s.intervals,D=s.trans,G=[],K=[],J=[],N=[],S=new j,O=0,L=0,R=0;for(s=D.length;R<s;R++){var Q=new d,T=[],P=null;if(R>0){var H=y[R-1][0];P=new i;P.id=H.uid;P.name=H.name;P.type=H.type;T.push(B[0]+P.name);var I=new m;I.value=H.distance;I.text=this.fromDistToString(H.distance);P.distance=I;P.stationNum=H.station_num;T.push(B[1]+P.stationNum+B[2]);I=new q;I.value=H.time;I.text=this.fromTimeToString(H.time);P.duration=I;I=this.fromSegmentToPath(H.segment);
P.path=I.path;P.bounds=I.bounds;S.union(I.bounds);G.push(P);O+=H.distance;L+=H.time;Q.data=P}I=D[R];var M,U=this.fromTranToLeg_(I);if(R==0){M=this.fromTranToStation_(I.geton);H=y[R][0];M.type=H.type;J.push(M)}if(R>0&&R<s-1){M=this.fromTranToStation_(I.getoff);H=y[R-1][0];M.type=H.type;J.push(M);M=this.fromTranToStation_(I.geton);H=y[R][0];M.type=H.type;J.push(M);T.push(B[3]+I.getoff.name)}if(R==s-1){M=this.fromTranToStation_(I.getoff);H=y[R-1][0];M.type=H.type;J.push(M);T.push(B[3]+I.getoff.name)}if(P){P.from=
D[R-1].geton.name;P.to=D[R].getoff.name;Q.instructions=T.join("\uff0c");Q.type=f.BUS;if(P.type==l.SUBWAY)Q.type=f.SUBWAY;N.push(Q)}if(U.distance.value){Q=new d;T=[];T.push(U.steps[0].instructions);T.push(B[3]+(I.geton.name?I.geton.name:B[4]));Q.instructions=T.join("\uff0c");Q.data=U;Q.type=f.WALK;N.push(Q)}K.push(U)}n.actions=N;n.lines=G;n.bounds=S;n.walks=K;n.stations=J;s=new m;s.value=O;s.text=this.fromDistToString(O);n.distance=s;s=new q;s.value=L;s.text=this.fromTimeToString(L);n.duration=s;e.push(n);
A.plans=e;A.start=this.fromDestToPoi(C.start);A.end=this.fromDestToPoi(C.dest)}C=g.OK}else C=g.NO_RESULTS;break;case 14:C=z.start;z=z.dest;A.start=[];v=0;for(s=C?C.length:0;v<s;v++){F=C[v];A.start.push(this.fromDestToPoi(F))}A.end=[];v=0;for(s=z?z.length:0;v<s;v++){F=z[v];A.end.push(this.fromDestToPoi(F))}C=g.MULTI_DESTINATION;break;case 1E4:C=g.ERROR;break;case 10004:C=g.INVALID_REQUEST;break;case 10006:C=g.NO_SUPPORT;break;default:C=g.UNKNOWN_ERROR}}r&&r(A,C);delete r},fromTranToStation_:function(A){var r=
new u;r.id=A.uid;r.name=A.name;r.latLng=new p(A.pointy,A.pointx);return r},fromTranToLeg_:function(A){var r=new a,v=new q,z=new m,C=A.walk;v.value=C.time;v.text=this.fromTimeToString(C.time);r.duration=v;z.value=C.distance;z.text=this.fromDistToString(C.distance);r.distance=z;var F=this.fromSegmentToPath(C.segment);r.path=F.path;var e=A.getoff;r.start_address=e.name;e=new p(e.pointy,e.pointx);r.start_location=e;A=A.geton;r.end_address=A.name;var n=new p(A.pointy,A.pointx);r.end_location=n;A=new h;
A.distance=z;A.duration=v;A.start_location=e;A.end_location=n;v=new w;v.text=__MapNSImpl__.RC.Direction[C.direction];v.latLng=e;A.turning=v;A.instructions=z.value?"\u5411"+v.text+"\u6b65\u884c\u7ea6"+A.distance.text:"";A.path=F.path;r.steps.push(A);return r}})})(__MapNS__);(function(c){c.LocationMode={CLIENT_IP:"CLIENT_IP",AREA_CODE:"AREA_CODE",LATLNG:"LATLNG",W3C_LOCATION:"W3C_LOCATION"}})(__MapNS__);(function(c){c.GeolocationStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.GeolocationResult=function(){this.name="";this.detail=this.latLng=null}})(__MapNS__);(function(c){var t=c.BaseService,p=c.LatLng,j=c.LocationMode,u=c.GeolocationResult,i=c.GeolocationStatus,k=c.MVCObject.checkers,o=__MapNSImpl__.Config;c.Geolocation=__MapNSImpl__.Class(t,{initialize:function(){t.apply(this);this.queryType=o.QueryType.POS},position:function(g,b){g&&this.request({request:g,callback:b})},request:function(g){var b=g.request,d=b.keyword;b=b.locationMode;var f=[],l="";if(d!==""&&!k.isNull(d)){if(k.isString(d))if(b)if(b===j.CLIENT_IP)l="ip";else if(b===j.AREA_CODE)l="acode";
else{if(b===j.LATLNG)l="lonlat"}else l=this.checkIP_(d)?"ip":"acode";else if(k.isInstanceOf(p)(d)){d=d.getLng()+","+d.getLat();l="lonlat"}f.push("wd="+d);f.push("tp="+l)}else this.queryType="gc";this.send(f,g)},onResult:function(g){var b=g.callback,d=g.object;g=new u;if(d){var f=d.detail;switch(d.info.type){case 4:case 31:d=f.cname;var l=f.path;if(d){g.name=d;g.latLng=new p(f.pointy,f.pointx);if(l){l.length==4&&(f=[l[3]?l[3].cname:"",l[2]?l[2].cname:"",l[1]?l[1].cname:"",l[0]?l[0].cname:""]);l.length==
3&&(f=[l[2]?l[2].cname:"",l[1]?l[1].cname:"",l[0]?l[0].cname:""]);l.length==2&&(f=[l[1]?l[1].cname:"",l[0]?l[0].cname:""]);l.length==1&&(f=[l[0]?l[0].cname:""]);g.detail=f.join(",")}f=i.OK}else f=i.NO_RESULTS;break;case 1E4:f=i.ERROR;break;case 10004:f=i.INVALID_REQUEST;break;default:f=i.UNKNOWN_ERROR}}b&&b(g,f);delete b},checkIP_:function(g){return/^(([01]?[\d]{1,2})|(2[0-4][\d])|(25[0-5]))(\.(([01]?[\d]{1,2})|(2[0-4][\d])|(25[0-5]))){3}$/.test(g)}})})(__MapNS__);(function(c){c.SuggestionMode={NORMAL:"NORMAL",BUS:"BUS",DISTRICT:"DISTRICT"}})(__MapNS__);(function(c){c.SuggestionStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){c.SuggestionResult=function(){}})(__MapNS__);(function(c){var t=c.BaseService,p=c.SuggestionResult,j=c.SuggestionStatus,u=__MapNSImpl__.Config,i=c.SuggestionMode;c.Suggestion=__MapNSImpl__.Class(t,{initialize:function(){t.apply(this);this.queryType=u.QueryType.SG},complete:function(k,o){k&&this.request({request:k,callback:o})},request:function(k){var o=k.request,g=o.suggestionMode,b=o.keyword;o=o.region;var d=[];if(checkers.isNull(o))d.push("c=1");else checkers.isString(o)?d.push("c="+encodeURIComponent(o)):d.push("c=1");b!==""&&!checkers.isNull(b)&&
d.push("wd="+encodeURIComponent(b));if(checkers.isNull(g))d.push("tp=0");else{g===i.NORMAL&&d.push("tp=0");g===i.BUS&&d.push("tp=1");g===i.DISTRICT&&d.push("tp=2")}this.send(d,k)},onResult:function(k){var o=k.callback,g=k.object;k=[];if(g){var b=g.detail;switch(g.info.type){case 5:if(g=b&&b.length){for(var d=0;d<g;d++){var f=b[d],l=new p,a=f.name,h=f.place,m=f.show,q=f.type,w=f.city.path;l.id=f.uid;l.text=a;l.region=h;l.highlight_text=m;l.poi_type=q;var x;if(w){w.length==4&&(x=[w[3]?w[3].cname:"",
w[2]?w[2].cname:"",w[1]?w[1].cname:"",w[0]?w[0].cname:""]);w.length==3&&(x=[w[2]?w[2].cname:"",w[1]?w[1].cname:"",w[0]?w[0].cname:""]);w.length==2&&(x=[w[1]?w[1].cname:"",w[0]?w[0].cname:""]);w.length==1&&(x=[w[0]?w[0].cname:""]);l.district=x.join(",")}k.push(l)}b=j.OK}else b=j.NO_RESULTS;break;case 1E4:b=j.ERROR;break;case 10004:b=j.INVALID_REQUEST;break;default:b=j.UNKNOWN_ERROR}}o&&o(k,b);delete o}})})(__MapNS__);(function(c){c.PoiStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",UNKNOWN_ERROR:"UNKNOWN_ERROR",NO_RESULTS:"NO_RESULTS"}})(__MapNS__);(function(c){var t=c.BaseService,p=c.LatLng,j=c.Poi,u=c.PoiStatus;checkers=c.MVCObject.checkers;Config=__MapNSImpl__.Config;Util=__MapNSImpl__.Util;c.PoiService=__MapNSImpl__.Class(t,{initialize:function(){t.apply(this);this.queryType=Config.QueryType.DTS},detail:function(i,k){i&&this.request({request:i,callback:k})},request:function(i){var k=i.request.poiId,o=[];checkers.isString(k)&&o.push("uids="+k);o.push("tp=0");o.push("num=10");this.send(o,i)},onResult:function(i){var k=i.callback,o=i.object;
i=[];if(o){var g=o.detail;switch(o.info.type){case 60:o=g.pois;if(g=o.length){for(var b=0;b<g;b++){var d=new j,f=o[b];d.id=f.uid;d.name=f.name;d.latLng=new p(f.pointy,f.pointx);f.addr&&(d.address=f.addr);f.phone&&(d.phone=f.phone);d.type=f.poitype;f.zip&&(d.postcode=f.zip);f.classes&&(d.category=f.classes);f.average_price&&(d.average_price=f.average_price);f.comment_num&&(d.comment_num=f.comment_num);f.comment_level&&(d.comment_level=f.comment_level);f.special_rec&&(d.special_rec=f.special_rec);f.src&&
(d.source=f.src);i.push(d)}g=u.OK}else g=u.NO_RESULTS;break;case 1E4:g=u.ERROR;break;case 10004:g=u.INVALID_REQUEST;break;default:g=u.UNKNOWN_ERROR}}k&&k(i,g);delete k}})})(__MapNS__);(function(){QQMap=__MapNS__;QQMapImpl=__MapNSImpl__;(function(c,t){if(typeof c=="string"){for(var p=c.split("."),j=window,u=0;u<p.length;u++){var i=p[u];j[i]||(j[i]={});j=j[i]}for(;p=t.pop();){j[p]=__MapNS__[p];QQMap["Q"+p]=__MapNS__[p]}}})("soso.maps",["Point","Size","Bounds","Color","ALIGN","LatLng","LatLngBounds","LatLngCircles","Fx","CssFx","Animation","ObjectLoader","MVCObject","Event","MVCArray","Overlay","Control","MapType","MapTypeId","MapTypeRegistry","Projection","MapCanvasProjection","TileLayer",
"TileGridLayer","RoadMapLayer","SatelliteLayer","HybridLayer","TrafficLayer","InfoWindow","Polygon","Polyline","Circle","MarkerImage","MarkerShape","MarkerDecoration","Marker","Label","GroundOverlay","ContextMenuControl","Copyright","CopyrightCollection","CopyrightControl","NavigationControl","NavigationControlStyle","ScaleControl","MapTypeControl","ZoomHintControl","OverviewMapControl","Map","Poi","Distance","Duration","Turning","Region","PoiType","SearchMode","SearchStatus","SearchResult","SearchService",
"SearchRenderer","PoiStatus","PoiResult","PoiService","LineType","LineStatus","LineResult","LineService","StationStatus","StationResult","StationService","ActionType","TransferAction","TransferStatus","TransferPolicy","TransferPlan","TransferResult","TransferService","DirectionsTravelMode","DirectionsPolicy","DirectionsStatus","DirectionsLeg","DirectionsRoute","DirectionsResult","DirectionsService","DirectionsStep","Geocoder","GeocoderResult","GeocoderStatus","LocationMode","GeolocationStatus","GeolocationResult",
"Geolocation","SuggestionMode","SuggestionStatus","SuggestionResult","Suggestion"]);Util.domReady(function(){var c=(new Date).getTime(),t=window[c]=new Image;t.onload=t.onerror=function(){window[c]=null};t.src="http://pr.soso.com/pingd?srctype=mapapi&tmp="+c.toString(36);t=null})})();